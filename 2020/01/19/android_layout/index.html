<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-loading-bar.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"rshawshank.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":true,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":3,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="android-布局介绍 布局一．基本理论Android六大基本布局分别是线性布局LinearLayout、表格布局TableLayout、相对布局RelativeLayout、层布局FrameLayout、绝对布局AbsoluteLayout、网格布局GridLayout。其中，表格布局是线性布局的子类。在手机程序设计中，绝对布局基本上不用，用得相对较多的是线性布局和相对布局。 学习基本布局要理">
<meta property="og:type" content="article">
<meta property="og:title" content="layout">
<meta property="og:url" content="http://rshawshank.github.io/2020/01/19/android_layout/index.html">
<meta property="og:site_name" content="rhb_blog">
<meta property="og:description" content="android-布局介绍 布局一．基本理论Android六大基本布局分别是线性布局LinearLayout、表格布局TableLayout、相对布局RelativeLayout、层布局FrameLayout、绝对布局AbsoluteLayout、网格布局GridLayout。其中，表格布局是线性布局的子类。在手机程序设计中，绝对布局基本上不用，用得相对较多的是线性布局和相对布局。 学习基本布局要理">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/1152574-20170608110040887-334790846.png">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/1152574-20170608110104247-1881733141.png">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/2787721-b5e910f1c786ac4b.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/2787721-09649fba48add621.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/2787721-ff2d4c4b39b9e98b.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/2787721-8087344ad8a0d40c.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/2787721-815cc21cdfaa018c.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/2787721-aebcad66710f4d48.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/2787721-76a3c17fa604a7bf.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/2787721-8e87f3b229af0add.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/2787721-39397d6075ee9ea6.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/2787721-70c5cdeb5790fe23.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/2787721-e6276e3d70792670.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/2787721-873d51f267e9a522.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/2787721-7bf04a9426419338.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/2787721-12b8f6492831ba1c.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/2787721-a0f8950a52341b11.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/2787721-b3b5a73715891a53.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/2787721-c601cf02c45dfb3a.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/2787721-6d3fd9ce0f0cfd75.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/2787721-58cfdd300086a125.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/2787721-d8ef7a9da9ced277.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/2787721-5792b4a2839fa7e9.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/2787721-50070bd874fbfbf4.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/2787721-99d23bdc50679804.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/2787721-6406fe760390e2f8.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/2787721-870080d070c12e91.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/9833282-6152ff329ca415cc.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/9833282-5b52c0c52428e4b9.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/9833282-05a487d1047a720d.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/9833282-75f004f3fca8823e.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/9833282-b3f03f55932a8c8c.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/9833282-f7f5ff4f8544353a.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/9833282-8a6b4005bf634f9e.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/9833282-9bbdb99625649263.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/9833282-1d3dab9afc7a84b2.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/9833282-41f0884a89f987e5.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/9833282-978faef12c54cb33.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/9833282-5629801b3986aaba.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/9833282-808dbc8a8700bbfd.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/9833282-05ffff7d8bdcfcd7.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/9833282-0fa9ac2a9a132302.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/9833282-7ccc6dd333860f34.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/9833282-4c9ce9254313d319.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/9833282-69db4f6edee4151e.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/9833282-1c4e2bdcb9373c3b.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/9101961-0fc70d37cc580a8e.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/9101961-ddf0414d983a9deb.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/9101961-2a4a4ba3c11c3500.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/9101961-f9dd5f0e84910cc3.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/9101961-2c3362b138b185c0.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/9101961-9bd9a7c4a8c6c29b.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/9101961-fffc6d34f559cc7e.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/9101961-daa5251bb7b1b86c.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/9101961-1f1a292291af1bd5.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/9101961-20d000180c25cb87.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/9101961-8bbc486ac75b819b.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/9101961-ead6aefd11a5aa08.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/9101961-837ade3cd71a4983.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/9101961-b69f7cc343302025.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/9101961-260529f1215da352.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/9101961-6933445fdad7334b.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/1417661107_1898.gif">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/3485428-f448bae6615efa4c.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/3485428-fb9b326a661904ab.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/3485428-37f3e8d70491ff22.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/3485428-54ea163c547c1cc6.webp">
<meta property="og:image" content="http://rshawshank.github.io/images/layout/11483779-5856d1febb879be1.webp">
<meta property="article:published_time" content="2020-01-19T08:41:06.000Z">
<meta property="article:modified_time" content="2022-11-13T09:13:26.000Z">
<meta property="article:author" content="rhb">
<meta property="article:tag" content="android">
<meta property="article:tag" content="layout">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://rshawshank.github.io/images/layout/1152574-20170608110040887-334790846.png">

<link rel="canonical" href="http://rshawshank.github.io/2020/01/19/android_layout/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>layout | rhb_blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">rhb_blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">rao的博客</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">57</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">23</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">140</span></a>

  </li>
        <li class="menu-item menu-item-photos">

    <a href="/photos/" rel="section"><i class="fa fa-camera fa-fw"></i>相册</a>

  </li>
        <li class="menu-item menu-item-resources">

    <a href="/resources/" rel="section"><i class="fa fa-download fa-fw"></i>资源</a>

  </li>
        <li class="menu-item menu-item-readnote">

    <a href="/readnote" rel="section"><i class="fa fa-book fa-fw"></i>阅读笔记</a>

  </li>
        <li class="menu-item menu-item-somethink">

    <a href="/somethink/" rel="section"><i class="fa fa-sticky-note fa-fw"></i>随笔闲谈</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

  <a href="https://github.com/RShawshank" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://rshawshank.github.io/2020/01/19/android_layout/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="rhb">
      <meta itemprop="description" content="纵浪大化中，不喜亦不惧">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="rhb_blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          layout
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-01-19 08:41:06" itemprop="dateCreated datePublished" datetime="2020-01-19T08:41:06Z">2020-01-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-11-13 09:13:26" itemprop="dateModified" datetime="2022-11-13T09:13:26Z">2022-11-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">学习笔记</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/android/" itemprop="url" rel="index"><span itemprop="name">android</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>android-布局介绍</p>
<h2 id="布局"><a href="#布局" class="headerlink" title="布局"></a>布局</h2><h3 id="一．基本理论"><a href="#一．基本理论" class="headerlink" title="一．基本理论"></a>一．基本理论</h3><p>Android六大基本布局分别是<br>线性布局LinearLayout、表格布局TableLayout、相对布局RelativeLayout、<br>层布局FrameLayout、绝对布局AbsoluteLayout、网格布局GridLayout。<br>其中，表格布局是线性布局的子类。<br>在手机程序设计中，绝对布局基本上不用，用得相对较多的是线性布局和相对布局。</p>
<p>学习基本布局要理解两个比较基础概念的图：<br>（一）Android布局管理器的类图<br><img src="/images/layout/1152574-20170608110040887-334790846.png"></p>
<p>上面这个类图只是说了六大基本布局的关系，其实ViewGroup还有其他一些布局管理器。<br>这里要理解一点就是布局也是布局管理器，因为布局里面还可以添加布局。</p>
<p>（二）Android布局的XML关系图<br><img src="/images/layout/1152574-20170608110104247-1881733141.png"></p>
<p>布局管理器里面既可以添加多个布局管理器又可以添加多个控件，而控件里面不能在添加布局或控件了。</p>
<h3 id="二-各个布局的使用"><a href="#二-各个布局的使用" class="headerlink" title="二.各个布局的使用"></a>二.各个布局的使用</h3><h4 id="（一）线性布局"><a href="#（一）线性布局" class="headerlink" title="（一）线性布局"></a>（一）线性布局</h4><p>线性布局在开发中使用最多，具有垂直方向与水平方向的布局方式，通过设置属性“android:orientation”控制方向，属性值垂直（vertical）和水平(horizontal)，默认水平方向。</p>
<ol>
<li>android:gravity：内部控件对齐方式，常用属性值有center、center_vertical、center_horizontal、top、bottom、left、right等。<br>这个属性在布局组件RelativeLayout、TableLayout中也有使用，FrameLayout、AbsoluteLayout则没有这个属性。</li>
<li>center：居中显示，这里并不是表示显示在LinearLayout的中心，当LinearLayout线性方向为垂直方向时，center表示水平居中，但是并不能垂直居中，此时等同于center_horizontal的作用；同样当线性方向为水平方向时，center表示垂直居中，等同于center_vertical。</li>
<li>top、bottom、left、right顾名思义为内部控件居顶、低、左、右布局。<br>这里要与android:layout_gravity区分开，layout_gravity是用来设置自身相对于父元素的布局。</li>
<li>android:layout_weight：权重，用来分配当前控件在剩余空间的大小。<br>使用权重一般要把分配该权重方向的长度设置为零，比如在水平方向分配权重，就把width设置为零。</li>
</ol>
<h4 id="（二）RelativeLayout"><a href="#（二）RelativeLayout" class="headerlink" title="（二）RelativeLayout"></a>（二）RelativeLayout</h4><p>相对布局可以让子控件相对于兄弟控件或父控件进行布局，可以设置子控件相对于兄弟控件或父控件进行上下左右对齐。<br>RelativeLayout能替换一些嵌套视图，当我们用LinearLayout来实现一个简单的布局但又使用了过多的嵌套时，就可以考虑使用RelativeLayout重新布局。<br>相对布局就是一定要加Id才能管理。</p>
<p>RelativeLayout中子控件常用属性：</p>
<ol>
<li>相对于父控件，例如：android:layout_alignParentTop&#x3D;“true”<br>android:layout_alignParentTop      控件的顶部与父控件的顶部对齐;<br>android:layout_alignParentBottom  控件的底部与父控件的底部对齐;<br>android:layout_alignParentLeft      控件的左部与父控件的左部对齐;<br>android:layout_alignParentRight     控件的右部与父控件的右部对齐;</li>
<li>相对给定Id控件，例如：android:layout_above&#x3D;“@id&#x2F;**”<br>android:layout_above 控件的底部置于给定ID的控件之上;<br>android:layout_below     控件的底部置于给定ID的控件之下;<br>android:layout_toLeftOf    控件的右边缘与给定ID的控件左边缘对齐;<br>android:layout_toRightOf  控件的左边缘与给定ID的控件右边缘对齐;<br>android:layout_alignBaseline  控件的baseline与给定ID的baseline对齐;<br>android:layout_alignTop     控件的顶部边缘与给定ID的顶部边缘对齐;<br>android:layout_alignBottom   控件的底部边缘与给定ID的底部边缘对齐;<br>android:layout_alignLeft       控件的左边缘与给定ID的左边缘对齐;<br>android:layout_alignRight      控件的右边缘与给定ID的右边缘对齐;</li>
<li>居中，例如：android:layout_centerInParent&#x3D;“true”<br>android:layout_centerHorizontal 水平居中;<br>android:layout_centerVertical    垂直居中;<br>android:layout_centerInParent  父控件的中央;</li>
</ol>
<h4 id="（三）FrameLayout"><a href="#（三）FrameLayout" class="headerlink" title="（三）FrameLayout"></a>（三）FrameLayout</h4><p>帧布局或叫层布局，从屏幕左上角按照层次堆叠方式布局，后面的控件覆盖前面的控件。<br>该布局在开发中设计地图经常用到，因为是按层次方式布局，我们需要实现层面显示的样式时就可以<br>采用这种布局方式，比如我们要实现一个类似百度地图的布局，我们移动的标志是在一个图层的上面。<br>在普通功能的软件设计中用得也不多。层布局主要应用就是地图方面。</p>
<h4 id="（四）AbsoluteLayout"><a href="#（四）AbsoluteLayout" class="headerlink" title="（四）AbsoluteLayout"></a>（四）AbsoluteLayout</h4><p> 绝对布局中将所有的子元素通过设置android:layout_x 和 android:layout_y属性，将子元素的坐标位置固定下来，即坐标(android:layout_x, android:layout_y) ，layout_x用来表示横坐标，layout_y用来表示纵坐标。屏幕左上角为坐标(0,0)，横向往右为正方，纵向往下为正方。实际应用中，这种布局用的比较少，因为Android终端一般机型比较多，各自的屏幕大小。分辨率等可能都不一样，如果用绝对布局，可能导致在有的终端上显示不全等。</p>
<h4 id="（五）TableLayout"><a href="#（五）TableLayout" class="headerlink" title="（五）TableLayout"></a>（五）TableLayout</h4><p>表格布局，适用于多行多列的布局格式，每个TableLayout是由多个TableRow组成，一个TableRow就表示TableLayout中的每一行，这一行可以由多个子元素组成。实际上TableLayout和TableRow都是LineLayout线性布局的子类。但是TableRow的参数android:orientation属性值固定为horizontal，且android:layout_width&#x3D;MATCH_PARENT，android:layout_height&#x3D;WRAP_CONTENT。所以TableRow实际是一个横向的线性布局，且所以子元素宽度和高度一致。</p>
<ul>
<li>++注意：在TableLayout中，单元格可以为空，但是不能跨列，意思是只能不能有相邻的单元格为空。++</li>
</ul>
<p>TableLayout常用属性：</p>
<ol>
<li>android:shrinkColumns：设置可收缩的列，内容过多就收缩显示到第二行</li>
<li>android:stretchColumns：设置可伸展的列，将空白区域填充满整个列</li>
<li>android:collapseColumns：设置要隐藏的列<br>列的索引从0开始，shrinkColumns和stretchColumns可以同时设置。</li>
</ol>
<p>子控件常用属性：</p>
<ol>
<li>android:layout_column：第几列</li>
<li>android:layout_span：占据列数<br>屏幕中心是一个类似Material布局，底部是一个页面切换的导航栏。底部布局通过设置android:stretchColumns&#x3D;”0,1,2,3″来让四个按钮同样大小显示并填充到整个宽度，中心区域主要使用android:stretchColumns&#x3D;”0,1,2″填充显示以及android:layout_span&#x3D;”2″控制大内容跨列显示。</li>
</ol>
<h4 id="（六）GridLayout-网格布局"><a href="#（六）GridLayout-网格布局" class="headerlink" title="（六）GridLayout(网格布局)"></a>（六）GridLayout(网格布局)</h4><p>作为android 4.0 后新增的一个布局,与前面介绍过的TableLayout(表格布局)其实有点大同小异;<br>不过新增了一些东东</p>
<ol>
<li>跟LinearLayout(线性布局)一样,他可以设置容器中组件的对齐方式</li>
<li>容器中的组件可以跨多行也可以跨多列(相比TableLayout直接放组件,占一行相比较)</li>
</ol>
<p>常用属性:<br>排列对齐:</p>
<ol>
<li>设置组件的排列方式:   android:orientation&#x3D;””     vertical(竖直,默认)或者horizontal(水平)</li>
<li>设置组件的对齐方式:   android:layout_gravity&#x3D;””   center,left,right,buttom</li>
</ol>
<p>设置布局为几行几列:</p>
<ol>
<li>设置有多少行: android:rowCount&#x3D;”4”        &#x2F;&#x2F;设置网格布局有4行</li>
<li>设置有多少列: android:columnCount&#x3D;”4”    &#x2F;&#x2F;设置网格布局有4列</li>
</ol>
<p>设置某个组件位于几行几列<br>注:都是从0开始算的哦！</p>
<ol>
<li>组件在第几行: android:layout_row &#x3D; “1”   &#x2F;&#x2F;设置组件位于第二行 </li>
<li>组件在第几列: android:layout_column &#x3D; “2”   &#x2F;&#x2F;设置该组件位于第三列</li>
</ol>
<p>设置某个组件横跨几行几列:</p>
<ol>
<li>横跨几行: android:layout_rowSpan &#x3D; “2”     &#x2F;&#x2F;纵向横跨2行</li>
<li>横跨几列: android:layout_columnSpan &#x3D; “3”     &#x2F;&#x2F;横向横跨2列</li>
</ol>
<p>这里要说明一点: </p>
<p>通过android:layout_rowSpan和android:layout_columnSpan设置表明组件横越的行数与列数<br>再通过:android:layout_gravity &#x3D; “fill”  设置表明组件填满所横越的整行或者整列</p>
<p>用法总结:</p>
<ol>
<li>GridLayout使用虚细线将布局划分为行,列和单元格,同时也支持在行,列上进行交错排列</li>
<li>使用流程:</li>
</ol>
<p>step 1. 先定义组件的对其方式 android:orientation  水平或者竖直 </p>
<p>step 2. 设置组件所在的行或者列,记得是从0开始算的</p>
<p>step 3. 设置组件横跨几行或者几列;设置完毕后,需要在设置一个填充:android:layout_gravity &#x3D; “fill”</p>
<p>可能遇到的问题:<br>当读者将布局设置为GridLayout时,会出现 莫名其妙的报错,<br>如果代码语法逻辑没有错的话,就可能是配置文件 AndroidManifest.xml 的问题了<br>因为GridLayout是android 4.0 后才推出的,API Level 为 14<br>只需要将配置文件中的 MinSDK改成14或者以上版本 即可,保存,问题就解决了！</p>
<p>除上面讲过之外常用的几个布局的属性：</p>
<ol>
<li>layout_margin<br>用于设置控件边缘相对于父控件的边距<br>android:layout_marginLeft<br>android:layout_marginRight<br>android:layout_marginTop<br>android:layout_marginBottom</li>
<li>layout_padding<br>用于设置控件内容相对于控件边缘的边距<br>android:layout_paddingLeft<br>android:layout_paddingRight<br>android:layout_paddingTop<br>android:layout_paddingBottom</li>
<li>layout_width&#x2F;height<br>用于设置控件的高度和宽度<br>wrap_content 内容包裹，表示这个控件的里面文字大小填充<br>fill_parent 跟随父窗口<br>match_parent</li>
<li>gravity<br>用于设置View组件里面内容的对齐方式<br>top bottom left   right  center等</li>
<li>android:layout_gravity<br>用于设置Container组件的对齐方式<br>android:layout_alignTop 本元素的上边缘和某元素的的上边缘对齐<br>android:layout_alignLeft 本元素的左边缘和某元素的的左边缘对齐<br>android:layout_alignBottom 本元素的下边缘和某元素的的下边缘对齐<br>android:layout_alignRight 本元素的右边缘和某元素的的右边缘对齐</li>
</ol>
<h2 id="1、约束布局ConstraintLayout"><a href="#1、约束布局ConstraintLayout" class="headerlink" title="1、约束布局ConstraintLayout"></a>1、约束布局ConstraintLayout</h2><h3 id="1、介绍"><a href="#1、介绍" class="headerlink" title="1、介绍"></a>1、介绍</h3><p><strong>约束布局ConstraintLayout</strong> 是一个ViewGroup，可以在Api9以上的Android系统使用它，它的出现主要是为了解决布局嵌套过多的问题，以灵活的方式定位和调整小部件。从 <strong>Android Studio 2.3</strong> 起，官方的模板默认使用 <strong>ConstraintLayout</strong>。</p>
<p><a target="_blank" rel="noopener" href="https://developer.android.google.cn/reference/android/support/constraint/ConstraintLayout">官方文档</a></p>
<h3 id="2、为什么要用ConstraintLayout"><a href="#2、为什么要用ConstraintLayout" class="headerlink" title="2、为什么要用ConstraintLayout"></a>2、为什么要用ConstraintLayout</h3><p>在开发过程中经常能遇到一些复杂的UI，可能会出现布局嵌套过多的问题，嵌套得越多，设备绘制视图所需的时间和计算功耗也就越多。简单举个例子：</p>
<p><img src="/images/layout/2787721-b5e910f1c786ac4b.webp" alt="img"></p>
<p>假设现在要写一个这样的布局，可能有人会这么写：<br>首先是一个垂直的LinearLayout，里面放两个水平的LinearLayout，然后在水平的LinearLayout里面放TextView。这样的写法就嵌套了两层LinearLayout。</p>
<p><img src="/images/layout/2787721-09649fba48add621.webp" alt="img"></p>
<p>有些人考虑到了嵌套布局带来的风险，所以用一个RelativeLayout来装下所有的控件。那么问题来了，既然用RelativeLayout可以解决问题，为什么还要使用ConstraintLayout呢？因为ConstraintLayout使用起来比RelativeLayout更灵活，性能更出色！还有一点就是ConstraintLayout可以按照比例约束控件位置和尺寸，能够更好地适配屏幕大小不同的机型。</p>
<h3 id="3-如何使用ConstraintLayout"><a href="#3-如何使用ConstraintLayout" class="headerlink" title="3.如何使用ConstraintLayout"></a>3.如何使用ConstraintLayout</h3><h4 id="3-1-添加依赖"><a href="#3-1-添加依赖" class="headerlink" title="3.1 添加依赖"></a>3.1 添加依赖</h4><p>首先我们需要在app&#x2F;build.gradle文件中添加ConstraintLayout的依赖，如下所示。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">implementation <span class="string">&#x27;com.android.support.constraint:constraint-layout:1.1.3&#x27;</span></span><br></pre></td></tr></table></figure>

<h4 id="3-2-相对定位"><a href="#3-2-相对定位" class="headerlink" title="3.2 相对定位"></a>3.2 相对定位</h4><p>相对定位是部件对于另一个位置的约束，这么说可能有点抽象，举个例子：</p>
<p><img src="/images/layout/2787721-ff2d4c4b39b9e98b.webp" alt="img"></p>
<p>如图所示，TextView2在TextView1的右边，TextView3在TextView1的下面，这个时候在布局文件里面应该这样写：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/TextView1&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">...</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">&quot;TextView1&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/TextView2&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">...</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintLeft_toRightOf</span>=<span class="string">&quot;@+id/TextView1&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/TextView3&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">...</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@+id/TextView1&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>上面代码中在TextView2里用到了app:layout_constraintLeft_toRightOf&#x3D;”@+id&#x2F;TextView1”这个属性，他的意思是把TextView2的左边约束到TextView1的右边，如下图所示：</p>
<p><img src="/images/layout/2787721-8087344ad8a0d40c.webp" alt="img"></p>
<p>同理TextView3在TextView1的下面，就需要用到app:layout_constraintTop_toBottomOf&#x3D;”@+id&#x2F;TextView1”，即把TextView3的上面约束到TextView1的下面。</p>
<p>下面来看看相对定位的常用属性：</p>
<ul>
<li>layout_constraintLeft_toLeftOf</li>
<li>layout_constraintLeft_toRightOf</li>
<li>layout_constraintRight_toLeftOf</li>
<li>layout_constraintRight_toRightOf</li>
<li>layout_constraintTop_toTopOf</li>
<li>layout_constraintTop_toBottomOf</li>
<li>layout_constraintBottom_toTopOf</li>
<li>layout_constraintBottom_toBottomOf</li>
<li>layout_constraintBaseline_toBaselineOf</li>
<li>layout_constraintStart_toEndOf</li>
<li>layout_constraintStart_toStartOf</li>
<li>layout_constraintEnd_toStartOf</li>
<li>layout_constraintEnd_toEndOf</li>
</ul>
<p>上面属性中有一个比较有趣的layout_constraintBaseline_toBaselineOf<br><strong>Baseline</strong>指的是文本基线，举个例子：</p>
<p><img src="/images/layout/2787721-815cc21cdfaa018c.webp" alt="img"></p>
<p>如图所示，两个TextView的高度不一致，但是又希望他们文本对齐，这个时候就可以使用layout_constraintBaseline_toBaselineOf，代码如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/TextView1&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">...</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/TextView2&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">...</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintLeft_toRightOf</span>=<span class="string">&quot;@+id/TextView1&quot;</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintBaseline_toBaselineOf</span>=<span class="string">&quot;@+id/TextView1&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>效果如下：</p>
<p><img src="/images/layout/2787721-aebcad66710f4d48.webp" alt="img"></p>
<p>ConstraintLayout相对定位的用法跟RelativeLayout还是比较相似的，下面用一个图来总结相对定位：</p>
<p><img src="/images/layout/2787721-76a3c17fa604a7bf.webp" alt="img"></p>
<h4 id="3-3-角度定位"><a href="#3-3-角度定位" class="headerlink" title="3.3 角度定位"></a>3.3 角度定位</h4><p>角度定位指的是可以用一个角度和一个距离来约束两个空间的中心。举个例子：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/TextView1&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/TextView2&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintCircle</span>=<span class="string">&quot;@+id/TextView1&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintCircleAngle</span>=<span class="string">&quot;120&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintCircleRadius</span>=<span class="string">&quot;150dp&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>上面例子中的TextView2用到了3个属性：<br>app:layout_constraintCircle&#x3D;”@+id&#x2F;TextView1”<br>app:layout_constraintCircleAngle&#x3D;”120”（角度）<br>app:layout_constraintCircleRadius&#x3D;”150dp”（距离）<br>指的是TextView2的中心在TextView1的中心的120度，距离为150dp，效果如下：</p>
<p><img src="/images/layout/2787721-8e87f3b229af0add.webp" alt="img"></p>
<h4 id="3-4-边距"><a href="#3-4-边距" class="headerlink" title="3.4 边距"></a>3.4 边距</h4><ul>
<li>3.4.1 常用margin</li>
</ul>
<p>ConstraintLayout的边距常用属性如下：<br>android:layout_marginStart<br>android:layout_marginEnd<br>android:layout_marginLeft<br>android:layout_marginTop<br>android:layout_marginRight<br>android:layout_marginBottom</p>
<p>看起来跟别的布局没有什么差别，但实际上控件在ConstraintLayout里面要实现margin，必须先约束该控件在ConstraintLayout里的位置，举个例子：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">android.support.constraint.ConstraintLayout</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/TextView1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;10dp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">android.support.constraint.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>如果在别的布局里，TextView1的位置应该是距离边框的左边和上面有一个10dp的边距，但是在ConstraintLayout里，是不生效的，因为没有约束TextView1在布局里的位置。正确的写法如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">android.support.constraint.ConstraintLayout</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/TextView1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginTop</span>=<span class="string">&quot;10dp&quot;</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintLeft_toLeftOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">android.support.constraint.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>把TextView1的左边和上边约束到parent的左边和上边，这样margin就会生效，效果如下：</p>
<p><img src="/images/layout/2787721-39397d6075ee9ea6.webp" alt="img"></p>
<p>在使用margin的时候要注意两点：<br>控件必须在布局里约束一个相对位置<br>margin只能大于等于0</p>
<ul>
<li>3.4.2 goneMargin</li>
</ul>
<p>goneMargin主要用于约束的控件可见性被设置为gone的时候使用的margin值，属性如下：<br>layout_goneMarginStart<br>layout_goneMarginEnd<br>layout_goneMarginLeft<br>layout_goneMarginTop<br>layout_goneMarginRight<br>layout_goneMarginBottom</p>
<p>举个例子：<br>假设TextView2的左边约束在TextView1的右边，并给TextView2设一个app:layout_goneMarginLeft&#x3D;”10dp”，代码如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">android.support.constraint.ConstraintLayout</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/TextView1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">...</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/TextView2&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">...</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintLeft_toRightOf</span>=<span class="string">&quot;@+id/TextView1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_goneMarginLeft</span>=<span class="string">&quot;10dp&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">android.support.constraint.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>效果如下，TextView2在TextView1的右边，且没有边距。</p>
<p><img src="/images/layout/2787721-70c5cdeb5790fe23.webp" alt="img"></p>
<p>这个时候把TextView1的可见性设为gone，效果如下：</p>
<p><img src="/images/layout/2787721-e6276e3d70792670.webp" alt="img"></p>
<p>TextView1消失后，TextView2有一个距离左边10dp的边距。</p>
<h4 id="3-5-居中和偏移"><a href="#3-5-居中和偏移" class="headerlink" title="3.5 居中和偏移"></a>3.5 居中和偏移</h4><p>在RelativeLayout中，把控件放在布局中间的方法是把layout_centerInParent设为true，而在ConstraintLayout中的写法是：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app:layout_constraintBottom_toBottomOf=<span class="string">&quot;parent&quot;</span></span><br><span class="line">app:layout_constraintLeft_toLeftOf=<span class="string">&quot;parent&quot;</span></span><br><span class="line">app:layout_constraintRight_toRightOf=<span class="string">&quot;parent&quot;</span></span><br><span class="line">app:layout_constraintTop_toTopOf=<span class="string">&quot;parent&quot;</span></span><br></pre></td></tr></table></figure>

<p>意思是把控件的上下左右约束在布局的上下左右，这样就能把控件放在布局的中间了。同理RelativeLayout中的水平居中layout_centerHorizontal相当于在ConstraintLayout约束控件的左右为parent的左右；RelativeLayout中的垂直居中layout_centerVertical相当于在ConstraintLayout约束控件的上下为parent的上下。<br>由于ConstraintLayout中的居中已经为控件约束了一个相对位置，所以可以使用margin，如下所示：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/TextView1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">...</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;100dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintLeft_toLeftOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintRight_toRightOf</span>=<span class="string">&quot;parent&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>效果如下：</p>
<p><img src="/images/layout/2787721-873d51f267e9a522.webp" alt="img"></p>
<p>上面TextView1在水平居中后使用layout_marginLeft&#x3D;”100dp”向右偏移了100dp。除了这种偏移外，ConstraintLayout还提供了另外一种偏移的属性：<br>layout_constraintHorizontal_bias 水平偏移<br>layout_constraintVertical_bias 垂直偏移</p>
<p>举个例子：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/TextView1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">...</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintHorizontal_bias</span>=<span class="string">&quot;0.3&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintLeft_toLeftOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintRight_toRightOf</span>=<span class="string">&quot;parent&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>效果如下：</p>
<p><img src="/images/layout/2787721-7bf04a9426419338.webp" alt="img"></p>
<p>假如现在要实现水平偏移，给TextView1的layout_constraintHorizontal_bias赋一个范围为 0-1 的值，假如赋值为0，则TextView1在布局的最左侧，假如赋值为1，则TextView1在布局的最右侧，假如假如赋值为0.5，则水平居中，假如假如赋值为0.3，则更倾向于左侧。<br>垂直偏移同理。</p>
<h4 id="3-6-尺寸约束"><a href="#3-6-尺寸约束" class="headerlink" title="3.6 尺寸约束"></a>3.6 尺寸约束</h4><p>控件的尺寸可以通过四种不同方式指定：</p>
<ul>
<li>使用指定的尺寸</li>
<li>使用wrap_content，让控件自己计算大小<br>当控件的高度或宽度为wrap_content时，可以使用下列属性来控制最大、最小的高度或宽度：<br>android:minWidth 最小的宽度<br>android:minHeight 最小的高度<br>android:maxWidth 最大的宽度<br>android:maxHeight 最大的高度<br>注意！当ConstraintLayout为1.1版本以下时，使用这些属性需要加上强制约束，如下所示：<br>app:constrainedWidth&#x3D;”true”<br>app:constrainedHeight&#x3D;”true”</li>
<li>使用 0dp (MATCH_CONSTRAINT)<br>官方不推荐在ConstraintLayout中使用match_parent，可以设置 0dp (MATCH_CONSTRAINT) 配合约束代替match_parent，举个例子：</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/TextView1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;50dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintLeft_toLeftOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintRight_toRightOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:visibility</span>=<span class="string">&quot;visible&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>宽度设为0dp，左右两边约束parent的左右两边，并设置左边边距为50dp，效果如下：</p>
<p><img src="/images/layout/2787721-12b8f6492831ba1c.webp" alt="img"></p>
<ul>
<li>宽高比<br>当宽或高至少有一个尺寸被设置为0dp时，可以通过属性layout_constraintDimensionRatio设置宽高比，举个例子：</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/TextView1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintDimensionRatio</span>=<span class="string">&quot;1:1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintLeft_toLeftOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintRight_toRightOf</span>=<span class="string">&quot;parent&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>宽设置为0dp，宽高比设置为1:1，这个时候TextView1是一个正方形，效果如下：</p>
<p><img src="/images/layout/2787721-a0f8950a52341b11.webp" alt="img"></p>
<p>除此之外，在设置宽高比的值的时候，还可以在前面加W或H，分别指定宽度或高度限制。 例如：<br>app:layout_constraintDimensionRatio&#x3D;”H,2:3”指的是 高:宽&#x3D;2:3<br>app:layout_constraintDimensionRatio&#x3D;”W,2:3”指的是 宽:高&#x3D;2:3</p>
<h4 id="3-7-链"><a href="#3-7-链" class="headerlink" title="3.7 链"></a>3.7 链</h4><p>如果两个或以上控件通过下图的方式约束在一起，就可以认为是他们是一条链（图为横向的链，纵向同理）。</p>
<p><img src="/images/layout/2787721-b3b5a73715891a53.webp" alt="img"></p>
<p>用代码表示：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/TextView1&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintLeft_toLeftOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintRight_toLeftOf</span>=<span class="string">&quot;@+id/TextView2&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/TextView2&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintLeft_toRightOf</span>=<span class="string">&quot;@+id/TextView1&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintRight_toLeftOf</span>=<span class="string">&quot;@+id/TextView3&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintRight_toRightOf</span>=<span class="string">&quot;parent&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/TextView3&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintLeft_toRightOf</span>=<span class="string">&quot;@+id/TextView2&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintRight_toRightOf</span>=<span class="string">&quot;parent&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>3个TextView相互约束，两端两个TextView分别与parent约束，成为一条链，效果如下：</p>
<p><img src="/images/layout/2787721-c601cf02c45dfb3a.webp" alt="img"></p>
<p>一条链的第一个控件是这条链的链头，我们可以在链头中设置 layout_constraintHorizontal_chainStyle来改变整条链的样式。chains提供了3种样式，分别是：<br>CHAIN_SPREAD —— 展开元素 (默认)；<br>CHAIN_SPREAD_INSIDE —— 展开元素，但链的两端贴近parent；<br>CHAIN_PACKED —— 链的元素将被打包在一起。<br>如图所示：</p>
<p><img src="/images/layout/2787721-6d3fd9ce0f0cfd75.webp" alt="img"></p>
<p>上面的例子创建了一个样式链，除了样式链外，还可以创建一个权重链。<br>可以留意到上面所用到的3个TextView宽度都为wrap_content，如果我们把宽度都设为0dp，这个时候可以在每个TextView中设置横向权重layout_constraintHorizontal_weight(constraintVertical为纵向)来创建一个权重链，如下所示：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">       <span class="attr">android:id</span>=<span class="string">&quot;@+id/TextView1&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">app:layout_constraintLeft_toLeftOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">app:layout_constraintRight_toLeftOf</span>=<span class="string">&quot;@+id/TextView2&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">app:layout_constraintHorizontal_weight</span>=<span class="string">&quot;2&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">       <span class="attr">android:id</span>=<span class="string">&quot;@+id/TextView2&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">app:layout_constraintLeft_toRightOf</span>=<span class="string">&quot;@+id/TextView1&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">app:layout_constraintRight_toLeftOf</span>=<span class="string">&quot;@+id/TextView3&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">app:layout_constraintRight_toRightOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">app:layout_constraintHorizontal_weight</span>=<span class="string">&quot;3&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">       <span class="attr">android:id</span>=<span class="string">&quot;@+id/TextView3&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">android:layout_width</span>=<span class="string">&quot;0dp&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">app:layout_constraintLeft_toRightOf</span>=<span class="string">&quot;@+id/TextView2&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">app:layout_constraintRight_toRightOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">app:layout_constraintHorizontal_weight</span>=<span class="string">&quot;4&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>效果如下：</p>
<p><img src="/images/layout/2787721-58cfdd300086a125.webp" alt="img"></p>
<h3 id="4-辅助工具"><a href="#4-辅助工具" class="headerlink" title="4.辅助工具"></a>4.辅助工具</h3><h4 id="4-1-Optimizer"><a href="#4-1-Optimizer" class="headerlink" title="4.1 Optimizer"></a>4.1 Optimizer</h4><p>当我们使用 MATCH_CONSTRAINT 时，ConstraintLayout 将对控件进行 2 次测量，ConstraintLayout在1.1中可以通过设置 <strong>layout_optimizationLevel</strong> 进行优化，可设置的值有：<br>none：无优化<br>standard：仅优化直接约束和屏障约束（默认）<br>direct：优化直接约束<br>barrier：优化屏障约束<br>chain：优化链约束<br>dimensions：优化尺寸测量</p>
<h4 id="4-2-Barrier"><a href="#4-2-Barrier" class="headerlink" title="4.2 Barrier"></a>4.2 Barrier</h4><p><img src="/images/layout/2787721-d8ef7a9da9ced277.webp" alt="img"></p>
<p>假设有3个控件ABC，C在AB的右边，但是AB的宽是不固定的，这个时候C无论约束在A的右边或者B的右边都不对。当出现这种情况可以用Barrier来解决。Barrier可以在多个控件的一侧建立一个屏障，如下所示：</p>
<p><img src="/images/layout/2787721-5792b4a2839fa7e9.webp" alt="img"></p>
<p>这个时候C只要约束在Barrier的右边就可以了，代码如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/TextView1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/TextView2&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">&quot;@+id/TextView1&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">android.support.constraint.Barrier</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/barrier&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:barrierDirection</span>=<span class="string">&quot;right&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:constraint_referenced_ids</span>=<span class="string">&quot;TextView1,TextView2&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/TextView3&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintLeft_toRightOf</span>=<span class="string">&quot;@+id/barrier&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>app:barrierDirection为屏障所在的位置，可设置的值有：bottom、end、left、right、start、top<br>app:constraint_referenced_ids为屏障引用的控件，可设置多个(用“,”隔开)</p>
<h4 id="4-3-Group"><a href="#4-3-Group" class="headerlink" title="4.3 Group"></a>4.3 Group</h4><p>Group可以把多个控件归为一组，方便隐藏或显示一组控件，举个例子：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/TextView1&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/TextView2&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintLeft_toRightOf</span>=<span class="string">&quot;@+id/TextView1&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/TextView3&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintLeft_toRightOf</span>=<span class="string">&quot;@id/TextView2&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>



<p><img src="/images/layout/2787721-50070bd874fbfbf4.webp" alt="img"></p>
<p>现在有3个并排的TextView，用Group把TextView1和TextView3归为一组，再设置这组控件的可见性，如下所示：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">android.support.constraint.Group</span></span></span><br><span class="line"><span class="tag">     <span class="attr">android:id</span>=<span class="string">&quot;@+id/group&quot;</span></span></span><br><span class="line"><span class="tag">     <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">     <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">     <span class="attr">android:visibility</span>=<span class="string">&quot;invisible&quot;</span></span></span><br><span class="line"><span class="tag">     <span class="attr">app:constraint_referenced_ids</span>=<span class="string">&quot;TextView1,TextView3&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>





<p>效果如下：</p>
<p><img src="/images/layout/2787721-99d23bdc50679804.webp" alt="img"></p>
<h4 id="4-4-Placeholder"><a href="#4-4-Placeholder" class="headerlink" title="4.4 Placeholder"></a>4.4 Placeholder</h4><p>Placeholder指的是占位符。在Placeholder中可使用setContent()设置另一个控件的id，使这个控件移动到占位符的位置。举个例子：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">android.support.constraint.Placeholder</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/placeholder&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:content</span>=<span class="string">&quot;@+id/textview&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintLeft_toLeftOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/textview&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;#cccccc&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:padding</span>=<span class="string">&quot;16dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;TextView&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textColor</span>=<span class="string">&quot;#000000&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintRight_toRightOf</span>=<span class="string">&quot;parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">&quot;parent&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>





<p>新建一个Placeholder约束在屏幕的左上角，新建一个TextView约束在屏幕的右上角，在Placeholder中设置 app:content&#x3D;”@+id&#x2F;textview”，这时TextView会跑到屏幕的左上角。效果如下：</p>
<p><img src="/images/layout/2787721-6406fe760390e2f8.webp" alt="img"></p>
<h4 id="4-5-Guideline"><a href="#4-5-Guideline" class="headerlink" title="4.5 Guideline"></a>4.5 Guideline</h4><p>Guildline像辅助线一样，在预览的时候帮助你完成布局（不会显示在界面上）。<br>Guildline的主要属性：<br>android:orientation 垂直vertical，水平horizontal<br>layout_constraintGuide_begin 开始位置<br>layout_constraintGuide_end 结束位置<br>layout_constraintGuide_percent 距离顶部的百分比(orientation &#x3D; horizontal时则为距离左边)<br>举个例子：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">android.support.constraint.Guideline</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/guideline1&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;horizontal&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintGuide_begin</span>=<span class="string">&quot;50dp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">android.support.constraint.Guideline</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/guideline2&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintGuide_percent</span>=<span class="string">&quot;0.5&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>guideline1为水平辅助线，开始位置是距离顶部50dp，guideline2位垂直辅助线，开始位置为屏幕宽的0.5(中点位置)，效果如下：</p>
<p><img src="/images/layout/2787721-870080d070c12e91.webp" alt="img"></p>
<p>其他文章：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/958887ed4f5f">https://www.jianshu.com/p/958887ed4f5f</a></p>
<h2 id="2、AppbarLayout控件"><a href="#2、AppbarLayout控件" class="headerlink" title="2、AppbarLayout控件"></a>2、AppbarLayout控件</h2><p>AppbarLayout是Material Design的一个控件,目的是为了实现一些酷炫到爆的效果,比如之前的折叠导航栏可以费劲心血的写出来,现在利用Appbarlayout非常容易的就可以实现出来,当然需要配合其他几个来控件实现。</p>
<h3 id="用法："><a href="#用法：" class="headerlink" title="用法："></a>用法：</h3><p>实现toolbar的收缩和扩展需要用到：</p>
<p><strong>CoordinatorLayout</strong>和<strong>AppbarLayout</strong>的配合, 以及实现了<strong>NestedScrollView</strong>的布局或控件.AppbarLayout是一种支持响应滚动手势的app bar布局, <strong>CollapsingToolbarLayout则是专门用来实现子布局内不同元素响应滚动细节的布局.</strong></p>
<p>与AppbarLayout组合的滚动布局(RecyclerView, NestedScrollView等),需要设置 app:layout_behavior &#x3D; “@string&#x2F;appbar_scrolling_view_behavior” .没有设置的话, AppbarLayout将不会响应滚动布局的滚动事件.</p>
<p>例如：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">android.support.design.widget.CoordinatorLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;com.truly.mytoolbar.MainActivity&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">android.support.design.widget.AppBarLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">android.support.v7.widget.Toolbar</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/toolbar&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;?attr/actionBarSize&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">&quot;?attr/colorPrimary&quot;</span></span></span><br><span class="line"><span class="tag">           <span class="attr">android:theme</span>=<span class="string">&quot;@style/ThemeOverlay.AppCompat.Dark.ActionBar&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:layout_scrollFlags</span>=<span class="string">&quot;scroll&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:popupTheme</span>=<span class="string">&quot;@style/ThemeOverlay.AppCompat.Light&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:title</span>=<span class="string">&quot;Title&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">android.support.design.widget.AppBarLayout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">android.support.v4.widget.NestedScrollView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_behavior</span>=<span class="string">&quot;@string/appbar_scrolling_view_behavior&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_margin</span>=<span class="string">&quot;16dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:lineSpacingMultiplier</span>=<span class="string">&quot;2&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;@string/textContent&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">android.support.v4.widget.NestedScrollView</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">android.support.design.widget.CoordinatorLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>先看下效果再来解释为什么.</p>
<p><img src="/images/layout/9833282-6152ff329ca415cc.webp" alt="img"></p>
<p>可以看到：</p>
<ul>
<li>随着文本往上滚动, 顶部的toolbar也往上滚动, 直到消失.</li>
<li>随着文本往下滚动, 一直滚到文本的第一行露出来, toolbar也逐渐露出来</li>
</ul>
<p><strong>解释:</strong><br>从上面的布局中可以看到, 其实在整个父布局CoordinatorLayout下面, 是有2个子布局</p>
<ul>
<li>AppbarLayout</li>
<li>NestedScrollView<br>NestedScrollView先放一放, 我们来看AppbarLayout.</li>
</ul>
<blockquote>
<p>AppBarLayout 继承自LinearLayout，布局方向为垂直方向。所以你可以把它当成垂直布局的LinearLayout来使用。AppBarLayout是在LinearLayou上加了一些材料设计的概念，它可以让你定制当某个可滚动View的滚动手势发生变化时，其内部的子View实现何种动作。</p>
</blockquote>
<p>【CoordinatorLayout允许behavior协调子view】</p>
<p><strong>注意:</strong></p>
<p>上面提到的”某个可滚动View”, 可以理解为某个ScrollView. 就是说，当某个ScrollView发生滚动时，你可以定制你的“顶部栏”应该执行哪些动作（如跟着一起滚动、保持不动等等）。</p>
<p>这里某个<code>ScrollView</code>就是<code>NestedScrollView</code>或者实现了NestedScrollView机制的其它控件, 如<code>RecyclerView</code>. 它有一个布局行为<code>Layout_Behavior:</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app:layout_behavior=<span class="string">&quot;@string/appbar_scrolling_view_behavior&quot;</span></span><br></pre></td></tr></table></figure>

<p>这是一个系统behavior, 从字面意思就可以看到, 是为<code>appbar</code>设置滚动动作的一个<code>behavior</code>. 没有这个属性的话, Appbar就是死的, 有了它就有了灵魂.</p>
<p>我们可以通过给Appbar下的子View添加<strong>app:layout_scrollFlags</strong>来设置各子View执行的动作. scrollFlags可以设置的动作如下:</p>
<blockquote>
<p>(1) scroll: 值设为scroll的View会跟随滚动事件一起发生移动。就是当指定的ScrollView发生滚动时，该View也跟随一起滚动，就好像这个View也是属于这个ScrollView一样。</p>
</blockquote>
<p>上面这个效果就是设置了scroll之后的.</p>
<blockquote>
<p>(2) enterAlways: 值设为enterAlways的View,当任何时候ScrollView往下滚动时，该View会直接往下滚动。而不用考虑ScrollView是否在滚动到最顶部还是哪里.</p>
</blockquote>
<p>我们把layout_scrollFlags改动如下:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app:layout_scrollFlags=<span class="string">&quot;scroll|enterAlways&quot;</span></span><br></pre></td></tr></table></figure>

<p>效果如下:</p>
<p><img src="/images/layout/9833282-5b52c0c52428e4b9.webp" alt="img"></p>
<blockquote>
<p>(3) exitUntilCollapsed：值设为exitUntilCollapsed的View，当这个View要往上逐渐“消逝”时，会一直往上滑动，直到剩下的的高度达到它的最小高度后，再响应ScrollView的内部滑动事件。</p>
</blockquote>
<p>怎么理解呢？简单解释：在ScrollView往上滑动时，首先是View把滑动事件“夺走”，由View去执行滑动，直到滑动最小高度后，把这个滑动事件“还”回去，让ScrollView内部去上滑。</p>
<p>把属性改下再看效果</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">android.support.v7.widget.Toolbar</span></span></span><br><span class="line"><span class="tag">    <span class="attr">...</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;?attr/actionBarSize&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:minHeight</span>=<span class="string">&quot;20dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_scrollFlags</span>=<span class="string">&quot;scroll|exitUntilCollapsed&quot;</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/images/layout/9833282-05a487d1047a720d.webp" alt="img"></p>
<blockquote>
<p>(4) enterAlwaysCollapsed：是enterAlways的附加选项，一般跟enterAlways一起使用，它是指，View在往下“出现”的时候，首先是enterAlways效果，当View的高度达到最小高度时，View就暂时不去往下滚动，直到ScrollView滑动到顶部不再滑动时，View再继续往下滑动，直到滑到View的顶部结束</p>
</blockquote>
<p>这个得把高度加大点才好实验. 来看:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;android.support.v7.widget.Toolbar</span><br><span class="line">    ...</span><br><span class="line">    android:layout_height=<span class="string">&quot;200dp&quot;</span></span><br><span class="line">    android:minHeight=<span class="string">&quot;?attr/actionBarSize&quot;</span></span><br><span class="line">    app:layout_scrollFlags=<span class="string">&quot;scroll|enterAlways|enterAlwaysCollapsed&quot;</span></span><br><span class="line">&lt;/android.support.design.widget.AppBarLayout&gt;</span><br></pre></td></tr></table></figure>



<p><img src="/images/layout/9833282-75f004f3fca8823e.webp" alt="img"></p>
<p><strong>Attention:</strong></p>
<p>其实toolbar的默认最小高度minHeight就是<code>&quot;?attr/actionBarSize&quot;</code> , 很多时候可以不用设置. 而且从图上可以看出, 其实这里有个缺陷, 就是title的位置和toolbar上的图标行脱离了, 即使在布局里添加了 <code>android:gravity=&quot;bottom|start&quot;</code>, 在toolbar滚动的时候, title还在, 图标滚动到隐藏了.</p>
<p><img src="/images/layout/9833282-b3f03f55932a8c8c.webp" alt="img"></p>
<p>后面讲解的<code>CollapsingToolbarLayout</code>可以解决这个问题, 这里先丢出来.</p>
<blockquote>
<p>(5) snap：简单理解，就是Child View滚动比例的一个吸附效果。也就是说，Child View不会存在局部显示的情况，滚动Child View的部分高度，当我们松开手指时，Child View要么向上全部滚出屏幕，要么向下全部滚进屏幕，有点类似ViewPager的左右滑动</p>
</blockquote>
<p><img src="/images/layout/9833282-f7f5ff4f8544353a.webp" alt="img"></p>
<h4 id="引入CollapsingToolbarLayout"><a href="#引入CollapsingToolbarLayout" class="headerlink" title="引入CollapsingToolbarLayout"></a><strong>引入CollapsingToolbarLayout</strong></h4><p>CollapsingToolbarLayout是用来对<code>Toolbar</code>进行再次包装的<code>ViewGroup</code>，主要是用于实现折叠（其实就是看起来像伸缩<del>）的App Bar效果。它需要放在<code>AppBarLayout</code>布局里面，并且作为<code>AppBarLayout</code>的直接子</del>。CollapsingToolbarLayout主要包括几个功能（参照了官方网站上内容，略加自己的理解进行解释）：</p>
<blockquote>
<p>(1) 折叠Title（Collapsing title）：当布局内容全部显示出来时，title是最大的，但是随着View逐步移出屏幕顶部，title变得越来越小。你可以通过调用setTitle方法来设置title。</p>
</blockquote>
<blockquote>
<p>(2)内容纱布（Content scrim）：根据滚动的位置是否到达一个阀值，来决定是否对View“盖上纱布”。可以通过setContentScrim(Drawable)来设置纱布的图片. 默认contentScrim是colorPrimary的色值</p>
</blockquote>
<blockquote>
<p>(3)状态栏纱布（Status bar scrim)：根据滚动位置是否到达一个阀值决定是否对状态栏“盖上纱布”，你可以通过setStatusBarScrim(Drawable)来设置纱布图片，但是只能在LOLLIPOP设备上面有作用。默认statusBarScrim是colorPrimaryDark的色值.</p>
</blockquote>
<blockquote>
<p>(4)视差滚动子View(Parallax scrolling children): 子View可以选择在当前的布局当时是否以“视差”的方式来跟随滚动。（PS:其实就是让这个View的滚动的速度比其他正常滚动的View速度稍微慢一点）。将布局参数app:layout_collapseMode设为parallax</p>
</blockquote>
<blockquote>
<p>(5)将子View位置固定(Pinned position children)：子View可以选择是否在全局空间上固定位置，这对于Toolbar来说非常有用，因为当布局在移动时，可以将Toolbar固定位置而不受移动的影响。 将app:layout_collapseMode设为pin。</p>
</blockquote>
<p>我们来更改一下布局:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">android.support.design.widget.CoordinatorLayout</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">...</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">android.support.design.widget.AppBarLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;150dp&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">android.support.design.widget.CollapsingToolbarLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/collapsing_toolbar_layout&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:theme</span>=<span class="string">&quot;@style/ThemeOverlay.AppCompat.Dark.ActionBar&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:layout_scrollFlags</span>=<span class="string">&quot;scroll|exitUntilCollapsed&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">android.support.v7.widget.Toolbar</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/toolbar&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;?attr/actionBarSize&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:background</span>=<span class="string">&quot;?attr/colorPrimary&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_collapseMode</span>=<span class="string">&quot;parallax&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:popupTheme</span>=<span class="string">&quot;@style/ThemeOverlay.AppCompat.Light&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:title</span>=<span class="string">&quot;Title&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">android.support.design.widget.CollapsingToolbarLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">android.support.design.widget.AppBarLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">android.support.v4.widget.NestedScrollView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_behavior</span>=<span class="string">&quot;@string/appbar_scrolling_view_behavior&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_margin</span>=<span class="string">&quot;16dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:lineSpacingMultiplier</span>=<span class="string">&quot;2&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;@string/textContent&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">android.support.v4.widget.NestedScrollView</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">android.support.design.widget.CoordinatorLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>可以看到, 我们把原本属于toolbar的几个属性移到了CollapsingToolbarLayout上. 分别是:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">android:theme=&quot;@style/ThemeOverlay.AppCompat.Dark.ActionBar&quot;</span><br><span class="line">app:layout_scrollFlags=&quot;scroll|exitUntilCollapsed&quot;</span><br></pre></td></tr></table></figure>

<p>同时给toolbar增加了一个折叠模式属性</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app:layout_collapseMode=&quot;parallax&quot;</span><br></pre></td></tr></table></figure>

<p>我们来看下效果:</p>
<p><img src="/images/layout/9833282-8a6b4005bf634f9e.webp" alt="img"></p>
<p>嗯嗯, 折叠模式不对, toolbar的顶部图标没了. 我们改下折叠模式:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app:layout_collapseMode=&quot;pin&quot;</span><br></pre></td></tr></table></figure>

<p>再看效果:</p>
<p><img src="/images/layout/9833282-9bbdb99625649263.webp" alt="img"></p>
<p>我们把scrollFlags属性改下, 看下对比:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app:layout_scrollFlags=&quot;scroll|enterAlways|enterAlwaysCollapsed&quot;</span><br></pre></td></tr></table></figure>



<p><img src="/images/layout/9833282-1d3dab9afc7a84b2.webp" alt="img"></p>
<p>效果还是蛮不错的, 有了点Google Material Design的感觉了.</p>
<p>上面说CollapsingToolbarLayout是个ViewGroup, 那么肯定还可以添加控件. 那么我们在里面添加一个ImageView来看看. 更改布局如下:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">android.support.design.widget.CoordinatorLayout</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">...</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">android.support.design.widget.AppBarLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;200dp&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">android.support.design.widget.CollapsingToolbarLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">...</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:theme</span>=<span class="string">&quot;@style/ThemeOverlay.AppCompat.Dark.ActionBar&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:layout_scrollFlags</span>=<span class="string">&quot;scroll|enterAlways|enterAlwaysCollapsed&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:scaleType</span>=<span class="string">&quot;centerCrop&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:src</span>=<span class="string">&quot;@drawable/darkbg&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_collapseMode</span>=<span class="string">&quot;parallax&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">android.support.v7.widget.Toolbar</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/toolbar&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;?attr/actionBarSize&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:background</span>=<span class="string">&quot;?attr/colorPrimary&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_collapseMode</span>=<span class="string">&quot;pin&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:popupTheme</span>=<span class="string">&quot;@style/ThemeOverlay.AppCompat.Light&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:title</span>=<span class="string">&quot;Title&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">android.support.design.widget.CollapsingToolbarLayout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">android.support.design.widget.AppBarLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">android.support.v4.widget.NestedScrollView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">...</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_behavior</span>=<span class="string">&quot;@string/appbar_scrolling_view_behavior&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">...</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">android.support.v4.widget.NestedScrollView</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">android.support.design.widget.CoordinatorLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>来看下效果:</p>
<p><img src="/images/layout/9833282-41f0884a89f987e5.webp" alt="img"></p>
<p>嗯, 有了点意思, 但不美观, 上部的toolbar和图片不协调. toolbar应该有默认的背景属性, 我们去掉它看看.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">android.support.v7.widget.Toolbar</span></span></span><br><span class="line"><span class="tag">   <span class="attr">android:id</span>=<span class="string">&quot;@+id/toolbar&quot;</span></span></span><br><span class="line"><span class="tag">   <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">   <span class="attr">android:layout_height</span>=<span class="string">&quot;?attr/actionBarSize&quot;</span></span></span><br><span class="line"><span class="tag">   <span class="attr">app:layout_collapseMode</span>=<span class="string">&quot;pin&quot;</span></span></span><br><span class="line"><span class="tag">   <span class="attr">app:popupTheme</span>=<span class="string">&quot;@style/ThemeOverlay.AppCompat.Light&quot;</span></span></span><br><span class="line"><span class="tag">   <span class="attr">app:title</span>=<span class="string">&quot;Title&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>再看下效果:</p>
<p><img src="/images/layout/9833282-978faef12c54cb33.webp" alt="img"></p>
<p>这次真的不错哦, 已经和很多大公司的app相像了. 但是为什么去掉toolbar的<code>background</code>就可以得到透明背景呢? 说句实话, 没找到原因.</p>
<p>不过我们没有给CollapsingToolbarLayout设置<code>contentScrim</code>属性哦, 给它加个属性看看.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">android.support.design.widget.CollapsingToolbarLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">...</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:contentScrim</span>=<span class="string">&quot;?attr/colorPrimary&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">...</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><img src="/images/layout/9833282-5629801b3986aaba.webp" alt="img"></p>
<p>嗯嗯, 好像还不如没设置这个属性好呢.</p>
<p><strong>什么时候需要contentScrim属性呢?</strong><br>因为这个布局里面给CollapsingToolbarLayout的<code>layout_scrollFlags</code>设置的是 <code>&quot;scroll|enterAlways|enterAlwaysCollapsed&quot;</code> , toolbar会全部消失的, 所以感觉不是很美观. 如果将layout_scrollFlags属性改为 “scroll|exitUntilCollapsed” , 效果会好点, 适合toolbar还是需要展示的场合.</p>
<p><img src="/images/layout/9833282-808dbc8a8700bbfd.webp" alt="img"></p>
<p>不管怎么样, 先去掉contentScrim属性吧.</p>
<p>目前有很多APP比较喜欢采用沉浸式设计, 简单点说就是将状态栏和导航栏都设置成透明或半透明的.</p>
<p>我们来把状态栏statusBar设置成透明. 在style主题中的AppTheme里增加一条:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">&quot;AppTheme&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;Theme.AppCompat.Light.NoActionBar&quot;</span>&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    ...</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:statusBarColor&quot;</span>&gt;</span>@android:color/transparent<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在布局里面, 将ImageView和所有它上面的父View都添加fitsSystemWindows属性.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">android.support.design.widget.CoordinatorLayout</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">...</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:fitsSystemWindows</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">android.support.design.widget.AppBarLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">...</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:fitsSystemWindows</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">android.support.design.widget.CollapsingToolbarLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">...</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:fitsSystemWindows</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">...</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:fitsSystemWindows</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">android.support.v7.widget.Toolbar</span></span></span><br><span class="line"><span class="tag">                <span class="attr">...</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">android.support.design.widget.CollapsingToolbarLayout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">android.support.design.widget.AppBarLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">android.support.v4.widget.NestedScrollView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">...</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">...</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">android.support.v4.widget.NestedScrollView</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">android.support.design.widget.CoordinatorLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>最后来看下效果:</p>
<p><img src="/images/layout/9833282-05ffff7d8bdcfcd7.webp" alt="img"></p>
<p>其实还可以在CollapsingToolbarLayout里设置statusBarScrim为透明色, 不过有点问题, 最顶部的toolbar没有完全隐藏, 还留了一点尾巴.</p>
<p><img src="/images/layout/9833282-0fa9ac2a9a132302.webp" alt="img"></p>
<p>难道就这个属性就没用吗? 我们把layout_scrollFlags改成 “scroll|exitUntilCollapsed” 看看:</p>
<p><img src="/images/layout/9833282-7ccc6dd333860f34.webp" alt="img"></p>
<p>这个时候toolbar不用隐藏, 所以还是美美的.</p>
<p>AppbarLayout整个做成沉浸式之后, 状态栏的图标可能会受到封面图片颜色过浅的影响, 可以给其加一个渐变的不透明层.</p>
<p><strong>渐变遮罩</strong>设置方法:</p>
<p>在res&#x2F;drawable文件夹下新建一个名为status_gradient的xml资源文件, 代码如下:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">shape</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">gradient</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:angle</span>=<span class="string">&quot;270&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:endColor</span>=<span class="string">&quot;@android:color/transparent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:startColor</span>=<span class="string">&quot;#CC000000&quot;</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- shape节点中, 可以通过android:shape来设置形状, 默认是矩形.</span></span><br><span class="line"><span class="comment">        gradient节点中angle的值270是从上到下，0是从左到右，90是从下到上。 </span></span><br><span class="line"><span class="comment">        此处的效果就是从下向上, 颜色逐渐由纯透明慢慢变成黑透色--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>布局中, 在ImageView下面增加一个View, 背景设为上面的渐变遮罩.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 在顶部增加一个渐变遮罩, 防止出现status bar 状态栏看不清 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">View</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;40dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">&quot;@drawable/status_gradient&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_collapseMode</span>=<span class="string">&quot;pin&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:fitsSystemWindows</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>给遮罩设置折叠模式: app:layout_collapseMode&#x3D;”pin” , 折叠到顶部后定住. 来看下效果.</p>
<p><img src="/images/layout/9833282-4c9ce9254313d319.webp" alt="img"></p>
<p><img src="/images/layout/9833282-69db4f6edee4151e.webp" alt="img"></p>
<p>上图是展开状态的对比, 后面的是没有添加遮罩的效果, 前面是添加了遮罩的效果. 下图是添加了遮罩折叠后的效果. 有点黑暗系影片的感觉哦.</p>
<h4 id="FloatingActionButton再次表演"><a href="#FloatingActionButton再次表演" class="headerlink" title="FloatingActionButton再次表演"></a><strong>FloatingActionButton再次表演</strong></h4><p>作为Google Material Design的一个重要控件, <code>FloatingActionButton</code>怎么可能不在AppbarLayout中起点作用呢. 我们在布局中加一个悬浮按钮, 让它的锚点挂载Appbar的右下角. 这样这个悬浮按钮就和Appbar关联起来了.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">android.support.design.widget.CoordinatorLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">...</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">android.support.design.widget.AppBarLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">...</span></span></span><br><span class="line"><span class="tag">    &lt;/<span class="attr">android.support.design.widget.AppBarLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">android.support.v4.widget.NestedScrollView</span></span></span><br><span class="line"><span class="tag">    <span class="attr">...</span></span></span><br><span class="line"><span class="tag">    &lt;/<span class="attr">android.support.v4.widget.NestedScrollView</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">android.support.design.widget.FloatingActionButton</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/fab&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_margin</span>=<span class="string">&quot;16dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:src</span>=<span class="string">&quot;@drawable/ic_share_white_24dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:elevation</span>=<span class="string">&quot;4dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:pressedTranslationZ</span>=<span class="string">&quot;16dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:rippleColor</span>=<span class="string">&quot;@android:color/white&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_anchor</span>=<span class="string">&quot;@id/appbar&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_anchorGravity</span>=<span class="string">&quot;bottom|end&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">android.support.design.widget.CoordinatorLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>我们来看下效果.</p>
<p><img src="/images/layout/9833282-1c4e2bdcb9373c3b.webp" alt="img"></p>
<p>好吧, 美美的Toolbar完成了, 有点Google Material Design扑面而来的感觉了</p>
<p>使用FloatingActionButton其实非常简单只需要在布局文件中引入控件即可，不过它的属性有点多，我们先来介绍一下它的属性。</p>
<ul>
<li>android:src：FAB中显示的图标.</li>
<li>app:backgroundTint：正常的背景颜色 ，这里是ColorStateList类型</li>
<li>app:rippleColor：按下时的背景颜色</li>
<li>app:elevation：正常的阴影大小</li>
<li>app:pressedTranslationZ：按下时的阴影大小</li>
<li>app:layout_anchor：设置FAB的锚点，即以哪个控件为参照设置位置</li>
<li>app:layout_anchorGravity：FAB相对于锚点的位置</li>
<li>app:fabSize：FAB的大小，normal或mini（分别对应56dp和40dp）</li>
<li>app:borderWidth：边框大小，最好设置成0dp否则会有边框</li>
<li>android:clickable：一定要设置成true否则没有点击效果</li>
</ul>
<h4 id="其他方法介绍"><a href="#其他方法介绍" class="headerlink" title="其他方法介绍"></a>其他方法介绍</h4><blockquote>
<p><strong>addOnOffsetChangedListener</strong>当AppbarLayout 的偏移发生改变的时候回调，也就是子View滑动。</p>
<p><strong>getTotalScrollRange</strong>返回AppbarLayout 所有子View的滑动范围</p>
<p><strong>removeOnOffsetChangedListener</strong>移除监听器</p>
<p>**setExpanded (boolean expanded,  boolean animate)**设置AppbarLayout 是展开状态还是折叠状态，animate 参数控制切换到新的状态时是否需要动画</p>
<p>**setExpanded (boolean expanded)**设置AppbarLayout 是展开状态还是折叠状态,默认有动画</p>
</blockquote>
<p><strong>但看解释好像不明白，我们详细来看一下这几个方法</strong></p>
<p><strong>1，addOnOffsetChangedListener</strong></p>
<p>这是官方的解释，其实很明白了</p>
<blockquote>
<p><strong>Called when theAppBarLayout’s layout offset has been changed. This allows child views to implement custom behavior based on the offset (for instance pinning a view at a certain y value).</strong></p>
<p>在<a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=http://mydroidapi.tk/reference/android/support/design/widget/AppBarLayout.html">AppBarLayout</a>的布局偏移量发生改变时被调用。这个方法允许子view根据偏移量实现自定义的行为（比如在特定Y值的时候固定住一个View）</p>
</blockquote>
<p>下面来举个例子来看一下这个方法能作甚们</p>
<p>如图我们搞一个这个样子的布局</p>
<p>布局：</p>
<p><img src="/images/layout/9101961-0fc70d37cc580a8e.webp" alt="img"></p>
<p>java代码：</p>
<p><img src="/images/layout/9101961-ddf0414d983a9deb.webp" alt="img"></p>
<p>日志：</p>
<p><img src="/images/layout/9101961-2a4a4ba3c11c3500.webp" alt="img"></p>
<p>​        可见当appbarlayout最大的时候偏移量为0，网上滑动的时候，偏移量向负数方向增大，下面是效果图，只是展示了可以做的一些事情，实际项目中可以根据偏移量随意操作，比如可以做个透明度的动画等等</p>
<p>效果图：</p>
<p><img src="/images/layout/9101961-f9dd5f0e84910cc3.webp" alt="img"></p>
<p><strong>2，getTotalScrollRange，这个方法返货的是一个滑动的范围，也可以理解为党appbarlayout滑动到最小值时候的一个值得绝对值，这个值是不变的，是以appbarlayout为基础的其所有子view的一个范围值，如下，我们在addOnOffsetChangedListener方法中加入以下代码，然后滑动得到的值全都是288。有这个方法，我们可以在addOnOffsetChangedListener方法中做什么事情之前做一个精准的判断。</strong></p>
<p><img src="/images/layout/9101961-2c3362b138b185c0.webp" alt="img"></p>
<p><img src="/images/layout/9101961-9bd9a7c4a8c6c29b.webp" alt="img"></p>
<p><strong>3，removeOnOffsetChangedListener  ，移除监听器，这个没什么好说的，移除掉偏移量监听，某些情况下，你可能需要根据偏移量做些神门事情，但是某些情况下，你有不想做神门，所以只好把他移除掉。</strong></p>
<p><strong>4，setExpanded (boolean expanded, boolean animate)设置AppbarLayout 是展开状态还是折叠状态，animate 参数控制切换到新的状态时是否需要动画</strong></p>
<p><strong>setExpanded (boolean expanded)设置AppbarLayout 是展开状态还是折叠状态,默认有动画</strong></p>
<p>这俩个方法，就像他的解释一样</p>
<p><img src="/images/layout/9101961-fffc6d34f559cc7e.webp" alt="img"></p>
<p>false为关闭状态，true为展开状态</p>
<p>打开时的状态：</p>
<p><img src="/images/layout/9101961-daa5251bb7b1b86c.webp" alt="img"></p>
<h4 id="CollapsingToolbarLayout"><a href="#CollapsingToolbarLayout" class="headerlink" title="CollapsingToolbarLayout"></a>CollapsingToolbarLayout</h4><p><strong>CollapsingToolbarLayout是对子view的包装,并且实现了折叠app bar效果，使用时，要作为 AppbarLayout 的直接子View。</strong></p>
<p><strong>1,Collapsing title(折叠标题)当布局全部可见的时候，title 是最大的，当布局开始滑出屏幕，title 将变得越来越小，你可以通过setTitle（CharSequence） 来设置要显示的标题。</strong></p>
<blockquote>
<p>注意：Toolbar 和CollapsingToolbarLayout 同时设置了title时，不会显示Toolbartitle而是显示CollapsingToolbarLayout 的title，如果要显示Toolbar 的title，你可一在代码中添加如下代码：</p>
<p>collapsingToolbarLayout.setTitle(“”)</p>
<p>注意:你得给CollapsingToolbarLayout设置一个值,你来个wrap_parent是不起作用的,或者你把toolbar设置一个值来撑大CollapsingToolbarLayout也是不可以的</p>
</blockquote>
<p>布局：</p>
<p><img src="/images/layout/9101961-1f1a292291af1bd5.webp" alt="img"></p>
<p>效果图：</p>
<p><img src="/images/layout/9101961-20d000180c25cb87.webp" alt="img"></p>
<p><strong>2,Content scrim(内容纱布)当CollapsingToolbarLayout滑动到一个确定的阀值时将显示或者隐藏内容纱布，可以通过setContentScrim(Drawable)来设置纱布的图片。</strong></p>
<p>布局：</p>
<p><img src="/images/layout/9101961-8bbc486ac75b819b.webp" alt="img"></p>
<p>效果图：</p>
<p><img src="/images/layout/9101961-ead6aefd11a5aa08.webp" alt="img"></p>
<p><strong>3,Status bar scrim（状态栏纱布）当CollapsingToolbarLayout滑动到一个确定的阀值时，状态栏显示或隐藏纱布，你可以通过setStatusBarScrim(Drawable)来设置纱布图片。</strong></p>
<p><strong>4,Pinned position children（固定子View的位置）子View可以固定在全局空间内，这对于实现了折叠并且允许通过滚动布局来固定Toolbar 这种情况非常有用。在xml 中将collapseMode设为pin</strong></p>
<p>布局：</p>
<p><img src="/images/layout/9101961-837ade3cd71a4983.webp" alt="img"></p>
<p>效果图：</p>
<p><img src="/images/layout/9101961-b69f7cc343302025.webp" alt="img"></p>
<p><strong>5,Parallax scrolling children（有视差地滚动子View）让CollapsingToolbarLayout 的子View 可以有视差的滚动，需要在xml中用 添加如下代码：</strong></p>
<p><strong>app:layout_collapseMode&#x3D;”parallax”</strong></p>
<blockquote>
<p>注意:app:layout_collapseParallaxMultiplier&#x3D;”0.7” 这个参数是设置视差范围的,0-1,越大视差越大</p>
</blockquote>
<p>布局：</p>
<p><img src="/images/layout/9101961-260529f1215da352.webp" alt="img"></p>
<p>效果图:</p>
<p><img src="/images/layout/9101961-6933445fdad7334b.webp" alt="img"></p>
<p>​        以上就是appbarlayout的全部特点,在项目中使用几次就会了,各种scrollFlag与CollapsingToolbarLayout的搭配使用,可以做出很多非常酷炫的效果,基本满足各种需求,<strong>如果设计师太鬼畜,那么打她,打她,打她!!!!!!!  打不过?请用behavior,behavior,.behavior!!!</strong></p>
<h2 id="3、DrawerLayout抽屉布局"><a href="#3、DrawerLayout抽屉布局" class="headerlink" title="3、DrawerLayout抽屉布局"></a>3、DrawerLayout抽屉布局</h2><p>参照：<a target="_blank" rel="noopener" href="https://blog.csdn.net/crazy1235/article/details/41696291">https://blog.csdn.net/crazy1235/article/details/41696291</a></p>
<h3 id="1、介绍-1"><a href="#1、介绍-1" class="headerlink" title="1、介绍"></a>1、介绍</h3><p>导航抽屉显示在屏幕的最左侧，默认情况下是隐藏的，当用户用手指从边缘向另一个滑动的时候，会出现一个隐藏的面板，当点击面板外部或者向原来的方向滑动的时候，抽屉导航就会消失了！<br>好了，这个抽屉就是DrawerLayout，该类位于V4包中。<br><code>android.support.v4.widget.DrawerLayout.</code></p>
<h3 id="2、使用"><a href="#2、使用" class="headerlink" title="2、使用"></a>2、使用</h3><blockquote>
<p>抽屉导航的实现步骤非常简单。只要配置好带有抽屉导航的布局就可以实现简单的策划菜单。布局代码如下：</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">android.support.v4.widget.DrawerLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/id_drawerlayout&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">FrameLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/id_framelayout&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/id_btn1&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;1111&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">FrameLayout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/id_drawer&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;240dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_gravity</span>=<span class="string">&quot;start&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;#E0EEE0&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span> &gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ListView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/id_lv&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:divider</span>=<span class="string">&quot;#CD853F&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:dividerHeight</span>=<span class="string">&quot;2dp&quot;</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ListView</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">android.support.v4.widget.DrawerLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>说明：</strong></p>
<ol>
<li>必须把DrawerLayout作为布局的跟标签。</li>
<li>然后在跟标签中添加一个包含内容的视图，就是当抽屉完全隐藏的时候显示的内容布局。</li>
<li>添加一个抽屉布局，这个布局可以按照需求自己定义，我的demo中是一个listview。</li>
<li>抽屉布局中，需要指定<code>android:layout_gravity</code>属性，官方说明是用start代替left。不过我试了一下start和left，right和end的效果是一样的。知道是什么区别？（谁知道，请留言告知一下！谢谢！）</li>
<li>抽屉布局的宽度最好不要超过320dp，这样做为了当抽屉完全显示的时候，不至于把内容布局全部遮挡。</li>
</ol>
<p>好了，此时在你的activity中设置一下布局文件，就可以实现一个简单的侧滑菜单了，不过菜单是在上面的。</p>
<p><img src="/images/layout/1417661107_1898.gif" alt="img"></p>
<p><strong>初始化listview</strong></p>
<p>接下来，就要初始化listview了。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mLv = (ListView) findViewById(R.id.id_lv);</span><br><span class="line">		str = <span class="keyword">new</span> <span class="title class_">String</span>[] &#123; <span class="string">&quot;item1&quot;</span>, <span class="string">&quot;item2&quot;</span>, <span class="string">&quot;item3&quot;</span>&#125;;</span><br><span class="line">		ArrayAdapter&lt;String&gt; adapter = <span class="keyword">new</span> <span class="title class_">ArrayAdapter</span>&lt;String&gt;(<span class="built_in">this</span>,</span><br><span class="line">				android.R.layout.simple_list_item_1, str);</span><br><span class="line">		mLv.setAdapter(adapter);</span><br><span class="line">		mLv.setOnItemClickListener(<span class="built_in">this</span>);</span><br></pre></td></tr></table></figure>

<p>下面，<strong>设置抽屉导航的监听事件。添加监听器的时候有三种方式</strong>。</p>
<p>1、设置DrawerLayout.DrawerListener作为监听器类,里面包含四个回调函数。</p>
<p>代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">mDrawerLayout.setDrawerListener(<span class="keyword">new</span> <span class="title class_">DrawerListener</span>() &#123;</span><br><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment">		 * 当抽屉滑动状态改变的时候被调用</span></span><br><span class="line"><span class="comment">		 * 状态值是STATE_IDLE（闲置--0）, STATE_DRAGGING（拖拽的--1）, STATE_SETTLING（固定--2）中之一。</span></span><br><span class="line"><span class="comment">		 * 抽屉打开的时候，点击抽屉，drawer的状态就会变成STATE_DRAGGING，然后变成STATE_IDLE</span></span><br><span class="line"><span class="comment">		*/</span></span><br><span class="line">		<span class="meta">@Override</span></span><br><span class="line">		<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDrawerStateChanged</span><span class="params">(<span class="type">int</span> arg0)</span> &#123;</span><br><span class="line">			Log.i(<span class="string">&quot;drawer&quot;</span>, <span class="string">&quot;drawer的状态：&quot;</span> + arg0);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment">		 * 当抽屉被滑动的时候调用此方法</span></span><br><span class="line"><span class="comment">		 * arg1 表示 滑动的幅度（0-1）</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		<span class="meta">@Override</span></span><br><span class="line">		<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDrawerSlide</span><span class="params">(View arg0, <span class="type">float</span> arg1)</span> &#123;</span><br><span class="line">			Log.i(<span class="string">&quot;drawer&quot;</span>, arg1 + <span class="string">&quot;&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment">		 * 当一个抽屉被完全打开的时候被调用</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		<span class="meta">@Override</span></span><br><span class="line">		<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDrawerOpened</span><span class="params">(View arg0)</span> &#123;</span><br><span class="line">			Log.i(<span class="string">&quot;drawer&quot;</span>, <span class="string">&quot;抽屉被完全打开了！&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment">		 * 当一个抽屉完全关闭的时候调用此方法</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		<span class="meta">@Override</span></span><br><span class="line">		<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDrawerClosed</span><span class="params">(View arg0)</span> &#123;</span><br><span class="line">			Log.i(<span class="string">&quot;drawer&quot;</span>, <span class="string">&quot;抽屉被完全关闭了！&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;);</span><br></pre></td></tr></table></figure>

<p>2、设置DrawerListener的子类SimpleDrawerListener，使用这个类的时候不必实现全部的回调函数，可以根据自己的需要重写相应的方法。</p>
<p>代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mDrawerLayout.setDrawerListener(<span class="keyword">new</span> <span class="title class_">DrawerLayout</span>.SimpleDrawerListener() &#123;</span><br><span class="line">			<span class="meta">@Override</span></span><br><span class="line">			<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDrawerClosed</span><span class="params">(View drawerView)</span> &#123;</span><br><span class="line">				<span class="built_in">super</span>.onDrawerClosed(drawerView);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="meta">@Override</span></span><br><span class="line">			<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDrawerOpened</span><span class="params">(View drawerView)</span> &#123;</span><br><span class="line">				<span class="built_in">super</span>.onDrawerOpened(drawerView);</span><br><span class="line">			&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>3、使用DrawerListener的子类ActionBarDrawerToggle。一般与ActionBar结合使用。</p>
<p>代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mDrawerToggle = <span class="keyword">new</span> <span class="title class_">ActionBarDrawerToggle</span>(<span class="built_in">this</span>, mDrawerLayout,</span><br><span class="line">				R.drawable.ic_drawer, R.string.drawer_open,</span><br><span class="line">				R.string.drawer_close) &#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDrawerClosed</span><span class="params">(View drawerView)</span> &#123;</span><br><span class="line">	getActionBar().setTitle(mTitle);</span><br><span class="line">	invalidateOptionsMenu();</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDrawerOpened</span><span class="params">(View drawerView)</span> &#123;</span><br><span class="line">	getActionBar().setTitle(mDrawerTitle);</span><br><span class="line">	invalidateOptionsMenu();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line">mDrawerLayout.setDrawerListener(mDrawerToggle);</span><br></pre></td></tr></table></figure>

<h3 id="DrawerLayout和NavigationView使用（重点）"><a href="#DrawerLayout和NavigationView使用（重点）" class="headerlink" title="DrawerLayout和NavigationView使用（重点）"></a>DrawerLayout和NavigationView使用（重点）</h3><h4 id="（一）基本使用"><a href="#（一）基本使用" class="headerlink" title="（一）基本使用"></a>（一）基本使用</h4><p>DrawerLayout界面</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">android.support.v4.widget.DrawerLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/drawer_layout&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:fitsSystemWindows</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:openDrawer</span>=<span class="string">&quot;start&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span></span></span><br><span class="line"><span class="tag">        <span class="attr">layout</span>=<span class="string">&quot;@layout/app_bar_drawer_layout__one&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">android.support.design.widget.NavigationView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/nav_view&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_gravity</span>=<span class="string">&quot;start&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:fitsSystemWindows</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:headerLayout</span>=<span class="string">&quot;@layout/nav_header_drawer_layout__one&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:menu</span>=<span class="string">&quot;@menu/activity_drawer_layout__one_drawer&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">android.support.v4.widget.DrawerLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>可以看到我们的最外层是DrawerLayout，包含了两个内容：<code>include</code>为显示内容区域，<code>NavigationView</code>为侧边抽屉栏。</p>
<p>NavigationView有两个app属性，分别为<code>app:headerLayout</code>和<code>app:menu</code>，headerLayout用于显示头部的布局（可选），menu用于建立MenuItem选项的菜单。</p>
<p>headerLayout就是正常的layout布局文件,我们查看下menu.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">menu</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">group</span> <span class="attr">android:checkableBehavior</span>=<span class="string">&quot;single&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/nav_camera&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:icon</span>=<span class="string">&quot;@drawable/ic_menu_camera&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:title</span>=<span class="string">&quot;Import&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/nav_gallery&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:icon</span>=<span class="string">&quot;@drawable/ic_menu_gallery&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:title</span>=<span class="string">&quot;Gallery&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/nav_slideshow&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:icon</span>=<span class="string">&quot;@drawable/ic_menu_slideshow&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:title</span>=<span class="string">&quot;Slideshow&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">item</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/nav_manage&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:icon</span>=<span class="string">&quot;@drawable/ic_menu_manage&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:title</span>=<span class="string">&quot;Tools&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">group</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:title</span>=<span class="string">&quot;Communicate&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">menu</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">item</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/nav_share&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:icon</span>=<span class="string">&quot;@drawable/ic_menu_share&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:title</span>=<span class="string">&quot;Share&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">item</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">&quot;@+id/nav_send&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:icon</span>=<span class="string">&quot;@drawable/ic_menu_send&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:title</span>=<span class="string">&quot;Send&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">menu</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">menu</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>menu可以分组，group的android:checkableBehavior属性设置为single可以设置该组为单选</p>
<p>Activity主题必须设置先这两个属性</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">&quot;AppTheme.NoActionBar&quot;</span>&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;windowActionBar&quot;</span>&gt;</span>false<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;windowNoTitle&quot;</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>未设置Activity主题会爆出错误信息:</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vCaused <span class="keyword">by</span>: java.lang.IllegalStateException: This Activity </span><br><span class="line">already has an action bar supplied <span class="keyword">by</span> the window decor. </span><br><span class="line">Do <span class="keyword">not</span> request Window.FEATURE_SUPPORT_ACTION_BAR </span><br><span class="line"><span class="keyword">and</span> <span class="keyword">set</span> windowActionBar to <span class="literal">false</span> <span class="keyword">in</span> your theme to use a Toolbar instead.</span><br></pre></td></tr></table></figure>

<p>设置主题为android:theme&#x3D;”@style&#x2F;AppTheme.NoActionBar”</p>
<p>效果图：</p>
<p><img src="/images/layout/3485428-f448bae6615efa4c.webp" alt="img"></p>
<h4 id="二-、监听和关闭NavigationView"><a href="#二-、监听和关闭NavigationView" class="headerlink" title="(二)、监听和关闭NavigationView"></a>(二)、监听和关闭NavigationView</h4><p>NavigationView监听通过navigationView.setNavigationItemSelectedListener(this)方法去监听menu的点击事件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SuppressWarnings(&quot;StatementWithEmptyBody&quot;)</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onNavigationItemSelected</span><span class="params">(MenuItem item)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Handle navigation view item clicks here.</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> item.getItemId();</span><br><span class="line">    <span class="type">DrawerLayout</span> <span class="variable">drawer</span> <span class="operator">=</span> (DrawerLayout) findViewById(R.id.drawer_layout);</span><br><span class="line">    drawer.closeDrawer(GravityCompat.START);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>每次点击一个Menu关闭DrawerLayout，方法为drawer.closeDrawer(GravityCompat.START);</p>
<p>通过onBackPressed方法,当点击返回按钮的时候,如果DrawerLayout是打开状态则关闭</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onBackPressed</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">DrawerLayout</span> <span class="variable">drawer</span> <span class="operator">=</span> (DrawerLayout) findViewById(R.id.drawer_layout);</span><br><span class="line">    <span class="keyword">if</span> (drawer.isDrawerOpen(GravityCompat.START)) &#123;</span><br><span class="line">        drawer.closeDrawer(GravityCompat.START);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onBackPressed();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="（三）、NavigationView在Toolbar下方"><a href="#（三）、NavigationView在Toolbar下方" class="headerlink" title="（三）、NavigationView在Toolbar下方"></a>（三）、NavigationView在Toolbar下方</h4><p>大多数的APP都是使用NavigationView都是全屏的，当我们想让NavigationView在Toolbar下方的时候应该怎么做呢<br>xml布局如下图，DrawerLayout在Toolbar的下方</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">android:id</span>=<span class="string">&quot;@+id/sample_main_layout&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">android.support.v7.widget.Toolbar</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/toolbar&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;?attr/actionBarSize&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;?attr/colorPrimary&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:theme</span>=<span class="string">&quot;@style/ThemeOverlay.AppCompat.Dark&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">android.support.v4.widget.DrawerLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/drawer_layout&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">FrameLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/container&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span> &gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:padding</span>=<span class="string">&quot;16dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;NavigationView在Toolbar下方&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">FrameLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">android.support.design.widget.NavigationView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/nav_view&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_gravity</span>=<span class="string">&quot;start&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:fitsSystemWindows</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:headerLayout</span>=<span class="string">&quot;@layout/nav_header_drawer_layout_one&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:menu</span>=<span class="string">&quot;@menu/activity_drawer_layout_one_drawer&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">android.support.v4.widget.DrawerLayout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>效果如图:</p>
<p><img src="/images/layout/3485428-fb9b326a661904ab.webp" alt="img"></p>
<p>NavigationView在Toolbar下方.gif</p>
<h4 id="（四）、Toolbar上不显示Home旋转开关按钮"><a href="#（四）、Toolbar上不显示Home旋转开关按钮" class="headerlink" title="（四）、Toolbar上不显示Home旋转开关按钮"></a>（四）、Toolbar上不显示Home旋转开关按钮</h4><p>上图可以看到我们点击Home旋转开关按钮,显示和隐藏了侧滑菜单。那么如果我们想要不通过按钮点击,只能右划拉出菜单需要怎么做呢。<br>我们先看下带Home旋转开关按钮的代码是如何写的：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">DrawerLayout</span> <span class="variable">drawer</span> <span class="operator">=</span> (DrawerLayout) findViewById(R.id.drawer_layout);</span><br><span class="line"><span class="comment">//这是带Home旋转开关按钮</span></span><br><span class="line"><span class="type">ActionBarDrawerToggle</span> <span class="variable">toggle</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ActionBarDrawerToggle</span>(<span class="built_in">this</span>, drawer, </span><br><span class="line">    toolbar, </span><br><span class="line">    R.string.navigation_drawer_open, R.string.navigation_drawer_close);</span><br><span class="line">drawer.setDrawerListener(toggle);</span><br><span class="line">toggle.syncState();</span><br></pre></td></tr></table></figure>

<p>这个Home旋转开关按钮实际上是通过ActionBarDrawerToggle代码绑定到toolbar上的，ActionBarDrawerToggle是和DrawerLayout搭配使用的，它可以改变android.R.id.home返回图标，监听drawer的显示和隐藏。ActionBarDrawerToggle的syncState()方法会和Toolbar关联，将图标放入到Toolbar上。<br>进入ActionBarDrawerToggle构造器可以看到一个不传Toolbar参数的构造器</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">ActionBarDrawerToggle</span><span class="params">(Activity activity, DrawerLayout drawerLayout,</span></span><br><span class="line"><span class="params">        <span class="meta">@StringRes</span> <span class="type">int</span> openDrawerContentDescRes,</span></span><br><span class="line"><span class="params">        <span class="meta">@StringRes</span> <span class="type">int</span> closeDrawerContentDescRes)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>(activity, <span class="literal">null</span>, drawerLayout, <span class="literal">null</span>, openDrawerContentDescRes,</span><br><span class="line">            closeDrawerContentDescRes);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>那么不带Home旋转开关按钮的代码如下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//这是不带Home旋转开关按钮</span></span><br><span class="line"><span class="type">ActionBarDrawerToggle</span> <span class="variable">toggle</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ActionBarDrawerToggle</span>(<span class="built_in">this</span>, drawer,</span><br><span class="line">  R.string.navigation_drawer_open, R.string.navigation_drawer_close);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>当然我们把上面带Home旋转开关按钮的代码删除也是可以的。</p>
</blockquote>
<p>效果如图:</p>
<p><img src="/images/layout/3485428-37f3e8d70491ff22.webp" alt="img"></p>
<p>Toolbar上不显示Home旋转开关按钮.gif</p>
<h4 id="（五）、不使用NavigationView，使用DrawerLayout-其他布局"><a href="#（五）、不使用NavigationView，使用DrawerLayout-其他布局" class="headerlink" title="（五）、不使用NavigationView，使用DrawerLayout+其他布局"></a>（五）、不使用NavigationView，使用DrawerLayout+其他布局</h4><p>APP实际开发中往往不能完全按照Materialdesign的规则来,如网易云音乐的侧滑,底部还有两个按钮。这时候我们可以通过+其他布局来实现特殊的侧滑布局。</p>
<p>我们可以参考鸿杨大神的博客<br>[Android 自己实现 NavigationView <a target="_blank" rel="noopener" href="https://link.jianshu.com/?t=http://blog.csdn.net/lmj623565791/article/details/46405409">Design Support Library(1)]</a></p>
<p>我们自己实现个简单的,DrawerLayout包裹了一个FrameLayout和一个RelativeLayout,FrameLayout是我们的显示内容区域,RelativeLayout是我们的侧边栏布局。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">android.support.v4.widget.DrawerLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/drawer_layout&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:fitsSystemWindows</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:openDrawer</span>=<span class="string">&quot;start&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">FrameLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/container&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">android.support.v7.widget.Toolbar</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/toolbar&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;?attr/actionBarSize&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">&quot;?attr/colorPrimary&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:popupTheme</span>=<span class="string">&quot;@style/AppTheme.PopupOverlay&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:padding</span>=<span class="string">&quot;16dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;@string/title_activity_drawer_layout_other&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">FrameLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">RelativeLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/nav_view&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_gravity</span>=<span class="string">&quot;start&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:background</span>=<span class="string">&quot;@android:color/white&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:fitsSystemWindows</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;这是顶部按钮&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_centerInParent</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;这是中间的按钮&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_alignParentBottom</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">&quot;这是底部按钮&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">android.support.v4.widget.DrawerLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>如果需要监听DrawerLayout的侧滑状态监听,那么代码如下:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mDrawerLayout = (DrawerLayout) findViewById(R.id.drawer_layout);</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 也可以使用DrawerListener的子类SimpleDrawerListener,</span></span><br><span class="line"><span class="comment">         * 或者是ActionBarDrawerToggle这个子类</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        mDrawerLayout.setDrawerListener(<span class="keyword">new</span> <span class="title class_">DrawerLayout</span>.SimpleDrawerListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDrawerClosed</span><span class="params">(View drawerView)</span> &#123;</span><br><span class="line">                <span class="built_in">super</span>.onDrawerClosed(drawerView);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDrawerOpened</span><span class="params">(View drawerView)</span> &#123;</span><br><span class="line">                <span class="built_in">super</span>.onDrawerOpened(drawerView);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure>

<p>效果图如下:</p>
<p><img src="/images/layout/3485428-54ea163c547c1cc6.webp" alt="img"></p>
<h4 id="ActionBarDrawerToggle"><a href="#ActionBarDrawerToggle" class="headerlink" title="ActionBarDrawerToggle"></a>ActionBarDrawerToggle</h4><p>ActionBarDrawerToggle 是 DrawerLayout.DrawerListener实现。和 NavigationDrawer 搭配使用，推荐用这个方法，符合Android design规范。
 </p>
<p><strong>作用：</strong><br>           1.改变android.R.id.home返回图标。</p>
<p>    2.Drawer拉出、隐藏，带有android.R.id.home动画效果。</p>
<p>    3.监听Drawer拉出、隐藏；</p>
<p>ActionBarDrawerToggle 是在actionBar监视DrawerLayout的状态变化<br>所以<strong>不要设置activity为无标题</strong>：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">//</span>requestWindowFeature(Window.FEATURE_NO_TITLE);</span><br></pre></td></tr></table></figure>

<p><strong>实现：</strong></p>
<p>​					绑定DrawerLayout,<br>设置DrawLayout切换按钮R.drawable.ic_drawer</p>
<p>实现两个方法：<br>  onDrawerClosed<br>  onDrawerOpened<br>监视抽屉的打开和关闭。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 内部实现抽屉状态监听</span></span><br><span class="line"><span class="comment">     * onDrawerOpen</span></span><br><span class="line"><span class="comment">     * onDrawerClose</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    mDrawerToggle = <span class="keyword">new</span> <span class="title class_">ActionBarDrawerToggle</span>(</span><br><span class="line">            MainActivity.<span class="built_in">this</span>, </span><br><span class="line">            mDrawerLayout, </span><br><span class="line">            R.drawable.ic_drawer, </span><br><span class="line">            R.string.drawer_open,</span><br><span class="line">            R.string.drawer_close)&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDrawerClosed</span><span class="params">(View drawerView)</span> &#123;</span><br><span class="line">            <span class="built_in">super</span>.onDrawerClosed(drawerView);</span><br><span class="line">            getActionBar().setTitle(mTitle);</span><br><span class="line">            invalidateOptionsMenu(); <span class="comment">// creates call to</span></span><br><span class="line">                                        <span class="comment">// onPrepareOptionsMenu()</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDrawerOpened</span><span class="params">(View drawerView)</span> &#123;</span><br><span class="line">            <span class="built_in">super</span>.onDrawerOpened(drawerView);</span><br><span class="line">            getActionBar().setTitle(mDrawerTitle);</span><br><span class="line">            invalidateOptionsMenu(); <span class="comment">// creates call to</span></span><br><span class="line">                                        <span class="comment">// onPrepareOptionsMenu()</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">//设置抽屉状态监听事件</span></span><br><span class="line">    mDrawerLayout.setDrawerListener(mDrawerToggle);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>必须注意ActionBarDrawerToggle的使用必须在<br>onPostCreate() and onConfigurationChanged()之间</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * When using the ActionBarDrawerToggle, you must call it during</span></span><br><span class="line"><span class="comment"> * onPostCreate() and onConfigurationChanged()...</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onPostCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>.onPostCreate(savedInstanceState);</span><br><span class="line">    <span class="comment">// Sync the toggle state after onRestoreInstanceState has occurred.</span></span><br><span class="line">    mDrawerToggle.syncState();</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onConfigurationChanged</span><span class="params">(Configuration newConfig)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>.onConfigurationChanged(newConfig);</span><br><span class="line">    <span class="comment">// Pass any configuration change to the drawer toggls</span></span><br><span class="line">    mDrawerToggle.onConfigurationChanged(newConfig);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p><strong>更详细的例子</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line">ActionBarDrawerToggle 是 DrawerLayout.DrawerListener 实现。和 NavigationDrawer 搭配使用，推荐用这个方法，符合Android design规范。</span><br><span class="line"></span><br><span class="line">我们先来看看 NavigationDrawer 里面的 ActionBarDrawerToggle 是如何编写的。</span><br><span class="line"></span><br><span class="line"><span class="comment">// ActionBarDrawerToggle ties together the the proper interactions</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// between the navigation drawer and the action bar app icon.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 动作条抽屉切换器 将 抽屉 与 app icon动作条 绑定正确的交互。</span></span><br><span class="line"></span><br><span class="line">mDrawerToggle = <span class="keyword">new</span> <span class="title class_">ActionBarDrawerToggle</span>(</span><br><span class="line"></span><br><span class="line">​        getActivity(),                    <span class="comment">/* host Activity */</span></span><br><span class="line"></span><br><span class="line">​        mDrawerLayout,                    <span class="comment">/* DrawerLayout object */</span></span><br><span class="line"></span><br><span class="line">​        R.drawable.ic_drawer,             <span class="comment">/* nav drawer image to replace &#x27;Up&#x27; caret */</span></span><br><span class="line"></span><br><span class="line">​        R.string.navigation_drawer_open,  <span class="comment">/* &quot;open drawer&quot; description for accessibility */</span></span><br><span class="line"></span><br><span class="line">​        R.string.navigation_drawer_close  <span class="comment">/* &quot;close drawer&quot; description for accessibility */</span></span><br><span class="line"></span><br><span class="line">) &#123;</span><br><span class="line"></span><br><span class="line">​    <span class="meta">@Override</span></span><br><span class="line"></span><br><span class="line">​    <span class="comment">// 当抽屉关闭时</span></span><br><span class="line"></span><br><span class="line">​    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDrawerClosed</span><span class="params">(View drawerView)</span> &#123;</span><br><span class="line"></span><br><span class="line">​        <span class="built_in">super</span>.onDrawerClosed(drawerView);</span><br><span class="line"></span><br><span class="line">​        <span class="comment">// 如果该Fragment对象没有被添加到了drawerView中</span></span><br><span class="line"></span><br><span class="line">​        <span class="keyword">if</span> (!isAdded()) &#123;</span><br><span class="line"></span><br><span class="line">​            <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">​        &#125;</span><br><span class="line"></span><br><span class="line">​        <span class="comment">// 系统调用onPrepareOptionsMenu()去 update menu</span></span><br><span class="line"></span><br><span class="line">​        getActivity().invalidateOptionsMenu(); <span class="comment">// calls onPrepareOptionsMenu()</span></span><br><span class="line"></span><br><span class="line">​    &#125;</span><br><span class="line"></span><br><span class="line">​    <span class="meta">@Override</span></span><br><span class="line"></span><br><span class="line">​    <span class="comment">// 当抽屉打开时</span></span><br><span class="line"></span><br><span class="line">​    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDrawerOpened</span><span class="params">(View drawerView)</span> &#123;</span><br><span class="line"></span><br><span class="line">​        <span class="built_in">super</span>.onDrawerOpened(drawerView);</span><br><span class="line"></span><br><span class="line">​        <span class="keyword">if</span> (!isAdded()) &#123;</span><br><span class="line"></span><br><span class="line">​            <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">​        &#125;</span><br><span class="line">​        <span class="comment">// 如果 变量“用户正在使用的抽屉” 没有设置</span></span><br><span class="line"></span><br><span class="line">​        <span class="keyword">if</span> (!mUserLearnedDrawer) &#123;</span><br><span class="line"></span><br><span class="line">​            <span class="comment">// The user manually opened the drawer; store this flag to prevent auto-showing34</span></span><br><span class="line">​            <span class="comment">// the navigation drawer automatically in the future.</span></span><br><span class="line"></span><br><span class="line">​            <span class="comment">// 用户手动打开抽屉;存储该标志，以防止自动显示在后面的导航抽屉。</span></span><br><span class="line">​		     mUserLearnedDrawer = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">​            <span class="comment">// 设置偏好</span></span><br><span class="line"></span><br><span class="line">​            <span class="type">SharedPreferences</span> <span class="variable">sp</span> <span class="operator">=</span> PreferenceManager</span><br><span class="line"></span><br><span class="line">​                    .getDefaultSharedPreferences(getActivity());</span><br><span class="line"></span><br><span class="line">​            sp.edit().putBoolean(PREF_USER_LEARNED_DRAWER, <span class="literal">true</span>).apply();</span><br><span class="line"></span><br><span class="line">​        &#125;</span><br><span class="line"></span><br><span class="line">​        getActivity().invalidateOptionsMenu(); <span class="comment">// calls onPrepareOptionsMenu()</span></span><br><span class="line"></span><br><span class="line">​    &#125;</span><br><span class="line">ActionBarDrawerToggle 的作用：</span><br><span class="line"></span><br><span class="line">改变android.R.id.home返回图标。</span><br><span class="line">Drawer拉出、隐藏，带有android.R.id.home动画效果。</span><br><span class="line">监听Drawer拉出、隐藏；</span><br><span class="line">有几点解释一下：</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span> getActivity().invalidateOptionsMenu(); 在运行时改变menu item的状态。你需要重写onPrepareOptionsMenu() ，它方便你对item移除，添加，使不可用等。在android <span class="number">3.0</span>以上，你必须调用invalidateOptionsMenu() 。</span><br><span class="line"></span><br><span class="line">当你要update你的menu时，因为action bar是一直出现的。然后系统将调用onPrepareOptionsMenu()更改menu。</span><br><span class="line"></span><br><span class="line">Activity与Fragment中都有关于menu的一系列的方法，并且都是自动的在框架中回调的。其中onCreateOptionsMenu()只是在创建menu时调用一次，但menu存在的时候是不会重复调用的。更新menu时，从activity中主动的调用 invalidateOptionsMenu() 方法，那么activity在显示menu之前自然会回调onPrepareOptionsMenu(Menu menu)，再在该方法内实现更新的细节即可。</span><br><span class="line"></span><br><span class="line">如果Fragment中没有invalidateOptionsMenu()方法，并且当menu存在的时候fragment也不会调用onCreateOptionsMenu()方法，那么我们可以在Fragment中直接调用setHasOptionsMenu()方法，将该方法设置为<span class="literal">true</span>，它就会调用onCreateOptionsMenu()，如此一来我们的目的就达到了。</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> isAdded();</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="type">boolean</span> <span class="title function_">isAdded</span><span class="params">()</span> 如果该Fragment对象被添加到了它的Activity中，那么它返回<span class="literal">true</span>，否则返回<span class="literal">false</span>。先判断 Fragment 是否 add，这样就能做到多个Fragment切换不重新实例化。</span><br><span class="line"></span><br><span class="line">最后不要忘了</span><br><span class="line"></span><br><span class="line">view sourceprint?</span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="comment">// 给抽屉Layout绑定切换器监听</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line">mDrawerLayout.setDrawerListener(mDrawerToggle);</span><br></pre></td></tr></table></figure>



<h3 id="demo："><a href="#demo：" class="headerlink" title="demo："></a>demo：</h3><p><strong>效果图</strong>：</p>
<p><img src="/images/layout/11483779-5856d1febb879be1.webp" alt="img"></p>
<p><strong>布局文件最外层使用DrawerLayout</strong></p>
<p><strong>只可以有两个子布局</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">android.support.v4.widget.DrawerLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/drawerLayout&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:fitsSystemWindows</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:openDrawer</span>=<span class="string">&quot;start&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">android.support.v4.view.ViewPager</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/viewPager&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_weight</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">android.support.v4.view.ViewPager</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">android.support.design.widget.BottomNavigationView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/bottomNavigationView&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;50dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:background</span>=<span class="string">&quot;@color/white&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:itemIconTint</span>=<span class="string">&quot;@drawable/home_nav_item_color_state&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:itemTextColor</span>=<span class="string">&quot;@drawable/home_nav_item_color_state&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:menu</span>=<span class="string">&quot;@menu/home_navigation&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">android.support.design.widget.BottomNavigationView</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">android.support.design.widget.NavigationView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/navigationView&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_gravity</span>=<span class="string">&quot;left&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:fitsSystemWindows</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:headerLayout</span>=<span class="string">&quot;@layout/home_nav_header&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:menu</span>=<span class="string">&quot;@menu/home_nav_drawer&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">RelativeLayout</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">&quot;50dp&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_alignParentBottom</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:background</span>=<span class="string">&quot;@color/red&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">&quot;退出&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">android.support.design.widget.NavigationView</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">android.support.v4.widget.DrawerLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>NavigationView</strong></p>
<p>NavigationView侧滑菜单，可以自行填充头部布局和菜单布局，还可以再添加任意布局</p>
<p><strong>在需要使用的页面添加如下代码</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HomeActivity</span> <span class="keyword">extends</span> <span class="title class_">BaseActivity</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> DrawerLayout drawerLayout;</span><br><span class="line">    <span class="keyword">private</span> ViewPager viewPager;</span><br><span class="line">    <span class="keyword">private</span> BottomNavigationView bottomNavigationView;</span><br><span class="line">    <span class="keyword">private</span> NavigationView navigationView;</span><br><span class="line"><span class="keyword">private</span> TabFragmentPagerAdapter tabFragmentPagerAdapter;</span><br><span class="line"><span class="keyword">private</span> List&lt;Fragment&gt; fragments;</span><br><span class="line"><span class="keyword">private</span> MenuItem menuItem;</span><br><span class="line"><span class="keyword">private</span> TextView tvHeader;</span><br><span class="line"><span class="keyword">private</span> MenuItem menuItem1;   </span><br><span class="line"><span class="keyword">private</span> MenuItem menuItem2;</span><br><span class="line"><span class="keyword">private</span> MenuItem menuItem3;</span><br><span class="line"><span class="keyword">private</span> MenuItem menuItem4;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getLayoutId</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> R.layout.home_activity_home;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initData</span><span class="params">()</span> &#123;</span><br><span class="line">    initFragment();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initView</span><span class="params">()</span> &#123;</span><br><span class="line">    drawerLayout = findView(R.id.drawerLayout);</span><br><span class="line">    viewPager = findView(R.id.viewPager);</span><br><span class="line">    bottomNavigationView = findView(R.id.bottomNavigationView);</span><br><span class="line">    navigationView = findView(R.id.navigationView);</span><br><span class="line">    initViewPager();</span><br><span class="line">    initBottomNavigationView();</span><br><span class="line">    initNavigationView();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initListener</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">viewsClick</span><span class="params">(View view)</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initFragment</span><span class="params">()</span> &#123;</span><br><span class="line">    fragments = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    fragments.add(<span class="keyword">new</span> <span class="title class_">MainFragment</span>());</span><br><span class="line">    fragments.add(<span class="keyword">new</span> <span class="title class_">ListFragment</span>());</span><br><span class="line">    fragments.add(<span class="keyword">new</span> <span class="title class_">ThreeFragment</span>());</span><br><span class="line">    fragments.add(<span class="keyword">new</span> <span class="title class_">StudyFragment</span>());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initViewPager</span><span class="params">()</span> &#123;</span><br><span class="line">    tabFragmentPagerAdapter = <span class="keyword">new</span> <span class="title class_">TabFragmentPagerAdapter</span>(getSupportFragmentManager(), fragments);</span><br><span class="line">    viewPager.setAdapter(tabFragmentPagerAdapter);</span><br><span class="line">    viewPager.addOnPageChangeListener(<span class="keyword">new</span> <span class="title class_">ViewPager</span>.OnPageChangeListener() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onPageScrolled</span><span class="params">(<span class="type">int</span> position, <span class="type">float</span> positionOffset, <span class="type">int</span> positionOffsetPixels)</span> &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onPageSelected</span><span class="params">(<span class="type">int</span> position)</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (menuItem != <span class="literal">null</span>) &#123;</span><br><span class="line">                menuItem.setChecked(<span class="literal">false</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                bottomNavigationView.getMenu().getItem(<span class="number">0</span>).setChecked(<span class="literal">false</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            menuItem = bottomNavigationView.getMenu().getItem(position);</span><br><span class="line">            menuItem.setChecked(<span class="literal">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onPageScrollStateChanged</span><span class="params">(<span class="type">int</span> state)</span> &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initBottomNavigationView</span><span class="params">()</span> &#123;</span><br><span class="line">    BottomNavigationViewHelper.disableShiftMode(bottomNavigationView);<span class="comment">//取消位移动画</span></span><br><span class="line">    bottomNavigationView.setOnNavigationItemSelectedListener(<span class="keyword">new</span> <span class="title class_">BottomNavigationView</span>.OnNavigationItemSelectedListener() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onNavigationItemSelected</span><span class="params">(<span class="meta">@NonNull</span> MenuItem item)</span> &#123;</span><br><span class="line">            menuItem = item;</span><br><span class="line">            <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> item.getItemId();</span><br><span class="line">            <span class="keyword">if</span> (i == R.id.navigation_home) &#123;</span><br><span class="line">                viewPager.setCurrentItem(<span class="number">0</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (i == R.id.navigation_list) &#123;</span><br><span class="line">                viewPager.setCurrentItem(<span class="number">1</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (i == R.id.navigation_Three) &#123;</span><br><span class="line">                viewPager.setCurrentItem(<span class="number">2</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (i == R.id.navigation_person) &#123;</span><br><span class="line">                viewPager.setCurrentItem(<span class="number">3</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">initNavigationView</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">//登录</span></span><br><span class="line">    tvHeader = navigationView.getHeaderView(<span class="number">0</span>).findViewById(R.id.show_nav_head_text);</span><br><span class="line">    menuItem1 = navigationView.getMenu().findItem(R.id.nav_item1);</span><br><span class="line">    menuItem2 = navigationView.getMenu().findItem(R.id.nav_item2);</span><br><span class="line">    menuItem3 = navigationView.getMenu().findItem(R.id.nav_item3);</span><br><span class="line">    menuItem4 = navigationView.getMenu().findItem(R.id.nav_item4);</span><br><span class="line">    <span class="comment">//通过actionbardrawertoggle将toolbar与drawablelayout关联起来</span></span><br><span class="line">    <span class="type">ActionBarDrawerToggle</span> <span class="variable">toggle</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ActionBarDrawerToggle</span>(</span><br><span class="line">            <span class="built_in">this</span>, drawerLayout, R.string.home_drawer_open, R.string.home_drawer_close) &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onDrawerSlide</span><span class="params">(View drawerView, <span class="type">float</span> slideOffset)</span> &#123;</span><br><span class="line">            <span class="comment">//可以重新侧滑方法,该方法实现侧滑动画,整个布局移动效果</span></span><br><span class="line">            <span class="comment">//获取mDrawerLayout中的第一个子布局，也就是布局中的RelativeLayout</span></span><br><span class="line">            <span class="comment">//获取抽屉的view</span></span><br><span class="line">            <span class="type">View</span> <span class="variable">mContent</span> <span class="operator">=</span> drawerLayout.getChildAt(<span class="number">0</span>);</span><br><span class="line">            <span class="type">float</span> <span class="variable">scale</span> <span class="operator">=</span> <span class="number">1</span> - slideOffset;</span><br><span class="line">            <span class="type">float</span> <span class="variable">endScale</span> <span class="operator">=</span> <span class="number">0.8f</span> + scale * <span class="number">0.2f</span>;</span><br><span class="line">            <span class="type">float</span> <span class="variable">startScale</span> <span class="operator">=</span> <span class="number">1</span> - <span class="number">0.3f</span> * scale;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//设置左边菜单滑动后的占据屏幕大小</span></span><br><span class="line">            drawerView.setScaleX(startScale);</span><br><span class="line">            drawerView.setScaleY(startScale);</span><br><span class="line">            <span class="comment">//设置菜单透明度</span></span><br><span class="line">            drawerView.setAlpha(<span class="number">0.6f</span> + <span class="number">0.4f</span> * (<span class="number">1</span> - scale));</span><br><span class="line"></span><br><span class="line">            <span class="comment">//设置内容界面水平和垂直方向偏转量</span></span><br><span class="line">            <span class="comment">//在滑动时内容界面的宽度为 屏幕宽度减去菜单界面所占宽度</span></span><br><span class="line">            mContent.setTranslationX(drawerView.getMeasuredWidth() * (<span class="number">1</span> - scale));</span><br><span class="line">            <span class="comment">//设置内容界面操作无效（比如有button就会点击无效）</span></span><br><span class="line">            mContent.invalidate();</span><br><span class="line">            <span class="comment">//设置右边菜单滑动后的占据屏幕大小</span></span><br><span class="line">            mContent.setScaleX(endScale);</span><br><span class="line">            mContent.setScaleY(endScale);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    toggle.syncState();</span><br><span class="line">    drawerLayout.addDrawerListener(toggle);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置图片为本身的颜色</span></span><br><span class="line">    navigationView.setItemIconTintList(<span class="literal">null</span>);</span><br><span class="line">    <span class="comment">//设置item的点击事件</span></span><br><span class="line">    navigationView.setNavigationItemSelectedListener(<span class="keyword">new</span> <span class="title class_">NavigationView</span>.OnNavigationItemSelectedListener() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onNavigationItemSelected</span><span class="params">(<span class="meta">@NonNull</span> MenuItem item)</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (item == menuItem1) &#123;</span><br><span class="line"></span><br><span class="line">                drawerLayout.closeDrawer(GravityCompat.START);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (item == menuItem2) &#123;</span><br><span class="line"></span><br><span class="line">                drawerLayout.closeDrawer(GravityCompat.START);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (item == menuItem3) &#123;</span><br><span class="line"></span><br><span class="line">                drawerLayout.closeDrawer(GravityCompat.START);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (item == menuItem4) &#123;</span><br><span class="line"></span><br><span class="line">                drawerLayout.closeDrawer(GravityCompat.START);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//头部设置监听</span></span><br><span class="line">    tvHeader.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">            Toast.makeText(HomeActivity.<span class="built_in">this</span>, <span class="string">&quot;登录成功&quot;</span>, Toast.LENGTH_LONG).show();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4、CoordinatorLayout"><a href="#4、CoordinatorLayout" class="headerlink" title="4、CoordinatorLayout"></a>4、CoordinatorLayout</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/jxf_access/article/details/79564669">https://blog.csdn.net/jxf_access/article/details/79564669</a></p>

    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>rhb
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="http://rshawshank.github.io/2020/01/19/android_layout/" title="layout">http://rshawshank.github.io/2020/01/19/android_layout/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/tags/android/" rel="tag"><i class="fa fa-tag"></i> android</a>
              <a href="/tags/layout/" rel="tag"><i class="fa fa-tag"></i> layout</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/01/13/android_Broadcast/" rel="prev" title="Broadcast">
      <i class="fa fa-chevron-left"></i> Broadcast
    </a></div>
      <div class="post-nav-item">
    <a href="/2020/01/19/android_drawable/" rel="next" title="drawable">
      drawable <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%83%E5%B1%80"><span class="nav-number">1.</span> <span class="nav-text">布局</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%80%EF%BC%8E%E5%9F%BA%E6%9C%AC%E7%90%86%E8%AE%BA"><span class="nav-number">1.1.</span> <span class="nav-text">一．基本理论</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%8C-%E5%90%84%E4%B8%AA%E5%B8%83%E5%B1%80%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-number">1.2.</span> <span class="nav-text">二.各个布局的使用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%88%E4%B8%80%EF%BC%89%E7%BA%BF%E6%80%A7%E5%B8%83%E5%B1%80"><span class="nav-number">1.2.1.</span> <span class="nav-text">（一）线性布局</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%88%E4%BA%8C%EF%BC%89RelativeLayout"><span class="nav-number">1.2.2.</span> <span class="nav-text">（二）RelativeLayout</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%88%E4%B8%89%EF%BC%89FrameLayout"><span class="nav-number">1.2.3.</span> <span class="nav-text">（三）FrameLayout</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%88%E5%9B%9B%EF%BC%89AbsoluteLayout"><span class="nav-number">1.2.4.</span> <span class="nav-text">（四）AbsoluteLayout</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%88%E4%BA%94%EF%BC%89TableLayout"><span class="nav-number">1.2.5.</span> <span class="nav-text">（五）TableLayout</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%88%E5%85%AD%EF%BC%89GridLayout-%E7%BD%91%E6%A0%BC%E5%B8%83%E5%B1%80"><span class="nav-number">1.2.6.</span> <span class="nav-text">（六）GridLayout(网格布局)</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1%E3%80%81%E7%BA%A6%E6%9D%9F%E5%B8%83%E5%B1%80ConstraintLayout"><span class="nav-number">2.</span> <span class="nav-text">1、约束布局ConstraintLayout</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1%E3%80%81%E4%BB%8B%E7%BB%8D"><span class="nav-number">2.1.</span> <span class="nav-text">1、介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2%E3%80%81%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E7%94%A8ConstraintLayout"><span class="nav-number">2.2.</span> <span class="nav-text">2、为什么要用ConstraintLayout</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8ConstraintLayout"><span class="nav-number">2.3.</span> <span class="nav-text">3.如何使用ConstraintLayout</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-1-%E6%B7%BB%E5%8A%A0%E4%BE%9D%E8%B5%96"><span class="nav-number">2.3.1.</span> <span class="nav-text">3.1 添加依赖</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-2-%E7%9B%B8%E5%AF%B9%E5%AE%9A%E4%BD%8D"><span class="nav-number">2.3.2.</span> <span class="nav-text">3.2 相对定位</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-3-%E8%A7%92%E5%BA%A6%E5%AE%9A%E4%BD%8D"><span class="nav-number">2.3.3.</span> <span class="nav-text">3.3 角度定位</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-4-%E8%BE%B9%E8%B7%9D"><span class="nav-number">2.3.4.</span> <span class="nav-text">3.4 边距</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-5-%E5%B1%85%E4%B8%AD%E5%92%8C%E5%81%8F%E7%A7%BB"><span class="nav-number">2.3.5.</span> <span class="nav-text">3.5 居中和偏移</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-6-%E5%B0%BA%E5%AF%B8%E7%BA%A6%E6%9D%9F"><span class="nav-number">2.3.6.</span> <span class="nav-text">3.6 尺寸约束</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-7-%E9%93%BE"><span class="nav-number">2.3.7.</span> <span class="nav-text">3.7 链</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E8%BE%85%E5%8A%A9%E5%B7%A5%E5%85%B7"><span class="nav-number">2.4.</span> <span class="nav-text">4.辅助工具</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#4-1-Optimizer"><span class="nav-number">2.4.1.</span> <span class="nav-text">4.1 Optimizer</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-2-Barrier"><span class="nav-number">2.4.2.</span> <span class="nav-text">4.2 Barrier</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-3-Group"><span class="nav-number">2.4.3.</span> <span class="nav-text">4.3 Group</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-4-Placeholder"><span class="nav-number">2.4.4.</span> <span class="nav-text">4.4 Placeholder</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-5-Guideline"><span class="nav-number">2.4.5.</span> <span class="nav-text">4.5 Guideline</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2%E3%80%81AppbarLayout%E6%8E%A7%E4%BB%B6"><span class="nav-number">3.</span> <span class="nav-text">2、AppbarLayout控件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%94%A8%E6%B3%95%EF%BC%9A"><span class="nav-number">3.1.</span> <span class="nav-text">用法：</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BC%95%E5%85%A5CollapsingToolbarLayout"><span class="nav-number">3.1.1.</span> <span class="nav-text">引入CollapsingToolbarLayout</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#FloatingActionButton%E5%86%8D%E6%AC%A1%E8%A1%A8%E6%BC%94"><span class="nav-number">3.1.2.</span> <span class="nav-text">FloatingActionButton再次表演</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%B6%E4%BB%96%E6%96%B9%E6%B3%95%E4%BB%8B%E7%BB%8D"><span class="nav-number">3.1.3.</span> <span class="nav-text">其他方法介绍</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#CollapsingToolbarLayout"><span class="nav-number">3.1.4.</span> <span class="nav-text">CollapsingToolbarLayout</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3%E3%80%81DrawerLayout%E6%8A%BD%E5%B1%89%E5%B8%83%E5%B1%80"><span class="nav-number">4.</span> <span class="nav-text">3、DrawerLayout抽屉布局</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1%E3%80%81%E4%BB%8B%E7%BB%8D-1"><span class="nav-number">4.1.</span> <span class="nav-text">1、介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2%E3%80%81%E4%BD%BF%E7%94%A8"><span class="nav-number">4.2.</span> <span class="nav-text">2、使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DrawerLayout%E5%92%8CNavigationView%E4%BD%BF%E7%94%A8%EF%BC%88%E9%87%8D%E7%82%B9%EF%BC%89"><span class="nav-number">4.3.</span> <span class="nav-text">DrawerLayout和NavigationView使用（重点）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%88%E4%B8%80%EF%BC%89%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="nav-number">4.3.1.</span> <span class="nav-text">（一）基本使用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BA%8C-%E3%80%81%E7%9B%91%E5%90%AC%E5%92%8C%E5%85%B3%E9%97%ADNavigationView"><span class="nav-number">4.3.2.</span> <span class="nav-text">(二)、监听和关闭NavigationView</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%88%E4%B8%89%EF%BC%89%E3%80%81NavigationView%E5%9C%A8Toolbar%E4%B8%8B%E6%96%B9"><span class="nav-number">4.3.3.</span> <span class="nav-text">（三）、NavigationView在Toolbar下方</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%88%E5%9B%9B%EF%BC%89%E3%80%81Toolbar%E4%B8%8A%E4%B8%8D%E6%98%BE%E7%A4%BAHome%E6%97%8B%E8%BD%AC%E5%BC%80%E5%85%B3%E6%8C%89%E9%92%AE"><span class="nav-number">4.3.4.</span> <span class="nav-text">（四）、Toolbar上不显示Home旋转开关按钮</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%88%E4%BA%94%EF%BC%89%E3%80%81%E4%B8%8D%E4%BD%BF%E7%94%A8NavigationView%EF%BC%8C%E4%BD%BF%E7%94%A8DrawerLayout-%E5%85%B6%E4%BB%96%E5%B8%83%E5%B1%80"><span class="nav-number">4.3.5.</span> <span class="nav-text">（五）、不使用NavigationView，使用DrawerLayout+其他布局</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ActionBarDrawerToggle"><span class="nav-number">4.3.6.</span> <span class="nav-text">ActionBarDrawerToggle</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#demo%EF%BC%9A"><span class="nav-number">4.4.</span> <span class="nav-text">demo：</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4%E3%80%81CoordinatorLayout"><span class="nav-number">5.</span> <span class="nav-text">4、CoordinatorLayout</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">rhb</p>
  <div class="site-description" itemprop="description">纵浪大化中，不喜亦不惧</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">140</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">23</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">57</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/RShawshank" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;RShawshank" rel="noopener" target="_blank"><i class="github fa-fw"></i>GitHub</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">rhb</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div><script color="0,0,255" opacity="0.5" zIndex="-1" count="99" src="https://lib.baomitu.com/canvas-nest.js/1.0.1/canvas-nest.js"></script>


        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>

<script src="/js/bookmark.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

  

</body>
</html>
