<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Activity | rhb_blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="Activity概述活动代表了一个具有用户界面的单一屏幕，如 Java 的窗口或者帧。Android 的活动是 ContextThemeWrapper 类的子类。它是一种可以包含用户界面组件，主要用于和用户进行交互。 AndroidManifest文件AndroidManifest.xml 是每个android程序中必须的文件。它位于整个项目的根目录，描述了package中暴露的组件（activi">
<meta property="og:type" content="article">
<meta property="og:title" content="Activity">
<meta property="og:url" content="http://rshawshank.github.io/2020/01/13/android_Activity/index.html">
<meta property="og:site_name" content="rhb_blog">
<meta property="og:description" content="Activity概述活动代表了一个具有用户界面的单一屏幕，如 Java 的窗口或者帧。Android 的活动是 ContextThemeWrapper 类的子类。它是一种可以包含用户界面组件，主要用于和用户进行交互。 AndroidManifest文件AndroidManifest.xml 是每个android程序中必须的文件。它位于整个项目的根目录，描述了package中暴露的组件（activi">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://rshawshank.github.io/images/Activity/1070689-20171214171311342-1238515765.png">
<meta property="og:image" content="http://rshawshank.github.io/images/Activity/1070689-20171214171318951-320255124.png">
<meta property="og:image" content="http://rshawshank.github.io/images/Activity/1070689-20171214172243263-372940928.png">
<meta property="og:image" content="http://rshawshank.github.io/images/Activity/1070689-20171214172250357-1874018666.png">
<meta property="og:image" content="http://rshawshank.github.io/images/Activity/1070689-20171214172256295-322673058.png">
<meta property="og:image" content="http://rshawshank.github.io/images/Activity/1070689-20171214172703092-915673361.png">
<meta property="og:image" content="http://rshawshank.github.io/images/Activity/1070689-20171214172717857-532792389.png">
<meta property="og:image" content="http://rshawshank.github.io/images/Activity/1070689-20171214172726326-2106934821.png">
<meta property="og:image" content="http://rshawshank.github.io/images/Activity/1930046-a086f191437566f4.webp">
<meta property="og:image" content="https://images2015.cnblogs.com/blog/892430/201605/892430-20160525234337819-1224164299.png">
<meta property="og:image" content="http://rshawshank.github.io/images/Activity/892430-20160525234453803-474351507.png">
<meta property="og:image" content="http://rshawshank.github.io/images/Activity/892430-20160525234548225-112784357.png">
<meta property="og:image" content="http://rshawshank.github.io/images/Activity/892430-20160526091149569-982478014.png">
<meta property="og:image" content="http://rshawshank.github.io/images/Activity/834105-20151220133119758-1793380210.jpg">
<meta property="og:image" content="http://rshawshank.github.io/images/Activity/834105-20151220141452867-684265253.png">
<meta property="article:published_time" content="2020-01-13T11:15:15.000Z">
<meta property="article:modified_time" content="2020-01-19T01:41:46.000Z">
<meta property="article:author" content="rhb">
<meta property="article:tag" content="android">
<meta property="article:tag" content="activity">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://rshawshank.github.io/images/Activity/1070689-20171214171311342-1238515765.png">
  
    <link rel="alternate" href="/atom.xml" title="rhb_blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">rhb_blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS 订阅"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://rshawshank.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-android_Activity" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/01/13/android_Activity/" class="article-date">
  <time class="dt-published" datetime="2020-01-13T11:15:15.000Z" itemprop="datePublished">2020-01-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a>►<a class="article-category-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/android/">android</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      Activity
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Activity概述"><a href="#Activity概述" class="headerlink" title="Activity概述"></a>Activity概述</h1><p>活动代表了一个具有用户界面的单一屏幕，如 Java 的窗口或者帧。Android 的活动是 ContextThemeWrapper 类的子类。<br>它是一种可以包含用户界面组件，主要用于和用户进行交互。</p>
<h2 id="AndroidManifest文件"><a href="#AndroidManifest文件" class="headerlink" title="AndroidManifest文件"></a>AndroidManifest文件</h2><p>AndroidManifest.xml 是每个android程序中必须的文件。它位于整个项目的根目录，描述了package中暴露的组件（activities, services, 等等），他们各自的实现类，各种能被处理的数据和启动位置。 除了能声明程序中的Activities, ContentProviders, Services, 和Intent Receivers,还能指定permissions和instrumentation（安全控制和测试）</p>
<h2 id="活动与任务"><a href="#活动与任务" class="headerlink" title="活动与任务"></a>活动与任务</h2><p>Android将这些活动保持在同一个任务（task）中以维持用户的体验。简单地讲，任务是用户体验上的一个“应用程序”，是排成堆栈的一组相关活动。栈底的活动（根活动）是起始活动——一般来讲，它是用户在应用程序启动器（也称应用程序列表，下同）中选择的一个活动。栈顶的活动是正在运行的活动——它关注用户的行为（操作）。当一个活动启动另一个，新的活动被压入栈顶，变为正在运行的活动。前面那个活动保存在栈中。当用户点击返回按钮时，当前活动从栈顶中弹出，且前面那个活动恢复成为正在运行的活动。</p>
<p>一个任务的所有活动作为一个整体运行。整个任务（整个活动栈）可置于前台或发送到后台。例如，假设当前任务有四个活动在栈中——三个活动在当前活动下面。用户按下HOME键，切换到程序启动器，并选择一个新的应用程序（实际上是一个新的任务）。当前任务进入后台，新任务的根活动将显示。接着，过了一会，用户回到主屏幕并再次选择之前的应用程序（之前的任务）。那个任务栈中的所有四个活动都变为前台运行。当用户按下返回键时，不是离开当前任务回到之前任务的根活动。相反，栈顶的活动被移除且栈中的下一个活动将显示。</p>
<p>上面所描述的是活动和任务的默认行为，但是有方法来改变所有这些行为。活动与任务之间的联系及任务中活动的行为，是由启动活动的Intent对象的标志（flags）和清单文件中活动<activity>元素的属性共同决定的。</p>
<h2 id="菜单menu"><a href="#菜单menu" class="headerlink" title="菜单menu"></a>菜单menu</h2><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/HDK2016/p/8038908.html">https://www.cnblogs.com/HDK2016/p/8038908.html</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/aiynmimi/article/details/54964945">https://blog.csdn.net/aiynmimi/article/details/54964945</a></p>
<h3 id="菜单的分类"><a href="#菜单的分类" class="headerlink" title="菜单的分类"></a>菜单的分类</h3><p>菜单是Android应用中非常重要且常见的组成部分，主要可以分为三类：选项菜单、上下文菜单&#x2F;上下文操作模式以及弹出菜单。它们的主要区别如下：</p>
<ul>
<li><p>选项菜单是一个应用的主菜单项，用于放置对应用产生全局影响的操作，如搜索&#x2F;设置。</p>
</li>
<li><p>上下文菜单是用户长按某一元素时出现的浮动菜单。它提供的操作将影响所选内容，主要应用于列表中的每一项元素（如长按列表项弹出删除对话框）。上下文操作模式将在屏幕顶部栏（菜单栏）显示影响所选内容的操作选项，并允许用户选择多项，一般用于对列表类型的数据进行批量操作。</p>
</li>
<li><p>弹出菜单以垂直列表形式显示一系列操作选项，一般由某一控件触发，弹出菜单将显示在对应控件的上方或下方。它适用于提供与特定内容相关的大量操作。</p>
</li>
</ul>
<h3 id="选项菜单"><a href="#选项菜单" class="headerlink" title="选项菜单"></a>选项菜单</h3><p>当用户单击设备上的菜单按钮（Menu），触发事件弹出的菜单就是选项菜单。</p>
<h4 id="效果图："><a href="#效果图：" class="headerlink" title="效果图："></a>效果图：</h4><p><img src="/images/Activity/1070689-20171214171311342-1238515765.png"></p>
<p><img src="/images/Activity/1070689-20171214171318951-320255124.png"></p>
<h4 id="实现过程讲解："><a href="#实现过程讲解：" class="headerlink" title="实现过程讲解："></a>实现过程讲解：</h4><p>在Activity中重写<code>onCreateOptionsMenu()</code>来创建选项菜单，在中包含了<code>getMenuInflater().inflate(R.menu.main,menu)</code>，R.menu.main是res的menu文件夹下的xml文件是放菜单的文件夹；</p>
<h4 id="实现代码："><a href="#实现代码：" class="headerlink" title="实现代码："></a>实现代码：</h4><p>设置菜单项可以通过两种方法</p>
<p><strong>1.通过在XML文件中添加控件来实现</strong></p>
<p>在R.menu.main的xml文件中，添加item控件来添加设置菜单项;</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">menu</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;com.jiapeng.munedemo.MainActivity&quot;</span> &gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/mune_enter&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orderInCategory</span>=<span class="string">&quot;100&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:title</span>=<span class="string">&quot;登录&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:showAsAction</span>=<span class="string">&quot;never&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/mune_setting&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orderInCategory</span>=<span class="string">&quot;100&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:title</span>=<span class="string">&quot;设置&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:showAsAction</span>=<span class="string">&quot;never&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/mune_out&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orderInCategory</span>=<span class="string">&quot;100&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:title</span>=<span class="string">&quot;退出&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:showAsAction</span>=<span class="string">&quot;never&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">menu</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>其中：<code>showAsAction</code>主要是针对这个菜单的显示起作用的，它有三个可选项<br>always：总是显示在界面上<br>never：不显示在界面上，只让出现在右边的三个点中<br>ifRoom：如果有位置才显示，不然就出现在右边的三个点中</p>
<p><strong>java代码和设置监听：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onCreateOptionsMenu</span><span class="params">(Menu menu)</span> &#123;</span><br><span class="line">    <span class="comment">//导入菜单布局</span></span><br><span class="line">    getMenuInflater().inflate(R.menu.main, menu);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onOptionsItemSelected</span><span class="params">(MenuItem item)</span> &#123;</span><br><span class="line">    <span class="comment">//创建菜单项的点击事件</span></span><br><span class="line">    <span class="keyword">switch</span> (item.getItemId()) &#123;</span><br><span class="line">    <span class="keyword">case</span> R.id.mune_enter:</span><br><span class="line">        Toast.makeText(<span class="built_in">this</span>, <span class="string">&quot;点击了登陆&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> R.id.mune_setting:</span><br><span class="line">        Toast.makeText(<span class="built_in">this</span>, <span class="string">&quot;点击了设置&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> R.id.mune_out:</span><br><span class="line">        Toast.makeText(<span class="built_in">this</span>, <span class="string">&quot;点击了退出&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">super</span>.onOptionsItemSelected(item);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2、<strong>通过动态代码实现</strong></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">menu</span><span class="selector-class">.add</span>(groupId,itemId,<span class="attribute">order</span>,title),</span><br><span class="line"></span><br><span class="line">groupId--<span class="number">1</span>:分组的id;</span><br><span class="line">itemId--<span class="number">100</span>:菜单项的id;</span><br><span class="line"><span class="attribute">order</span>--<span class="number">1</span>:菜单项排序用的;</span><br><span class="line">title--&quot;菜单<span class="number">1</span>&quot;:菜单名称;</span><br></pre></td></tr></table></figure>

<p>menu的用法类似于ArrayList,可以调用add方法来加载如<br>&#x2F;&#x2F;API大于等于11 时 Item图标不显示<br>menu.add(1,100,1,”菜单一”);<br>menu.add(1,101,1,”菜单二”);<br>menu.add(1,102,1,”菜单三”);<br>add方法返回的是item，可以赋值给item，再调用item的setTitle与setIcon（在API&gt;&#x3D;11时，是不显示图标的）来设置item。</p>
<p><strong>代码如下</strong>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onCreateOptionsMenu</span><span class="params">(Menu menu)</span> &#123;</span><br><span class="line">        <span class="comment">// groupId--1:分组的id;itemId--100:菜单项的id;order--1:菜单项排序用的;title--&quot;菜单1&quot;:菜单名称;</span></span><br><span class="line">        <span class="type">MenuItem</span> <span class="variable">item</span> <span class="operator">=</span> menu.add(<span class="number">1</span>, <span class="number">100</span>, <span class="number">1</span>, <span class="string">&quot;菜单项&quot;</span>);</span><br><span class="line">        item.setTitle(<span class="string">&quot;我是一个菜单&quot;</span>);</span><br><span class="line">        <span class="comment">// 在API&gt;=11时，是不显示图标的</span></span><br><span class="line">        item.setIcon(R.drawable.ic_launcher);</span><br><span class="line">        menu.add(<span class="number">1</span>, <span class="number">101</span>, <span class="number">1</span>, <span class="string">&quot;登录&quot;</span>);</span><br><span class="line">        menu.add(<span class="number">1</span>, <span class="number">102</span>, <span class="number">1</span>, <span class="string">&quot;设置&quot;</span>);</span><br><span class="line">        menu.add(<span class="number">1</span>, <span class="number">103</span>, <span class="number">1</span>, <span class="string">&quot;退出&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onOptionsItemSelected</span><span class="params">(MenuItem item)</span> &#123;</span><br><span class="line">        <span class="comment">// 创建菜单项的点击事件</span></span><br><span class="line">        <span class="keyword">switch</span> (item.getItemId()) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">101</span>:</span><br><span class="line">            Toast.makeText(<span class="built_in">this</span>, <span class="string">&quot;你点击了登录&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">102</span>:</span><br><span class="line">            Toast.makeText(<span class="built_in">this</span>, <span class="string">&quot;你点击了设置&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">103</span>:</span><br><span class="line">            Toast.makeText(<span class="built_in">this</span>, <span class="string">&quot;你点击了退出&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.onOptionsItemSelected(item);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="上下文菜单（context-menu）"><a href="#上下文菜单（context-menu）" class="headerlink" title="上下文菜单（context menu）"></a>上下文菜单（context menu）</h3><p>当用户长按Activity页面时，弹出的菜单我们称为上下文菜单。我们经常在Windows中用鼠标右键单击弹出的菜单就是上下文菜单。</p>
<p>ContextMenu与OptionMenu的区别：<br>1、<code>OptionMenu</code>对应的是<code>activity</code>，一个activity只能拥有一个选项菜单；<br>2、<code>ContextMenu</code>对应的是<code>view</code>，每个view都可以设置上下文菜单；<br>3、一般情况下ContextMenu常用语ListView或者GridView</p>
<h4 id="实现步骤："><a href="#实现步骤：" class="headerlink" title="实现步骤："></a>实现步骤：</h4><p>（1）首先给View注册上下文菜单<code>registerForContextMenu()</code><br><code>this.registerForContextMenu(contextView);</code><br>（2）添加上下文菜单的内容<code>onCreateContextMenu()</code></p>
<p><strong>效果图：</strong></p>
<p><img src="/images/Activity/1070689-20171214172243263-372940928.png" alt="img"></p>
<p><img src="/images/Activity/1070689-20171214172250357-1874018666.png" alt="img"></p>
<p><img src="/images/Activity/1070689-20171214172256295-322673058.png" alt="img"></p>
<p><strong>代码</strong>：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">FrameLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/container&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;com.jiapeng.munedemo.MainActivity&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:ignore</span>=<span class="string">&quot;MergeRootFrame&quot;</span> &gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">ListView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/mune_list&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ListView</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">FrameLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">      <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">      setContentView(R.layout.activity_main);</span><br><span class="line">      showListView();</span><br><span class="line">      <span class="comment">// 注册上下文菜单</span></span><br><span class="line">      <span class="built_in">this</span>.registerForContextMenu(listview);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 加载数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">showListView</span><span class="params">()</span> &#123;</span><br><span class="line">      listview = (ListView) findViewById(R.id.mune_list);</span><br><span class="line">      ArrayAdapter&lt;String&gt; adapter = <span class="keyword">new</span> <span class="title class_">ArrayAdapter</span>&lt;String&gt;(<span class="built_in">this</span>,</span><br><span class="line">              android.R.layout.simple_list_item_1, getDate());</span><br><span class="line">      listview.setAdapter(adapter);</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 创建数据源</span></span><br><span class="line"><span class="comment">   * </span></span><br><span class="line"><span class="comment">   * <span class="doctag">@return</span> list</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">private</span> ArrayList&lt;String&gt; <span class="title function_">getDate</span><span class="params">()</span> &#123;</span><br><span class="line">      ArrayList&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line">      <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">          list.add(<span class="string">&quot;菜单&quot;</span> + i);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> list;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 添加上下文菜单的菜单项</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCreateContextMenu</span><span class="params">(ContextMenu menu, View v,</span></span><br><span class="line"><span class="params">          ContextMenuInfo menuInfo)</span> &#123;</span><br><span class="line">      menu.setHeaderTitle(<span class="string">&quot;上下文菜单&quot;</span>);</span><br><span class="line">      menu.setHeaderIcon(R.drawable.ic_launcher);</span><br><span class="line">      <span class="comment">//加载上下文菜单内容</span></span><br><span class="line">      menu.add(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="string">&quot;保存&quot;</span>);</span><br><span class="line">      menu.add(<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="string">&quot;更改&quot;</span>);</span><br><span class="line">      menu.add(<span class="number">1</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="string">&quot;删除&quot;</span>);</span><br><span class="line">      <span class="built_in">super</span>.onCreateContextMenu(menu, v, menuInfo);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 创建单击事件</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onContextItemSelected</span><span class="params">(MenuItem item)</span> &#123;</span><br><span class="line">      <span class="keyword">switch</span> (item.getItemId()) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">          Toast.makeText(<span class="built_in">this</span>, <span class="string">&quot;点击了保存&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">          Toast.makeText(<span class="built_in">this</span>, <span class="string">&quot;点击了更改&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">          Toast.makeText(<span class="built_in">this</span>, <span class="string">&quot;点击了删除&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">default</span>:</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">super</span>.onContextItemSelected(item);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>注：何为上下文菜单：Windows操作系统中任何地方右击鼠标会出现俗称的“右键菜单”，其实就是指上下文菜单。因为上下文菜单根据鼠标位置来判断弹出什么的菜单（如桌面右击显示个性化菜单，文件右击则显示针对文件操作删除等的菜单）也就是根据上下文来判断如何弹出和弹出哪种菜单，所以称为上下文菜单。手机上就是长按会弹出选项</p>
<h3 id="子菜单（Sub-Menu）"><a href="#子菜单（Sub-Menu）" class="headerlink" title="子菜单（Sub Menu）"></a>子菜单（Sub Menu）</h3><p>就是将功能相同的操作分组显示，他作用在OptionsMenu上，是OptionsMenu的二级菜单</p>
<h4 id="实现步骤：-1"><a href="#实现步骤：-1" class="headerlink" title="实现步骤："></a>实现步骤：</h4><p>（1）重写<code>onCreateOptionsMenu()</code>方法<br>（2）点击事件，重写<code>onOptionsItemSelected()</code>方法</p>
<h4 id="注意："><a href="#注意：" class="headerlink" title="注意："></a>注意：</h4><p>（1）<code>SubMenu.add(groupId, itemId, order, title);</code><br>因为每个SubMenu有一个groupId，所以需要使用这个groupId区别是点击了那个子菜单<br>（2）APP的样式会影响子菜单的显示风格</p>
<p><strong>效果图</strong>：</p>
<p><img src="/images/Activity/1070689-20171214172703092-915673361.png" alt="img"></p>
<p><img src="/images/Activity/1070689-20171214172717857-532792389.png" alt="img"></p>
<p><img src="/images/Activity/1070689-20171214172726326-2106934821.png" alt="img"></p>
<p><strong>代码</strong>：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">FrameLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">&quot;@+id/container&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;com.jiapeng.munedemo.MainActivity&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:ignore</span>=<span class="string">&quot;MergeRootFrame&quot;</span> &gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;SubMenu&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;30sp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">FrameLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onCreateOptionsMenu</span><span class="params">(Menu menu)</span> &#123;</span><br><span class="line">        <span class="type">SubMenu</span> <span class="variable">fileMenu</span> <span class="operator">=</span> menu.addSubMenu(<span class="string">&quot;查看文件&quot;</span>);</span><br><span class="line">        <span class="type">SubMenu</span> <span class="variable">editMenu</span> <span class="operator">=</span> menu.addSubMenu(<span class="string">&quot;输入文件&quot;</span>);</span><br><span class="line">        <span class="comment">//添加菜单项</span></span><br><span class="line">        fileMenu.add(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="string">&quot;文件1&quot;</span>);</span><br><span class="line">        fileMenu.add(<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="string">&quot;文件2&quot;</span>);</span><br><span class="line">        fileMenu.add(<span class="number">1</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="string">&quot;文件3&quot;</span>);</span><br><span class="line">        editMenu.add(<span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="string">&quot;输入1&quot;</span>);</span><br><span class="line">        editMenu.add(<span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="string">&quot;输入2&quot;</span>);</span><br><span class="line">        editMenu.add(<span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="string">&quot;输入3&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.onCreateOptionsMenu(menu);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建点击事件</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onOptionsItemSelected</span><span class="params">(MenuItem item)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (item.getGroupId() == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">switch</span> (item.getItemId()) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                Toast.makeText(<span class="built_in">this</span>, <span class="string">&quot;点击了文件1&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                Toast.makeText(<span class="built_in">this</span>, <span class="string">&quot;点击了文件2&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                Toast.makeText(<span class="built_in">this</span>, <span class="string">&quot;点击了文件3&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (item.getGroupId() == <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">switch</span> (item.getItemId()) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                Toast.makeText(<span class="built_in">this</span>, <span class="string">&quot;点击了输入1&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                Toast.makeText(<span class="built_in">this</span>, <span class="string">&quot;点击了输入2&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                Toast.makeText(<span class="built_in">this</span>, <span class="string">&quot;点击了输入3&quot;</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.onOptionsItemSelected(item);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="menu的属性解释"><a href="#menu的属性解释" class="headerlink" title="menu的属性解释"></a>menu的属性解释</h3><ul>
<li><p><code>android:id</code><br>定义资源ID，它是个唯一值，使用“@+id&#x2F;name”格式可以给这个菜单项创建一个新的资源ID，“+”号指示要创建一个新的ID。</p>
</li>
<li><p><code>android:title</code><br>字符串资源，它用字符串资源或原始的字符串来定义菜单的标题。</p>
</li>
<li><p><code>android:titleCondensed</code><br>字符串资源。它用字符串资源或原始的字符串来定义一个简要的标题，以便在普通的标题太长时来使用。</p>
</li>
<li><p><code>android:icon</code><br>可绘制资源，它定义了一个菜单项所要使用的图标。</p>
</li>
<li><p><code>android:onClick</code><br>方法名。在这个菜单项被点击时，会调用这个方法。在Activity中，这个方法必须用public关键字来声明，并且只接受一个MenuItem对象，这个对象指明了被点击的菜单项。这个方法会优先标准的回调方法：onOptionsItemSelected()。<br>警告：如果要使用ProGuard（或类似的工具）来混淆代码，就要确保不要重名这个属性所指定的方法，因为这样能够破坏功能。<br>这个属性在API级别11中被引入。</p>
</li>
<li><p><code>android:showAsAction</code><br>关键词。它定义这个项目作为操作栏中的操作项的显示时机和方式。只用Activity包含了一个ActionBar对象时，菜单项才能够作为操作项来显示。这个属性在API级别11中被引入，有效值如下：<br>值 说明<br><strong>ifRoom</strong> 如果有针对这个项目的空间，则只会把它放到操作栏中<br><strong>withText</strong> 操作项也要包含文本（通过android:title属性来定义的）。可以把这个值与其他的Flag设置放到一起，通过管道符“|”来分离它们。<br><strong>never</strong> 这个项目不会放到操作栏中<br><strong>always</strong><br>始终包这个项目放到操作栏中。要避免使用这个设置，除非在操作栏中始终显示这个项目是非常关键的。设置多个项目作为始终显示的操作项会导<br>致操作栏中其他的UI溢出。<br>icollapseActiionView 它定义了跟这个操作项关联的可折叠的操作View对象（用android:actionViewLayout来声明）。这个关键词在API级别14中被引入。</p>
</li>
<li><p><code>android:actionViewLayout</code><br>它引用一个布局资源，这个布局要用于操作窗口。更多的信息请参照“操作栏”开发指南。这个属性在API级别11中被引入。</p>
</li>
<li><p><code>android:actionViewClass</code><br>类名。它定义了操作窗口要使用的View对象的完整的类名。例如，“android.widget.SearchView”说明操作窗口要使用的SearchView类。<br>警告：如果要使用ProGuard（或类似的工具）来混淆代码，就要确保不要重名这个属性所指定的方法，因为这样能够破坏功能。<br>这个属性在API级别11中被引入。</p>
</li>
<li><p><code>android:actionProviderClass</code></p>
<p>类名，它是操作项目所使用的ActionProvider类的完整的类名。例如，“android.widget.ShareActionProvider”说明要使用<br>ShareActionProvider类。<br>警告：如果要使用ProGuard（或类似的工具）来混淆代码，就要确保不要重名这个属性所指定的方法，因为这样能够破坏功能。<br>这个属性在API级别14中被引入。</p>
</li>
<li><p><code>android:alphabeticShortcut</code><br>字符，定义一个字符快捷键</p>
</li>
<li><p><code>android:numericShortcut</code><br>数字值，定义一个数字快捷键</p>
</li>
<li><p><code>android:checkable</code><br>布尔值，如果菜单项是可以复选的，那么就设置为true。</p>
</li>
<li><p><code>android:checked</code><br>布尔值，如果复选菜单项默认是被选择的，那么就设置为true。</p>
</li>
<li><p><code>android:visible</code><br>布尔值，如果菜单项默认是可见的，那么就设置为true。</p>
</li>
<li><p><code>android:enabled</code><br>布尔值，如果菜单项目默认是可用的，那么就设置为true。</p>
</li>
<li><p><code>android:menuCategory</code><br>关键词。它的值对应了定义菜单项优先级的CATEGORE_*常量，有效值如下：<br>值 说明<br>Container 菜单项是容器的一部分<br>system 菜单项是由系统提供的。<br>secondary 提供给用户的辅助选择的菜单项（很少使用）<br>alternative 基于当前显示的数据来选择操作的菜单项。</p>
</li>
<li><p><code>android:orderInCategory</code><br>整数值，它定义菜单项在菜单组中的重要性的顺序。</p>
</li>
</ul>
<h4 id="Group"><a href="#Group" class="headerlink" title="Group"></a>Group</h4><p><code>&lt;group&gt;</code><br>它定义了一个菜单组（它是一个具有共同特征的菜单项的组合，如菜单项的可见性、可用性或可复选性）。它要包含多个<code>&lt;item&gt;</code>元素，而且必须是<code>&lt;menu&gt;</code>元素的子元素。</p>
<h4 id="属性（ATTRIBUTES）："><a href="#属性（ATTRIBUTES）：" class="headerlink" title="属性（ATTRIBUTES）："></a>属性（ATTRIBUTES）：</h4><ul>
<li><p><code>android:id</code><br>资源ID。它是资源的唯一标识。使用“@+id&#x2F;name”格式给菜单项创建一个新的资源ID。“+”号指示应该给这个元素创建一个新的资源ID。</p>
</li>
<li><p><code>android:checkableBeharior</code><br>关键词。针对菜单组的可复选行为的类型。有效值如下：<br>值 说明<br>none 没有可复选性<br>all 组内的所有的项目都被复选（使用复选框）<br>single 仅有一个项目能够被复选（使用单选按钮）</p>
</li>
<li><p><code>android:visible</code></p>
<p>布尔值，如果菜单组是可见的，就设置为true。</p>
</li>
<li><p><code>android:enabled</code><br>布尔值，如果菜单组是可用的，就设置为true。</p>
</li>
<li><p><code>android:menuCategory</code><br>关键词。它的值对应了Menu类的CATEGORY_*常量，定义了菜单组的优先级。有效值如下：<br>值 说明<br>container 菜单组是容器的一部分<br>system 菜单组是由系统提供的。<br>secondary 提供给用户的辅助选择的菜单组（很少使用）<br>alternative 基于当前显示的数据来选择操作的菜单组。</p>
</li>
<li><p><code>android:orderInCategory</code><br>整数值，它定义了分类中菜单项目的默认顺序。</p>
</li>
</ul>
<h3 id="使用XML定义menu"><a href="#使用XML定义menu" class="headerlink" title="使用XML定义menu"></a>使用XML定义menu</h3><p>理论上而言，使用XML和Java代码都可以创建Menu。但是在实际开发中，往往通过XML文件定义Menu，这样做有以下几个好处：</p>
<ol>
<li>使用XML可以获得更清晰的菜单结构</li>
<li>将菜单内容与应用的逻辑代码分离</li>
<li>可以使用应用资源框架，为不同的平台版本、屏幕尺寸创建最合适的菜单（如对drawable、string等系统资源的使用）</li>
</ol>
<p>要定义Menu，我们首先需要在res文件夹下新建menu文件夹，它将用于存储与Menu相关的所有XML文件。<br>我们可以使用<menu>、<item>、<group>三种XML元素定义Menu，下面简单介绍一下它们：</p>
<ol>
<li>“<menu>”是菜单项的容器。<menu>元素必须是该文件的根节点，并且能够包含一个或多个<item>和<group>元素。</li>
<li><item>是菜单项，用于定义MenuItem，可以嵌套<menu>元素，以便创建子菜单。</li>
<li><group>是<item>元素的不可见容器（可选）。可以使用它对菜单项进行分组，使一组菜单项共享可用性和可见性等属性。</li>
</ol>
<p>其中，<item>是我们主要需要关注的元素，它的常见属性如下：</p>
<ul>
<li>android:id：菜单项(MenuItem)的唯一标识</li>
<li>android:icon：菜单项的图标（可选）</li>
<li>android:title：菜单项的标题（必选）</li>
<li>android:showAsAction：指定菜单项的显示方式。常用的有ifRoom、never、always、withText，多个属性值之间可以使用|隔开。</li>
</ul>
<p>示例：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">menu</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:id</span>=<span class="string">&quot;@+id/option_normal_1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:icon</span>=<span class="string">&quot;@mipmap/ic_vpn_key_white_24dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:title</span>=<span class="string">&quot;普通菜单1&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:showAsAction</span>=<span class="string">&quot;ifRoom&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:id</span>=<span class="string">&quot;@+id/option_normal_2&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:icon</span>=<span class="string">&quot;@mipmap/ic_email_white_24dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:title</span>=<span class="string">&quot;普通菜单2&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:showAsAction</span>=<span class="string">&quot;always&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:id</span>=<span class="string">&quot;@+id/option_normal_3&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:icon</span>=<span class="string">&quot;@mipmap/ic_vpn_key_white_24dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:title</span>=<span class="string">&quot;普通菜单3&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:showAsAction</span>=<span class="string">&quot;withText|always&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:id</span>=<span class="string">&quot;@+id/option_normal_4&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:title</span>=<span class="string">&quot;普通菜单4&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:showAsAction</span>=<span class="string">&quot;never&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">menu</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>菜单栏中的菜单项会分为两个部分。一部分可以直接在菜单栏中看见，我们可以称之为常驻菜单；另一部分会被集中收纳到溢出菜单中（就是菜单栏右侧的小点状图标）。一般情况下，常驻菜单项以图标形式显示（需要定义icon属性），而溢出菜单项则以文字形式显示（通过title属性定义）。showAsAction的差异如下所示：</p>
<ol>
<li>always：菜单项永远不会被收纳到溢出菜单中，因此在菜单项过多的情况下可能超出菜单栏的显示范围。</li>
<li>ifRoom：在空间足够时，菜单项会显示在菜单栏中，否则收纳入溢出菜单中。</li>
<li>withText：无论菜单项是否定义了icon属性，都只会显示它的标题，而不会显示图标。使用这种方式的菜单项默认会被收纳入溢出菜单中。</li>
<li>never：菜单项永远只会出现在溢出菜单中。</li>
</ol>
<p>java加载代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onCreateOptionsMenu</span><span class="params">(Menu menu)</span> &#123;</span><br><span class="line">    MenuInflater inflater=getMenuInflater();</span><br><span class="line">    inflater.inflate(R.menu.option_menu_normal,menu);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">onOptionsItemSelected</span><span class="params">(MenuItem item)</span> &#123;</span><br><span class="line">    <span class="keyword">switch</span> (item.getItemId())&#123;</span><br><span class="line">        <span class="keyword">case</span> R.id.option_normal_1:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">case</span> R.id.option_normal_2:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">case</span> R.id.option_normal_3:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">case</span> R.id.option_normal_4:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">super</span>.onOptionsItemSelected(item);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以看见，我们在Activity中重写了onCreateOptionsMenu方法，在这个方法中完成加载Menu资源的操作，关键代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取MenuInflater</span></span><br><span class="line">MenuInflater inflater=getMenuInflater();</span><br><span class="line"><span class="comment">//加载Menu资源</span></span><br><span class="line">inflater.inflate(R.menu.option_menu_normal,menu);</span><br></pre></td></tr></table></figure>

<p>需要注意的是，这个方法必须返回true，否则Menu将不会显示。</p>
<h4 id="获取MenuInflater"><a href="#获取MenuInflater" class="headerlink" title="获取MenuInflater"></a>获取MenuInflater</h4><p><strong>LayoutInflater是用来实例化整个布局文件，而 MenuInflater是用来实例化Menu目录下的Menu布局文件的。</strong><br>传统意义上的菜单定义需要Override Activity的onCreateOptionsMenu，然后在里面调用Menu.add把Menu的一个个item加进来，比较复杂。而通过使用MenuInflater可以把Menu的构造直接放在Menu布局文件中，真现模型（Model）与视图（View）的分离，程序也看着清爽多了。</p>
<p>几点说明：</p>
<p>与LayoutInflater相比，MenuInflater的用法简单多了。首先，MenuInflater获取方法只有一种：Activity.getMenuInflater()；其次，MenuInflater.inflater(int menuRes,Menu menu)(这里不代表inflater就是static方法，可以这样调用，只是为了描述方便)的返回值是void型，这就决定了MenuInflater.inflater后就没有后续操作了。这说明通过这种方式把Menu布局文件写好后就不能在程序中动态修改了，而不像LayoutInflater.inflater那样，返回值是View型，可以进行后续的进一步操作。另外，MenuInflater只有一个void inflater(int menuRes,Menu menu)非构造方法。</p>
<h3 id="包含多级子菜单的选项菜单"><a href="#包含多级子菜单的选项菜单" class="headerlink" title="包含多级子菜单的选项菜单"></a>包含多级子菜单的选项菜单</h3><p><item>是可以嵌套<menu>的，而<menu>又是<item>的容器。因此，我们可以在应用中实现具有层级结构的子菜单。下面给出一个实际的例子：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">menu</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:id</span>=<span class="string">&quot;@+id/option_sub_file&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:title</span>=<span class="string">&quot;文件&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:showAsAction</span>=<span class="string">&quot;ifRoom&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">menu</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:id</span>=<span class="string">&quot;@+id/file_new&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:title</span>=<span class="string">&quot;新建&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:id</span>=<span class="string">&quot;@+id/file_save&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:title</span>=<span class="string">&quot;保存&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:id</span>=<span class="string">&quot;@+id/file_more&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:title</span>=<span class="string">&quot;更多&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">menu</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:id</span>=<span class="string">&quot;@+id/file_more_1&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">android:title</span>=<span class="string">&quot;更多1&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:id</span>=<span class="string">&quot;@+id/file_more_2&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">android:title</span>=<span class="string">&quot;更多2&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:id</span>=<span class="string">&quot;@+id/file_more_more&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">android:title</span>=<span class="string">&quot;更多更多&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">menu</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:id</span>=<span class="string">&quot;@+id/file_more_more_1&quot;</span></span></span><br><span class="line"><span class="tag">                                <span class="attr">android:title</span>=<span class="string">&quot;更多更多1&quot;</span>/&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">item</span> <span class="attr">android:id</span>=<span class="string">&quot;@+id/file_more_more_2&quot;</span></span></span><br><span class="line"><span class="tag">                                <span class="attr">android:title</span>=<span class="string">&quot;更多更多2&quot;</span>/&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">menu</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">menu</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">menu</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">menu</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="intent"><a href="#intent" class="headerlink" title="intent"></a>intent</h2><p>Intent中文意思指”意图”,按照Android的设计理念,A<strong>ndroid使用Intent来封装程序的”调用意图”,不管启动Activity、Service、BroadcastReceiver,Android都使用统一的Intent对象来封装这一”启动意图”。此外,Intent也是应用程序组件之间通信的重要媒介。</strong>在Android中指定的了具体是某个组件，那么就是显性意图；如果只是提出要求没有指定具体的某个人，在Android中即没有指定某个具体的组件，那么就是隐式意图；所有Intent页面跳转的方式又分为显示跳转和隐式跳转。</p>
<h2 id="Intent和三大组件"><a href="#Intent和三大组件" class="headerlink" title="Intent和三大组件"></a>Intent和三大组件</h2><p>Android应用程序包含三种重要组件:Activity、Service、BroadcastReceiver,应用程序采用一致的方式启动它们，都是依靠Intent来进行启动的,Intent中封装了程序要启动的意图。</p>
<blockquote>
<p>下面是Intent启动不同组件的部分方法:<br>　Activity组件:<br>　startActivity(Intent intent);startActivityForResult(Intent intent,int requestCode);<br>　Service组件:<br>　startService(Intent intent);bindService(Intent intent,ServiceConnection conn,int flags);<br>　BroadcastReceiver组件:<br>　sendBroadcast(Intent intent);sendOrderedBroadcast(Intent intent,String receiverPermission);</p>
</blockquote>
<h3 id="显式-Explicit-intent-和隐式-Implicit-intent-。"><a href="#显式-Explicit-intent-和隐式-Implicit-intent-。" class="headerlink" title="显式(Explicit intent)和隐式(Implicit intent)。"></a>显式(Explicit intent)和隐式(Implicit intent)。</h3><h4 id="一、显式（设置Component（组件））"><a href="#一、显式（设置Component（组件））" class="headerlink" title="一、显式（设置Component（组件））"></a>一、显式（设置Component（组件））</h4><p>显式，即直接指定需要打开的activity对应的类。<br>以下多种方式都是一样的，实际上都是设置Component直接指定Activity类的显式Intent，由MainActivity跳转到SecondActivity：<br>1、构造方法传入Component，最常用的方式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(<span class="built_in">this</span>, SecondActivity.class);  </span><br><span class="line">startActivity(intent);</span><br></pre></td></tr></table></figure>

<p>2、setComponent方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ComponentName</span> <span class="variable">componentName</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ComponentName</span>(<span class="built_in">this</span>, SecondActivity.class);  </span><br><span class="line"><span class="comment">// 或者ComponentName componentName = new ComponentName(this, &quot;com.example.app016.SecondActivity&quot;);  </span></span><br><span class="line"><span class="comment">// 或者ComponentName componentName = new ComponentName(this.getPackageName(), &quot;com.example.app016.SecondActivity&quot;);  </span></span><br><span class="line">  </span><br><span class="line"><span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>();  </span><br><span class="line">intent.setComponent(componentName);  </span><br><span class="line">startActivity(intent); </span><br></pre></td></tr></table></figure>

<p>3、setClass&#x2F;setClassName方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>();  </span><br><span class="line">  </span><br><span class="line">intent.setClass(<span class="built_in">this</span>, SecondActivity.class);  </span><br><span class="line"><span class="comment">// 或者intent.setClassName(this, &quot;com.example.app016.SecondActivity&quot;);  </span></span><br><span class="line"><span class="comment">// 或者intent.setClassName(this.getPackageName(), &quot;com.example.app016.SecondActivity&quot;);  </span></span><br><span class="line">startActivity(intent);  </span><br></pre></td></tr></table></figure>

<p>显式Intent通过Component可以直接设置需要调用的Activity类，可以唯一确定一个Activity，意图特别明确，所以是显式的。设置这个类的方式可以是Class对象（如SecondActivity.class），<br>也可以是包名加类名的字符串（如”com.example.app016.SecondActivity”）。这个很好理解，在应用程序内部跳转界面常用这种方式。  </p>
<h4 id="二、隐式"><a href="#二、隐式" class="headerlink" title="二、隐式"></a>二、隐式</h4><p>隐式，即不是像显式的那样直接指定需要调用的Activity，隐式不明确指定启动哪个Activity，而是设置Action、Data、Category，让系统来筛选出合适的Activity。<br>筛选是根据所有的<intent-filter>来筛选。<br>下面以Action为例：<br>AndroidManifest.xml文件中，首先被调用的Activity要有一个带有<intent-filter>并且包含<action>的Activity，设定它能处理的Intent，并且category设为”android.intent.category.DEFAULT”。<br>action的name是一个字符串，可以自定义，例如我在这里设成”abcdefg”：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">activity</span>  </span></span><br><span class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">&quot;com.example.app016.SecondActivity&quot;</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;abcdefg&quot;</span>/&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.category.DEFAULT&quot;</span>/&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">activity</span>&gt;</span>  </span><br></pre></td></tr></table></figure>

<p>然后，在MainActivity，才可以通过这个action name找到上面的Activity。<br>下面两种方式分别通过setAction和构造方法方法设置Action，两种方式效果相同。<br>1、setAction方法  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>();  </span><br><span class="line">intent.setAction(<span class="string">&quot;abcdefg&quot;</span>);  </span><br><span class="line">startActivity(intent);  </span><br></pre></td></tr></table></figure>

<p>2、构造方法直接设置Action  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(<span class="string">&quot;abcdefg&quot;</span>);  </span><br><span class="line">startActivity(intent); </span><br></pre></td></tr></table></figure>

<p>通过设置Action字符串，表明自己的意图，即我想干嘛，需要由系统解析，找到能够处理这个Intent的Activity并启动。<br>比如我想打电话，则可以设置Action为”android.intent.action.DIAL”字符串，表示打电话的意图，系统会找到能处理这个意图的Activity，例如调出拨号面板。</p>
<p>有几点需要注意：<br>1、 这个Activity其他应用程序也可以调用，<strong>只要使用这个Action字符串。这样应用程序之间交互就很容易了</strong>，例如手机QQ可以调用QQ空间，可以调用腾讯微博等。<br>因为如此，为了防止应用程序之间互相影响，一般命名方式是包名+Action名，例如这里命名”abcdefg”就很不合理了，就应该改成”com.example.app016.MyTest”。<br>2、 当然，你可以在自己的程序中调用其他程序的Action。<br>例如可以在自己的应用程序中调用拨号面板：  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(Intent.ACTION_DIAL);  </span><br><span class="line"><span class="comment">// 或者Intent intent = new Intent(&quot;android.intent.action.DIAL&quot;);  </span></span><br><span class="line"><span class="comment">// Intent.ACTION_DIAL是内置常量，值为&quot;android.intent.action.DIAL&quot;  </span></span><br><span class="line">startActivity(intent);  </span><br></pre></td></tr></table></figure>

<p>3、一个Activity可以处理多种Action 只要你的应用程序够牛逼，一个Activity可以看网页，打电话，发短信，发邮件。。。当然可以。 Intent的Action只要是其中之一，就可以打开这个Activity。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">activity  </span><br><span class="line">    android:name=&quot;com.example.app016.SecondActivity&quot;&gt;  </span><br><span class="line">    <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span>  </span><br><span class="line">        <span class="comment">&lt;!-- 可以处理下面三种Intent --&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;com.example.app016.SEND_EMAIL&quot;</span>/&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;com.example.app016.SEND_MESSAGE&quot;</span>/&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;com.example.app016.DAIL&quot;</span>/&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.category.DEFAULT&quot;</span> /&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">activity</span>&gt;</span>  </span><br></pre></td></tr></table></figure>

<p>对于一个Action字符串，系统有可能会找到一个Activity能处理这个Action，也有可能找到多个Activity，也可能一个都找不到。<br>1、找到一个Activity<br>很简单，直接打开这个Activity。这个不需要解释。<br>2、找到多个Acyivity<br>系统会提示从多个activity中选择一个打开。<br>例如我们自己开发一个拨号面板应用程序，可以设置activity的<intent-filter>中Action name为”android.intent.action.DIAL”，这样别的程序调用拨号器时，<br>用户可以从Android自带的拨号器和我们自己开发的拨号器中选择。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">activity</span>  </span></span><br><span class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">&quot;com.example.app016.SecondActivity&quot;</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.action.DIAL&quot;</span>/&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.category.DEFAULT&quot;</span> /&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">activity</span>&gt;</span>  </span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>这也就是当Android手机装上UC浏览器后，打开网页时会弹出选择Android自带浏览器还是UC浏览器，可能都会遇到过。<br>3、一个Activity都没找到<br>一个都没找到的话，程序就会出错，会抛出ActivityNotFoundException。比如随便写一个action字符串：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(<span class="string">&quot;asasasas&quot;</span>);  </span><br><span class="line">startActivity(intent);  </span><br></pre></td></tr></table></figure>

<p>所以应该注意try catch异常。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(<span class="string">&quot;asasasas&quot;</span>);  </span><br><span class="line"><span class="keyword">try</span>  </span><br><span class="line">&#123;  </span><br><span class="line">    startActivity(intent);  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="keyword">catch</span>(ActivityNotFoundException e)  </span><br><span class="line">&#123;  </span><br><span class="line">    Toast.makeText(<span class="built_in">this</span>, <span class="string">&quot;找不到对应的Activity&quot;</span>, Toast.LENGTH_SHORT).show();  </span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<p>或者也可以使用Intent的resolveActivity方法判断这个Intent是否能找到合适的Activity，如果没有，则不再startActivity，或者可以直接禁用用户操作的控件。  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(Intent.ACTION_DIAL);  </span><br><span class="line"><span class="keyword">if</span>(intent.resolveActivity(getPackageManager()) == <span class="literal">null</span>)  </span><br><span class="line">&#123;  </span><br><span class="line">    <span class="comment">// 设置控件不可用  </span></span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>

<p>注意resolveActivity方法返回值就是显式Intent上面讲到的ComponentName对象，一般情况下也就是系统找到的那个Activity。<br>但是如果有多个Activity可供选择的话，则返回的Component是com.android.internal.app.ResolverActivity，也就是用户选择Activity的那个界面对应的Activity，这里不再深究。</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Intent intent = <span class="keyword">new</span> <span class="constructor">Intent(Intent.ACTION_DIAL)</span>;  </span><br><span class="line">ComponentName componentName = intent.resolve<span class="constructor">Activity(<span class="params">getPackageManager</span>()</span>);  </span><br><span class="line"><span class="keyword">if</span>(componentName != null)  </span><br><span class="line">&#123;  </span><br><span class="line">    String className = componentName.get<span class="constructor">ClassName()</span>;  </span><br><span class="line">    <span class="module-access"><span class="module"><span class="identifier">Toast</span>.</span></span>make<span class="constructor">Text(<span class="params">this</span>, <span class="params">className</span>, Toast.LENGTH_SHORT)</span>.show<span class="literal">()</span>;  </span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<h3 id="四大属性"><a href="#四大属性" class="headerlink" title="四大属性"></a>四大属性</h3><p>Intent在Android中的核心作用就是“跳转”（Android中的跳转机制），同时可以携带必要的信息，将Intent作为一个信息桥梁。最熟悉的莫过于从一个活动跳转到另一个活动，然后返回到上一个活动。不过Intent的“跳转”作用不仅于此，Intent还可以在其他地方使用，比如在碎片中跳转，接受到一个广播后自动跳转。<br>　Intent主要有以下四个重要属性，它们分别为：</p>
<ul>
<li>Action：Action属性的值为一个字符串，它代表了系统中已经定义了一系列常用的动作。通过setAction()方法或在清单文件AndroidManifest.xml中设置。默认为：DEFAULT。</li>
<li>Data：Data通常是URI格式定义的操作数据。例如：tel:&#x2F;&#x2F; 。通过setData()方法设置。</li>
<li>Category：Category属性用于指定当前动作（Action）被执行的环境。通过addCategory()方法或在清单文件AndroidManifest.xml中设置。默认为：CATEGORY_DEFAULT。</li>
<li>Extras：Extras属性主要<strong>用于传递目标组件所需要的额外的数据</strong>。通过<code>putExtras()</code>方法设置。</li>
</ul>
<h4 id="Action：action表示该activity可以执行的动作。"><a href="#Action：action表示该activity可以执行的动作。" class="headerlink" title="Action：action表示该activity可以执行的动作。"></a>Action：action表示该activity可以执行的动作。</h4><ol>
<li>自定义action，匹配Activity的功能：<br>a.menifest中注册的Activity</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">activity</span></span></span><br><span class="line"><span class="tag">   <span class="attr">android:name</span>=<span class="string">&quot;.StudyActivity&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;com.czh.study&quot;</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>b.启动activity</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Intent intent = new Intent(&quot;com.czh.study&quot;);</span><br><span class="line">startActivity(intent)</span><br></pre></td></tr></table></figure>

<p>当intent启动Activity的时候会拿着action到menifest中查找是否有activity的acitoin和我相同，如果匹配成功（即intent中的action和中的action相同）就跳转到该actvitiy.</p>
<p>（如果匹配的2个activity的话，系统会给你一个选择框让你选择启动那么activity）</p>
<ol start="2">
<li>利用系统action，调用UI</li>
</ol>
<p>Action常用的值如下：</p>
<ul>
<li>ACTION_MAIN：Android Application的入口，每个Android应用必须且只能包含一个此类型的Action声明。　　</li>
<li>ACTION_VIEW：系统根据不同的Data类型，通过已注册的对应Application显示数据。</li>
<li>ACTION_EDIT：系统根据不同的Data类型，通过已注册的对应Application编辑示数据。　</li>
<li>ACTION_DIAL：打开系统默认的拨号程序，如果Data中设置了电话号码，则自动在拨号程序中输入此号码。　</li>
<li>ACTION_CALL：直接呼叫Data中所带的号码。　</li>
<li>ACTION_ANSWER：接听来电。　</li>
<li>ACTION_SEND：由用户指定发送方式进行数据发送操作。</li>
<li>ACTION_SENDTO：系统根据不同的Data类型，通过已注册的对应Application进行数据发送操作。　</li>
<li>ACTION_BOOT_COMPLETED：Android系统在启动完毕后发出带有此Action的广播（Broadcast）。　</li>
<li>ACTION_TIME_CHANGED：Android系统的时间发生改变后发出带有此Action的广播（Broadcast）。　</li>
<li>ACTION_PACKAGE_ADDED：Android系统安装了新的Application之后发出带有此Action的广播（Broadcast）。　</li>
<li>ACTION_PACKAGE_CHANGED：Android系统中已存在的Application发生改变之后（如应用更新操作）发出带有此Action的广播</li>
</ul>
<p>例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> 从google搜索内容 </span><br><span class="line"><span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(); </span><br><span class="line">intent.setAction(Intent.ACTION_WEB_SEARCH); </span><br><span class="line">intent.putExtra(SearchManager.QUERY,<span class="string">&quot;searchString&quot;</span>) </span><br><span class="line">startActivity(intent); </span><br><span class="line"></span><br><span class="line"><span class="number">2</span> 浏览网页 </span><br><span class="line"><span class="type">Uri</span> <span class="variable">uri</span> <span class="operator">=</span> Uri.parse(<span class="string">&quot;http://www.google.com&quot;</span>); </span><br><span class="line"><span class="type">Intent</span> <span class="variable">it</span>  <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(Intent.ACTION_VIEW,uri); </span><br><span class="line">startActivity(it); </span><br><span class="line"></span><br><span class="line"><span class="number">3</span> 显示地图 </span><br><span class="line"><span class="type">Uri</span> <span class="variable">uri</span> <span class="operator">=</span> Uri.parse(<span class="string">&quot;geo:38.899533,-77.036476&quot;</span>); </span><br><span class="line"><span class="type">Intent</span> <span class="variable">it</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(Intent.Action_VIEW,uri); </span><br><span class="line">startActivity(it); </span><br><span class="line"></span><br><span class="line"><span class="number">4</span> 路径规划 </span><br><span class="line"><span class="type">Uri</span> <span class="variable">uri</span> <span class="operator">=</span> Uri.parse(<span class="string">&quot;http://maps.google.com/maps?f=dsaddr=startLat%20startLng&amp;daddr=endLat%20endLng&amp;hl=en&quot;</span>); </span><br><span class="line"><span class="type">Intent</span> <span class="variable">it</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(Intent.ACTION_VIEW,URI); </span><br><span class="line">startActivity(it); </span><br><span class="line"></span><br><span class="line"><span class="number">5</span> 拨打电话 </span><br><span class="line"><span class="type">Uri</span> <span class="variable">uri</span> <span class="operator">=</span> Uri.parse(<span class="string">&quot;tel:xxxxxx&quot;</span>); </span><br><span class="line"><span class="type">Intent</span> <span class="variable">it</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(Intent.ACTION_DIAL, uri);   </span><br><span class="line">startActivity(it); </span><br><span class="line"></span><br><span class="line"><span class="number">6</span> 调用发短信的程序 </span><br><span class="line"><span class="type">Intent</span> <span class="variable">it</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(Intent.ACTION_VIEW);    </span><br><span class="line">it.putExtra(<span class="string">&quot;sms_body&quot;</span>, <span class="string">&quot;The SMS text&quot;</span>);    </span><br><span class="line">it.setType(<span class="string">&quot;vnd.android-dir/mms-sms&quot;</span>);    </span><br><span class="line">startActivity(it); </span><br><span class="line"></span><br><span class="line"><span class="number">7</span> 发送短信 </span><br><span class="line"><span class="type">Uri</span> <span class="variable">uri</span> <span class="operator">=</span> Uri.parse(<span class="string">&quot;smsto:0800000123&quot;</span>);    </span><br><span class="line"><span class="type">Intent</span> <span class="variable">it</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(Intent.ACTION_SENDTO, uri);    </span><br><span class="line">it.putExtra(<span class="string">&quot;sms_body&quot;</span>, <span class="string">&quot;The SMS text&quot;</span>);    </span><br><span class="line">startActivity(it); </span><br><span class="line">String body=<span class="string">&quot;this is sms demo&quot;</span>; </span><br><span class="line"><span class="type">Intent</span> <span class="variable">mmsintent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(Intent.ACTION_SENDTO, Uri.fromParts(<span class="string">&quot;smsto&quot;</span>, number, <span class="literal">null</span>)); </span><br><span class="line">mmsintent.putExtra(Messaging.KEY_ACTION_SENDTO_MESSAGE_BODY, body); </span><br><span class="line">mmsintent.putExtra(Messaging.KEY_ACTION_SENDTO_COMPOSE_MODE, <span class="literal">true</span>); </span><br><span class="line">mmsintent.putExtra(Messaging.KEY_ACTION_SENDTO_EXIT_ON_SENT, <span class="literal">true</span>); </span><br><span class="line">startActivity(mmsintent); </span><br><span class="line"></span><br><span class="line"><span class="number">8</span> 播放多媒体   </span><br><span class="line"><span class="type">Intent</span> <span class="variable">it</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(Intent.ACTION_VIEW); </span><br><span class="line"><span class="type">Uri</span> <span class="variable">uri</span> <span class="operator">=</span> Uri.parse(<span class="string">&quot;file:///sdcard/song.mp3&quot;</span>); </span><br><span class="line">it.setDataAndType(uri, <span class="string">&quot;audio/mp3&quot;</span>); </span><br><span class="line">startActivity(it); </span><br><span class="line"><span class="type">Uri</span> <span class="variable">uri</span> <span class="operator">=</span> Uri.withAppendedPath(MediaStore.Audio.Media.INTERNAL_CONTENT_URI, <span class="string">&quot;1&quot;</span>);    </span><br><span class="line"><span class="type">Intent</span> <span class="variable">it</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(Intent.ACTION_VIEW, uri);    </span><br><span class="line">startActivity(it); </span><br><span class="line"></span><br><span class="line"><span class="number">9</span> uninstall apk </span><br><span class="line"><span class="type">Uri</span> <span class="variable">uri</span> <span class="operator">=</span> Uri.fromParts(<span class="string">&quot;package&quot;</span>, strPackageName, <span class="literal">null</span>);    </span><br><span class="line"><span class="type">Intent</span> <span class="variable">it</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(Intent.ACTION_DELETE, uri);    </span><br><span class="line">startActivity(it); </span><br><span class="line"></span><br><span class="line"><span class="number">10</span> install apk </span><br><span class="line"><span class="type">Uri</span> <span class="variable">installUri</span> <span class="operator">=</span> Uri.fromParts(<span class="string">&quot;package&quot;</span>, <span class="string">&quot;xxx&quot;</span>, <span class="literal">null</span>); </span><br><span class="line">returnIt = <span class="keyword">new</span> <span class="title class_">Intent</span>(Intent.ACTION_PACKAGE_ADDED, installUri); </span><br><span class="line"></span><br><span class="line"><span class="number">11</span> 打开照相机 </span><br><span class="line">    &lt;<span class="number">1</span>&gt;<span class="type">Intent</span> <span class="variable">i</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(Intent.ACTION_CAMERA_BUTTON, <span class="literal">null</span>); </span><br><span class="line">           <span class="built_in">this</span>.sendBroadcast(i); </span><br><span class="line">     &lt;<span class="number">2</span>&gt;<span class="type">long</span> <span class="variable">dateTaken</span> <span class="operator">=</span> System.currentTimeMillis(); </span><br><span class="line">            <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> createName(dateTaken) + <span class="string">&quot;.jpg&quot;</span>; </span><br><span class="line">            fileName = folder + name; </span><br><span class="line">            <span class="type">ContentValues</span> <span class="variable">values</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ContentValues</span>(); </span><br><span class="line">            values.put(Images.Media.TITLE, fileName); </span><br><span class="line">            values.put(<span class="string">&quot;_data&quot;</span>, fileName); </span><br><span class="line">            values.put(Images.Media.PICASA_ID, fileName); </span><br><span class="line">            values.put(Images.Media.DISPLAY_NAME, fileName); </span><br><span class="line">            values.put(Images.Media.DESCRIPTION, fileName); </span><br><span class="line">            values.put(Images.ImageColumns.BUCKET_DISPLAY_NAME, fileName); </span><br><span class="line">            <span class="type">Uri</span> <span class="variable">photoUri</span> <span class="operator">=</span> getContentResolver().insert( </span><br><span class="line">                    MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values); </span><br><span class="line"></span><br><span class="line">            <span class="type">Intent</span> <span class="variable">inttPhoto</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(MediaStore.ACTION_IMAGE_CAPTURE); </span><br><span class="line">            inttPhoto.putExtra(MediaStore.EXTRA_OUTPUT, photoUri); </span><br><span class="line">            startActivityForResult(inttPhoto, <span class="number">10</span>); </span><br><span class="line"></span><br><span class="line"><span class="number">12</span> 从gallery选取图片 </span><br><span class="line">  <span class="type">Intent</span> <span class="variable">i</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(); </span><br><span class="line">            i.setType(<span class="string">&quot;image/*&quot;</span>); </span><br><span class="line">            i.setAction(Intent.ACTION_GET_CONTENT); </span><br><span class="line">            startActivityForResult(i, <span class="number">11</span>); </span><br><span class="line"></span><br><span class="line"><span class="number">13</span> 打开录音机 </span><br><span class="line">   <span class="type">Intent</span> <span class="variable">mi</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(Media.RECORD_SOUND_ACTION); </span><br><span class="line">            startActivity(mi); </span><br><span class="line"></span><br><span class="line"><span class="number">14</span> 显示应用详细列表       </span><br><span class="line"><span class="type">Uri</span> <span class="variable">uri</span> <span class="operator">=</span> Uri.parse(<span class="string">&quot;market://details?id=app_id&quot;</span>);         </span><br><span class="line"><span class="type">Intent</span> <span class="variable">it</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(Intent.ACTION_VIEW, uri);         </span><br><span class="line">startActivity(it);         </span><br><span class="line"><span class="comment">//where app_id is the application ID, find the ID          </span></span><br><span class="line"><span class="comment">//by clicking on your application on Market home          </span></span><br><span class="line"><span class="comment">//page, and notice the ID from the address bar      </span></span><br><span class="line"></span><br><span class="line">刚才找app id未果，结果发现用<span class="keyword">package</span> name也可以 </span><br><span class="line"><span class="type">Uri</span> <span class="variable">uri</span> <span class="operator">=</span> Uri.parse(<span class="string">&quot;market://details?id=&lt;packagename&gt;&quot;</span>); </span><br><span class="line">这个简单多了 </span><br><span class="line"></span><br><span class="line"><span class="number">15</span> 寻找应用       </span><br><span class="line"><span class="type">Uri</span> <span class="variable">uri</span> <span class="operator">=</span> Uri.parse(<span class="string">&quot;market://search?q=pname:pkg_name&quot;</span>);         </span><br><span class="line"><span class="type">Intent</span> <span class="variable">it</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(Intent.ACTION_VIEW, uri);         </span><br><span class="line">startActivity(it); </span><br><span class="line"><span class="comment">//where pkg_name is the full package path for an application       </span></span><br><span class="line"></span><br><span class="line"><span class="number">16</span> 打开联系人列表 </span><br><span class="line">            &lt;<span class="number">1</span>&gt;            </span><br><span class="line">           <span class="type">Intent</span> <span class="variable">i</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(); </span><br><span class="line">           i.setAction(Intent.ACTION_GET_CONTENT); </span><br><span class="line">           i.setType(<span class="string">&quot;vnd.android.cursor.item/phone&quot;</span>); </span><br><span class="line">           startActivityForResult(i, REQUEST_TEXT); </span><br><span class="line"></span><br><span class="line">            &lt;<span class="number">2</span>&gt; </span><br><span class="line">            <span class="type">Uri</span> <span class="variable">uri</span> <span class="operator">=</span> Uri.parse(<span class="string">&quot;content://contacts/people&quot;</span>); </span><br><span class="line">            <span class="type">Intent</span> <span class="variable">it</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(Intent.ACTION_PICK, uri); </span><br><span class="line">            startActivityForResult(it, REQUEST_TEXT); </span><br><span class="line"></span><br><span class="line"><span class="number">17</span> 打开另一程序 </span><br><span class="line"><span class="type">Intent</span> <span class="variable">i</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(); </span><br><span class="line">            <span class="type">ComponentName</span> <span class="variable">cn</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ComponentName</span>(<span class="string">&quot;com.yellowbook.android2&quot;</span>, </span><br><span class="line">                    <span class="string">&quot;com.yellowbook.android2.AndroidSearch&quot;</span>); </span><br><span class="line">            i.setComponent(cn); </span><br><span class="line">            i.setAction(<span class="string">&quot;android.intent.action.MAIN&quot;</span>); </span><br><span class="line">            startActivityForResult(i, RESULT_OK); </span><br><span class="line"></span><br><span class="line"><span class="number">18</span> 调用系统编辑添加联系人（高版本SDK有效）：</span><br><span class="line"><span class="type">Intent</span> <span class="variable">it</span> <span class="operator">=</span> newIntent(Intent.ACTION_INSERT_OR_EDIT);</span><br><span class="line">               it.setType(<span class="string">&quot;vnd.android.cursor.item/contact&quot;</span>);</span><br><span class="line">                <span class="comment">//it.setType(Contacts.CONTENT_ITEM_TYPE);</span></span><br><span class="line">                it.putExtra(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;myName&quot;</span>);</span><br><span class="line">               it.putExtra(android.provider.Contacts.Intents.Insert.COMPANY,  <span class="string">&quot;organization&quot;</span>);</span><br><span class="line">               it.putExtra(android.provider.Contacts.Intents.Insert.EMAIL,<span class="string">&quot;email&quot;</span>);</span><br><span class="line">                it.putExtra(android.provider.Contacts.Intents.Insert.PHONE,<span class="string">&quot;homePhone&quot;</span>);</span><br><span class="line">                it.putExtra(android.provider.Contacts.Intents.Insert.SECONDARY_PHONE,</span><br><span class="line">                               <span class="string">&quot;mobilePhone&quot;</span>);</span><br><span class="line">                it.putExtra(  android.provider.Contacts.Intents.Insert.TERTIARY_PHONE,</span><br><span class="line">                               <span class="string">&quot;workPhone&quot;</span>);</span><br><span class="line">               it.putExtra(android.provider.Contacts.Intents.Insert.JOB_TITLE,<span class="string">&quot;title&quot;</span>);</span><br><span class="line">                startActivity(it);</span><br><span class="line"></span><br><span class="line"><span class="number">19</span> 调用系统编辑添加联系人（全有效）：</span><br><span class="line"><span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> newIntent(Intent.ACTION_INSERT_OR_EDIT);</span><br><span class="line">           intent.setType(People.CONTENT_ITEM_TYPE);</span><br><span class="line">           intent.putExtra(Contacts.Intents.Insert.NAME, <span class="string">&quot;My Name&quot;</span>);</span><br><span class="line">           intent.putExtra(Contacts.Intents.Insert.PHONE, <span class="string">&quot;+1234567890&quot;</span>);</span><br><span class="line">           intent.putExtra(Contacts.Intents.Insert.PHONE_TYPE,Contacts.PhonesColumns.TYPE_MOBILE);</span><br><span class="line">           intent.putExtra(Contacts.Intents.Insert.EMAIL, <span class="string">&quot;com@com.com&quot;</span>);</span><br><span class="line">           intent.putExtra(Contacts.Intents.Insert.EMAIL_TYPE,                    Contacts.ContactMethodsColumns.TYPE_WORK);</span><br><span class="line">           startActivity(intent);</span><br></pre></td></tr></table></figure>

<h4 id="category"><a href="#category" class="headerlink" title="category"></a>category</h4><p>Category属性用于指定当前动作（Action）被执行的环境。</p>
<ol>
<li>自定义category ，匹配Activity的功能：<br>如果2个activity有相同的action，那么我们可以用不同的category来区分。<br>a.menifest中注册的Activity</li>
</ol>
  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">activity</span>  <span class="attr">android:name</span>=<span class="string">&quot;.StudyActivity&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;com.czh.study&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">&quot;com.czh.category.study&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.category.DEFAULT&quot;</span> /&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>b.启动activity</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Intent intent = new Intent(&quot;com.czh.study&quot;);</span><br><span class="line">intent.addCategory(&quot;com.czh.category.study&quot;)</span><br><span class="line">startActivity(intent);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>解释：<br>1.这里的category起到了匹配的作用，系统先匹配action，如果action，再匹配cagegory，如果有相同就跳转。<br>2.有一点大家需要注意：<br><category android:name="android.intent.category.DEFAULT" /><br>隐式启动中你必须要加上这一条。<br>但是也有例外：<br><intent-filter><br><action android:name="android.intent.action.MAIN" /><br><category android:name="android.intent.category.LAUNCHER" /><br></intent-filter><br>这一个就不需要要。</p>
</blockquote>
<ol start="2">
<li>利用系统category</li>
</ol>
<p>cagegory常用的值如下：</p>
<ul>
<li>CATEGORY_DEFAULT：Android系统中默认的执行方式，按照普通Activity的执行方式执行。　</li>
<li>CATEGORY_BROWSABLE：设置该组件可以使用浏览器启动。</li>
<li>CATEGORY_TAB：指定该Activity作为TabActivity的Tab页　</li>
<li>CATEGORY_LAUNCHER：设置该组件为在当前应用程序启动器中优先级最高的Activity，通常为入口ACTION_MAIN配合使用。　</li>
<li>CATEGORY_HOME：设置该组件为Home Activity。</li>
<li>CATEGORY_PREFERENCE：设置该组件为Preference。　</li>
<li>CATEGORY_GADGET：设置该组件可以内嵌到另外的Activity中。</li>
<li>CATEGORY_TEST：该Activity是一个测试</li>
<li>CATEGORY_CAR_MODE：设置该Activity可在车载环境下使用  </li>
<li>CATEGORY_CAR_DOCK：指定手机被插入汽车底座（硬件）时运行该Activity</li>
<li>CATEGORY_DESK_DOCK：指定手机被插入桌面底座（硬件）时运行该Activity</li>
</ul>
<h4 id="extras"><a href="#extras" class="headerlink" title="extras"></a>extras</h4><p>**extras属性主要用于传递目标组件所需要的额外的数据。通过putExtras()方法设置。 **<br>常用的系统extras</p>
<ul>
<li>EXTRA_BCC：存放邮件密送人地址的字符串数组。</li>
<li>EXTRA_CC：存放邮件抄送人地址的字符串数组。</li>
<li>EXTRA_EMAIL：存放邮件地址的字符串数组。</li>
<li>EXTRA_SUBJECT：存放邮件主题字符串。</li>
<li>EXTRA_TEXT：存放邮件内容。</li>
<li>EXTRA_KEY_EVENT：以KeyEvent对象方式存放触发Intent的按键。</li>
<li>EXTRA_PHONE_NUMBER：存放调用ACTION_CALL时的电话号码。<br>例如：</li>
</ul>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Intent intent  = <span class="keyword">new</span> <span class="constructor">Intent(<span class="string">&quot;com.czh.study&quot;</span>)</span>;</span><br><span class="line">                intent.put<span class="constructor">Extra(<span class="string">&quot;key&quot;</span>, <span class="string">&quot;value&quot;</span>)</span>;</span><br><span class="line">                start<span class="constructor">Activity(<span class="params">intent</span>)</span>;</span><br><span class="line"></span><br><span class="line">String value = get<span class="constructor">Intent()</span>.get<span class="constructor">StringExtra(<span class="string">&quot;key&quot;</span>)</span>;</span><br></pre></td></tr></table></figure>

<h4 id="data"><a href="#data" class="headerlink" title="data"></a>data</h4><ol>
<li>什么是uri：</li>
</ol>
<p>我们先得弄明白uri是什么，才能向下讲。<br>通用资源标志符（Universal Resource Identifier, 简称”URI”）。<br>Uri代表要操作的数据，Android上可用的每种资源 - 图像、视频片段等都可以用Uri来表示。换句话说：android系统中任何可用的资源（图像、视频、文件）都可以用uri表示。</p>
<ol start="2">
<li>uri讲解：</li>
</ol>
<ul>
<li>uri属性有以下4部分组成：android:scheme、android:host、android:port、android:path<br>其中host和port2个统称为authority。</li>
<li>要使authority（host和port）有意义，必须指定scheme；要使path有意义，必须使scheme和authority（host和port）有意义<br>举例说明：<br>URI为： file:&#x2F;&#x2F;com.android.jony.test:520&#x2F;mnt&#x2F;sdcard，我们拆分如下：<br>scheme–&gt;file:<br>host–&gt;com.android.jony.test<br>port–&gt;520<br>path–&gt;mnt&#x2F;sdcard<br>authority–&gt;com.android.jony.test:520<br>图片uri:<br>content:&#x2F;&#x2F;media&#x2F;external&#x2F;images&#x2F;media&#x2F;62026<br>tel:&#x2F;&#x2F;：号码数据格式，后跟电话号码。<br>mailto:&#x2F;&#x2F;：邮件数据格式，后跟邮件收件人地址。<br>smsto:&#x2F;&#x2F;：短息数据格式，后跟短信接收号码。<br>content:&#x2F;&#x2F;：内容数据格式，后跟需要读取的内容。<br>file:&#x2F;&#x2F;：文件数据格式，后跟文件路径。<br>market:&#x2F;&#x2F;search?q&#x3D;pname:pkgname：市场数据格式，在Google Market里搜索包名为pkgname的应用。<br>geo:&#x2F;&#x2F;latitude,longitude:经纬数据格式，在地图上显示经纬度指定的位置。</li>
</ul>
<p><strong>在intentfilter中指定data属性的实际目的是：要求接收的Intent中的data必须符合intent-filter中指定的data属性，这样达到反向限定Intent的作用。</strong></p>
<p>在AndroidManifest.xml 中进行如下设置：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:name</span>=<span class="string">&quot;.TestActivity&quot;</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span>  </span><br><span class="line">         <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;com.jony.test&quot;</span>/&gt;</span>  </span><br><span class="line">         <span class="tag">&lt;<span class="name">data</span> <span class="attr">android:scheme</span>=<span class="string">&quot;file&quot;</span>/&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">activity</span>&gt;</span>  </span><br></pre></td></tr></table></figure>

<p>启动该Activity的Intent必须进行如下设置：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>();  </span><br><span class="line"><span class="type">Uri</span> <span class="variable">uri</span> <span class="operator">=</span> Uri.parse(<span class="string">&quot;file://com.android.test:520/mnt/sdcard&quot;</span>);  </span><br><span class="line">intent.setData(uri)</span><br></pre></td></tr></table></figure>

<h4 id="data讲解："><a href="#data讲解：" class="headerlink" title="data讲解："></a>data讲解：</h4><p>1.data属性有以下5部分组成：android:scheme、android:host、android:port、android:path、android:mimeType<br>data的前四个属性构成了URI的组成部分，<br>mimeType设置了数据的类型<br>2.data元素组成的URI模型如下：<br>scheme:&#x2F;&#x2F;host:port&#x2F;path</p>
<h4 id="URI和intent-filter匹配："><a href="#URI和intent-filter匹配：" class="headerlink" title="URI和intent-filter匹配："></a>URI和intent-filter匹配：</h4><p>Intent中URI和intent-filter进行比较的时候只会进行部分的比较：<br>（1）当intent-filter中只设置了scheme，只会比较URI的scheme部分；<br>（2）当intent-filter中只设置了scheme和authority，那么只会匹配URI中的scheme和authority；<br>（3）当intent-filter中设置了scheme、authority和path，那么只会匹配URI中的scheme、authority、path；（path可以使用通配符进行匹配）<br>（4）当intent-filter中设置了mimeType，还会进行数据类型的匹配。</p>
<h2 id="intent和intentfilter"><a href="#intent和intentfilter" class="headerlink" title="intent和intentfilter"></a>intent和intentfilter</h2><p>如果一个 Intent 请求在一片数据上执行一个动作， Android 如何知道哪个应用程序（和组件）能用来响应这个请求呢？ </p>
<p><strong>Intent Filter就是 用来注册 Activity 、 Service 和 Broadcast Receiver 具有能在某种数据上执行一个动作的能力。</strong><br>使用 Intent Filter ，应用程序组件告诉 Android ，它们能为其它程序的组件的动作请求提供服务，包括同一个程序的组件、本地的或第三方的应用程序。</p>
<p>(1)IntentFilter的解释：</p>
<p>IntentFilter就是用于描述intent的各种属性， 比如action, category等</p>
<p>一些属性设置的例子：</p>
<action android:name="com.example.project.SHOW_CURRENT" />

<category android:name="android.intent.category.DEFAULT" />

<p>&lt;data android:mimeType&#x3D;”video&#x2F;mpeg” android:scheme&#x3D;”http” . . . &#x2F;&gt;</p>
<data android:mimeType="image/*" />

<data android:scheme="http" android:type="video/*" />

<p>(2)使用场景</p>
<p>activity的隐式启动和广播的匹配</p>
<p>(3)IntentFilter的匹配规则</p>
<p>IntentFilter的过滤信息有action,category,data.一个组件可以包含多个intent-filter,一个intent只要能完全匹配一组intent-filter即可成功的启动对应的组件。</p>
<p>1.action的匹配规则</p>
<p>intent-filter中必须包含一个action，intent信息中也必须指定一个action。intent-filter中可以有一个或者多个action，只要intent匹配其中的一个action即可。</p>
<p>2.category的匹配规则</p>
<p>intent中可以不指定category,在receiver的intent-filter中也可以不指定category,但是当要隐式启动一个activity是就必须指定android.intent.category.DEFAULT的category。否则系统也会报找不到指定的activity.当intent中指定了一个category时，就会在具有category的intent-filter中去找匹配组件。</p>
<p>3.data的匹配规则</p>
<p>data由两部分组成mimeType和URI.mimeType指媒体类型，比如image&#x2F;jpeg、audio&#x2F;*等。</p>
<p>URI的结构为</p>
<p><scheme>&#x2F;&#x2F;<host>:<port>&#x2F;[<path> | <pathPrefix>|<pathPattern>]</p>
<p>scheme :URI的模式，比如http、file、content等，如果URI中没有指定scheme,那么整个URI的其他参数无效。<br>host:URI的主机名，比如<a target="_blank" rel="noopener" href="http://www.baidu.com,如果host么有指定那么真个uri的其他参数无效./">www.baidu.com,如果host么有指定那么真个URI的其他参数无效。</a></p>
<p>port：URI的端口号。</p>
<p>path,pathPattern,pathPrefix:这三个参数指定路径信息</p>
<p>data的规则是如果inent-filter中描述了data,那么必须要在intent中描述匹配的data信息，如果intent-filter中没有描述data信息，那么intent中可以不指定data信息。data的规则中如果intent-filter只指定了mimeType,那么其默认的URI的scheme是file或者content。在intent中就必须同时设置mimeType和URI。如果intent-filter中有多组data,那么intent中只需要匹配一组即可。</p>
<h2 id="启动活动"><a href="#启动活动" class="headerlink" title="启动活动"></a>启动活动</h2><h3 id="Intent启动Activity"><a href="#Intent启动Activity" class="headerlink" title="Intent启动Activity"></a>Intent启动Activity</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(<span class="string">&quot;com.example.android.myapplication.ACTION_START&quot;</span>);       intent.addCategory(<span class="string">&quot;com.example.android.myapplication.MY_CATEGORY&quot;</span>;</span><br><span class="line">startActivity(intent);</span><br></pre></td></tr></table></figure>

<p>如果没有在manifest文件中添加</p>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">&quot;com.example.android.myapplication.MY_CATEGORY&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">category</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>就会出现如下异常信息</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">android<span class="selector-class">.content</span><span class="selector-class">.ActivityNotFoundException</span>: No Activity found to handle Intent &#123; act=com<span class="selector-class">.example</span><span class="selector-class">.android</span><span class="selector-class">.myapplication</span><span class="selector-class">.ACTION_START</span> cat=<span class="selector-attr">[com.example.android.myapplication.MY_CATEGORY]</span> &#125;</span><br></pre></td></tr></table></figure>

<p>如果不添加默认的</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">&quot;android.intent.category.DEFAULT&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">category</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>一样会遇到上面这个Error</p>
<blockquote>
<pre><code>     *Intent.ACTION_VIEW 系统内置的动作
         * Uri.parse()将一个网址字符串解析成一个 Uri 对象
         * setData()方法将这个 Uri 对象传递进去,指定当前 Intent正在操作的数据
         * */
         Intent intent = new Intent(Intent.ACTION_VIEW);
         intent.setData(Uri.parse(&quot;http://www.baidu.com&quot;));
         startActivity(intent);
</code></pre>
</blockquote>
<h3 id="Activity使用Intent传递数据"><a href="#Activity使用Intent传递数据" class="headerlink" title="Activity使用Intent传递数据"></a>Activity使用Intent传递数据</h3><p>向SecondActivity传递数据</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">data</span> <span class="operator">=</span> <span class="string">&quot;This data come from FirstActivity&quot;</span>;</span><br><span class="line"><span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(FirstActivity.<span class="built_in">this</span>,SecondActivity.class);</span><br><span class="line">intent.putExtra(<span class="string">&quot;howy&quot;</span>,data);</span><br><span class="line">startActivity(intent);</span><br><span class="line"><span class="comment">//  取出FirstActivity的数据</span></span><br><span class="line"><span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> getIntent();</span><br><span class="line"><span class="type">String</span> <span class="variable">dataFromFirstActivity</span> <span class="operator">=</span> intent.getStringExtra(<span class="string">&quot;howy&quot;</span>);</span><br><span class="line">Log.d(TAG, dataFromFirstActivity);</span><br></pre></td></tr></table></figure>

<h3 id="数据往返传递"><a href="#数据往返传递" class="headerlink" title="数据往返传递"></a>数据往返传递</h3><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">Intent intent = <span class="keyword">new</span> <span class="constructor">Intent(FirstActivity.<span class="params">this</span>,SecondActivity.<span class="params">class</span>)</span>;</span><br><span class="line">start<span class="constructor">ActivityForResult(<span class="params">intent</span>, 1)</span>;</span><br><span class="line"><span class="comment">//在SecondActivity设置数据回传</span></span><br><span class="line"> Intent intent = <span class="keyword">new</span> <span class="constructor">Intent()</span>;</span><br><span class="line">String data = <span class="string">&quot;This data from SecondActivity come to FirstActivity&quot;</span>;</span><br><span class="line">intent.put<span class="constructor">Extra(<span class="string">&quot;howy&quot;</span>, <span class="params">data</span>)</span>;</span><br><span class="line">set<span class="constructor">Result(RESULT_OK,<span class="params">intent</span>)</span>;</span><br><span class="line">finish<span class="literal">()</span>;</span><br><span class="line"><span class="comment">//在FirstActivity重写onActivityResult方法</span></span><br><span class="line"> protected void on<span class="constructor">ActivityResult(<span class="params">int</span> <span class="params">requestCode</span>, <span class="params">int</span> <span class="params">resultCode</span>, Intent <span class="params">data</span>)</span> &#123;</span><br><span class="line">        switch (requestCode) &#123;</span><br><span class="line">            case <span class="number">1</span>:</span><br><span class="line">                <span class="keyword">if</span> (resultCode<span class="operator"> == </span>RESULT_OK) &#123;</span><br><span class="line">                    String dataComeFromSecondActivity = data.get<span class="constructor">StringExtra(<span class="string">&quot;howy&quot;</span>)</span>;</span><br><span class="line">                    <span class="module-access"><span class="module"><span class="identifier">Log</span>.</span></span>d(TAG, dataComeFromSecondActivity);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (resultCode<span class="operator"> == </span>RESULT_CANCELED) &#123;</span><br><span class="line">                    String content = <span class="string">&quot;Data come form SecondActivity had been CANCELED&quot;</span>;</span><br><span class="line">                    String dataComeFromSecondActivity = data.get<span class="constructor">StringExtra(<span class="string">&quot;howy&quot;</span>)</span>;</span><br><span class="line">                    <span class="module-access"><span class="module"><span class="identifier">Log</span>.</span></span>d(TAG, <span class="string">&quot; &quot;</span> + dataComeFromSecondActivity);</span><br><span class="line">                    <span class="module-access"><span class="module"><span class="identifier">Log</span>.</span></span>d(TAG, content);</span><br><span class="line">                &#125;</span><br><span class="line">                break;</span><br><span class="line">            default:</span><br><span class="line">                String content = <span class="string">&quot;No data come form SecondActivity&quot;</span>;</span><br><span class="line">                <span class="module-access"><span class="module"><span class="identifier">Log</span>.</span></span>d(TAG, content);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>把startActivityForResult方法中的requestCode设置为2<br>就会打印No data come form SecondActivity，<br>在onActivityResult方法会先判断requestCode，再判断resultCode。<br>即使把resultCode设为RESULT_CANCELED也是可以回传数据的。</p>
<p>onBackPressed()方法按返回键回传数据。</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public void on<span class="constructor">BackPressed()</span> &#123;</span><br><span class="line">Intent intent = <span class="keyword">new</span> <span class="constructor">Intent()</span>;</span><br><span class="line">intent.put<span class="constructor">Extra(<span class="string">&quot;data_return&quot;</span>, <span class="string">&quot;Hello FirstActivity&quot;</span>)</span>;</span><br><span class="line">set<span class="constructor">Result(RESULT_OK, <span class="params">intent</span>)</span>;</span><br><span class="line">finish<span class="literal">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Activity生命周期"><a href="#Activity生命周期" class="headerlink" title="Activity生命周期"></a>Activity生命周期</h1><p>Android 使用任务（Task）来管理活动，一个任务就是一组存放在栈里的活动的集合，后进先出。<br><img src="/images/Activity/1930046-a086f191437566f4.webp"></p>
<h2 id="活动状态"><a href="#活动状态" class="headerlink" title="活动状态"></a>活动状态</h2><p>每个活动在其生命周期中最多可能会有四种状态。</p>
<ol>
<li>运行状态</li>
</ol>
<p>当一个活动位于返回栈的栈顶时，这时活动就处于运行状态。系统最不愿意回收的就是处于运行状态的活动，因为这会带来非常差的用户体验。</p>
<ol start="2">
<li>暂停状态</li>
</ol>
<p>当一个活动不再处于栈顶位置，但仍然可见时，这时活动就进入了暂停状态，比如对话框形式的活动只会占用屏幕中间的部分区域，处于暂停状态的活动仍然是完全存活着的，系统也不愿意去回收这种活动（因为它还是可见的，回收可见的东西都会在用户体验方面有不好的影响），只有在内存极低的情况下，系统才会去考虑回收这种活动。</p>
<ol start="3">
<li>停止状态</li>
</ol>
<p>当一个活动不再处于栈顶位置，并且完全不可见的时候，就进入了停止状态。系统仍然会为这种活动保存相应的状态和成员变量，但是这并不是完全可靠的，当其他地方需要内存时，处于停止状态的活动有可能会被系统回收。</p>
<ol start="4">
<li>销毁状态</li>
</ol>
<p>当一个活动从返回栈中移除后就变成了销毁状态。系统会最倾向于回收处于这种状态的活动，从而保证手机的内存充足。</p>
<h2 id="活动的生存期"><a href="#活动的生存期" class="headerlink" title="活动的生存期"></a>活动的生存期</h2><p>Activity 类定义了下面的回调。你可以不用实现所有的回调方法。当了解其中的每一个非常的重要，实现这些可以保证你的应用行为如用户所期望的那样。</p>
<ol>
<li>onCreate()</li>
</ol>
<p>它会在活动第一次被创建的时候调用。应该在这个方法中完成活动的初始化操作，比如说加载布局、绑定事件等。</p>
<ol start="2">
<li>onStart()</li>
</ol>
<p>这个方法在活动由不可见变为可见的时候调用。</p>
<ol start="3">
<li>onResume()</li>
</ol>
<p>这个方法在活动准备好和用户进行交互的时候调用。此时的活动一定位于返回栈的栈顶，并且处于运行状态。</p>
<ol start="4">
<li>onPause()</li>
</ol>
<p>这个方法在系统准备去启动或者恢复另一个活动的时候调用。我们通常会在这个方法中将一些消耗 CPU 的资源释放掉，以及保存一些关键数据，但这个方法的执行速度一定要快，不然会影响到新的栈顶活动的使用。</p>
<ol start="5">
<li>onStop()</li>
</ol>
<p>这个方法在活动完全不可见的时候调用。它和 onPause() 方法的主要区别在于，如果启动的新活动是一个对话框式的活动，那么 onPause() 方法会得到执行，而 onStop() 方法并不会执行。</p>
<ol start="6">
<li>onDestroy()</li>
</ol>
<p>这个方法在活动被销毁之前调用，之后活动的状态将变为销毁状态。</p>
<ol start="7">
<li>onRestart()</li>
</ol>
<p>这个方法在活动由停止状态变为运行状态之前调用，也就是活动被重新启动了。</p>
<hr>
<p>以上七个方法中除了onRestart()方法，其他都是两两相对的，从而又可以将活动分为三种生存期。</p>
<ol>
<li>完整生存期</li>
</ol>
<p>活动在 onCreate() 方法和 onDestroy() 方法之间所经历的，就是完整生存期。一般情况下，一个活动会在 onCreate() 方法中完成各种初始化操作，而在 onDestroy() 方法中完成释放内存的操作。</p>
<ol start="2">
<li>可见生存期</li>
</ol>
<p>活动在 onStart() 方法和 onStop() 方法之间所经历的，就是可见生存期。在可见生存期内，活动对于用户总是可见的，即便有可能无法和用户进行交互。我们可以通过这两个方法，合理地管理那些对用户可见的资源。比如在 onStart() 方法中对资源进行加载，而在 onStop() 方法中对资源进行释放，从而保证处于停止状态的活动不会占用过多内存。</p>
<ol start="3">
<li>前台生存期</li>
</ol>
<p>活动在 onResume() 方法和 onPause() 方法之间所经历的，就是前台生存期。在前台生存期内，活动总是处于运行状态的，此时的活动是可以和用户进行相互的，我们平时看到和接触最多的也这个状态下的活动。</p>
<h2 id="保存临时数据"><a href="#保存临时数据" class="headerlink" title="保存临时数据"></a>保存临时数据</h2><p>当一个活动进入到了停止状态，是有可能被系统回收的。Activity 中还提供了一个 onSaveInstanceState() 回调方法，这个方法会保证一定在活动被回收之前调用，因此我们可以通过这个方法来解决活动被回收时临时数据得不到保存的问题。</p>
<ol>
<li>保存临时数据</li>
</ol>
<p>onSaveInstanceState() 方法会携带一个Bundle 类型的参数，Bundle 提供了一系列的方法用于保存数据，键值对方式。如 putString()、putInt() 等。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onSaveInstanceState</span><span class="params">(Bundle outState)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>.onSaveInstanceState(outState);</span><br><span class="line">    <span class="type">String</span> <span class="variable">tempData</span> <span class="operator">=</span> <span class="string">&quot;Something you just typed&quot;</span>;</span><br><span class="line">    outState.putString(<span class="string">&quot;data_key&quot;</span>, tempData);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>恢复临时数据</li>
</ol>
<p>onCreate()方法其实也有一个 Bundle 类型的参数。这个参数在一般情况下都是 null，但是当活动被系统回收之前有通过 onSaveInstanceState() 方法来保存数据的话，这个参数就会带有之前所保存的全部数据，只需要再通过相应的取值方法将数据取出即可。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">    setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (savedInstanceState != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">tempData</span> <span class="operator">=</span> savedInstanceState.getString(<span class="string">&quot;data_key&quot;</span>);</span><br><span class="line">        Log.d(TAG, tempData);</span><br><span class="line">    &#125;</span><br><span class="line">......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Intent 还可以结合 Bundle 一起用于传递数据的，首先可以把需要传递的数据都保存在 Bundle 对象中，然后再将 Bundle 对象存放在 Intent 里。到了目标活动之后先从 Intent 中取出 Bundle，再从Bundle中一一取出数据。</p>
<h1 id="活动的四种启动模式"><a href="#活动的四种启动模式" class="headerlink" title="活动的四种启动模式"></a>活动的四种启动模式</h1><p>安卓中的活动（Activity）有四种不同的启动模式，这四种模式分别是：standard，SingleTop，SingleTask，SingleInstance。这四种模式中，standard模式是默认的模式，其他三个想要使用的话，要在AndroidMainFest中进行修改。(例如：<android launchMode ="singleTop">)</p>
<h2 id="standard模式："><a href="#standard模式：" class="headerlink" title="standard模式："></a>standard模式：</h2><p>系统默认的启动模式。<br>Android是使用返回栈来管理活动的，在standard模式下，每当启动一个新的活动，它就会在返回栈中入栈，并处于栈顶的位置。<br>对于使用standard模式的活动，系统不会在乎这个活动是否已经在返回栈中存在，而是每次启动活动都会创建该活动的一个新的实例。 </p>
<h3 id="standard模式原理示意图："><a href="#standard模式原理示意图：" class="headerlink" title="standard模式原理示意图："></a>standard模式原理示意图：</h3><p><img src="https://images2015.cnblogs.com/blog/892430/201605/892430-20160525234337819-1224164299.png">  </p>
<blockquote>
<p>这是最基础的模式，在这种模式中，当你进入一个活动，这个活动就会创造一个实例，出现在返回栈的最顶层，上一个你离开的活动就会被压在下面，（注：返回栈是Android管理活动的地方，出现在界面上的活动就在最上面，再出现新的就一层层往下压。）当你无限的点击进入下一个界面，你的每一个活动都会在返回栈中往下压。如果你点击返回上一个的活动，最顶层的活动就会消失，第二层的就会上来，如果你要退出这个应用，要把返回栈中的所有活动都取消掉，才能退出。如果你用一个极端的例子，不停地从这个活动进入同一个活动，你点击了十次，就要返回十次才能退出程序，因为你在返回栈中创造了十个相同的实例，尽管活动是一样的。</p>
</blockquote>
<h2 id="SingleTop模式："><a href="#SingleTop模式：" class="headerlink" title="SingleTop模式："></a>SingleTop模式：</h2><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">android:</span>launchMode=<span class="string">&quot;singleTop&quot;</span></span><br></pre></td></tr></table></figure>

<p>在SingleTop模式中， 会检查在返回栈栈顶是不是你要启动的活动，如果是的话，他就不会启动，直接使用。<br>所以SingleTop不会出现standard中的情况需要点击多次才能退出程序，它只需要点击一次就可以了。  </p>
<h3 id="singleTop模式原理示意图："><a href="#singleTop模式原理示意图：" class="headerlink" title="singleTop模式原理示意图："></a>singleTop模式原理示意图：</h3><p><img src="/images/Activity/892430-20160525234453803-474351507.png"></p>
<h2 id="SingleTask模式："><a href="#SingleTask模式：" class="headerlink" title="SingleTask模式："></a>SingleTask模式：</h2><p>当活动的启动模式指定为singleTask，每次启动该活动时，首先会在返回栈中检查是否存在该活动的实例，如果发现已经存在就直接使用该实例，并把这个活动之上的所有活动统统出栈，如果没有发现就会创建一个新的活动实例。  </p>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">android:</span>launchMode=<span class="string">&quot;singleTask&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="singleTask原理示意图："><a href="#singleTask原理示意图：" class="headerlink" title="singleTask原理示意图："></a>singleTask原理示意图：</h3><p><img src="/images/Activity/892430-20160525234548225-112784357.png"></p>
<h2 id="singleInstance"><a href="#singleInstance" class="headerlink" title="singleInstance"></a>singleInstance</h2><p>这种模式是最特殊的模式，这种模式是为了让不同的app之间可以共享同一个活动，如果你的app想让别的app调用你的某一个界面，就可以用这种模式，这种模式会为你想共享的界面单独创造出一个单独使用的返回栈，不会与别的返回栈共同使用。  </p>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">android:</span>launchMode=<span class="string">&quot;singleInstance&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="singleInstance模式示意图"><a href="#singleInstance模式示意图" class="headerlink" title="singleInstance模式示意图:"></a>singleInstance模式示意图:</h3><p><img src="/images/Activity/892430-20160526091149569-982478014.png"></p>
<h1 id="数据适配器"><a href="#数据适配器" class="headerlink" title="数据适配器"></a>数据适配器</h1><h2 id="什么是数据适配器？"><a href="#什么是数据适配器？" class="headerlink" title="什么是数据适配器？"></a>什么是数据适配器？</h2><p>下图展示了数据源、适配器、ListView等数据展示控件之间的关系。我们知道，数据源是各种各样的，而ListView所展示数据的格式则是有一定的要求的。数据适配器正是建立了数据源与ListView之间的适配关系，将数据源转换为ListView能够显示的数据格式，从而将数据的来源与数据的显示进行解耦，降低程序的耦合性。这也体现了Android的适配器模式的使用。对于ListView、GridView等数据展示控件有多种数据适配器，本文讲解最通用的数据适配器——BaseAdapter。<br><img src="/images/Activity/834105-20151220133119758-1793380210.jpg">  </p>
<h2 id="ListView的显示与缓存机制"><a href="#ListView的显示与缓存机制" class="headerlink" title="ListView的显示与缓存机制"></a>ListView的显示与缓存机制</h2><p>我们知道，ListView、GridView等控件可以展示大量的数据信息。假如下图中的ListView可以展示100条信息，但是屏幕的尺寸是有限的，一屏幕只能显示下图中的7条。当向上滑动ListView的时候，item1被滑出了屏幕区域，那么系统就会将item1回收到Recycler中，即View缓冲池中，而将要显示的item8则会从缓存池中取出布局文件，并重新设置好item8需要显示的数据，并放入需要显示的位置。这就是ListView的缓冲机制，总结起来就是一句话：需要时才显示，显示完就被会收到缓存。ListView，GridView等数据显示控件通过这种缓存机制可以极大的节省系统资源。<br><img src="/images/Activity/834105-20151220141452867-684265253.png">  </p>
<h2 id="BaseAdapter"><a href="#BaseAdapter" class="headerlink" title="BaseAdapter"></a>BaseAdapter</h2><p>使用BaseAdapter比较简单，主要是通过继承此类来实现BaseAdapter的四个方法：</p>
<p>public int getCount(): 适配器中数据集的数据个数；</p>
<p>public Object getItem(int position): 获取数据集中与索引对应的数据项；</p>
<p>public long getItemId(int position): 获取指定行对应的ID；</p>
<p>public View getView(int position,View convertView,ViewGroup parent): 获取没一行Item的显示内容。  </p>
<p>下面通过一个简单示例演示如何使用BaseAdapter。</p>
<p>1.创建布局文件</p>
<p>activity_main.xml  </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">RelativeLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;com.cbt.learnbaseadapter.MainActivity&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">ListView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/lv_main&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>item.xml （ListView中每条信息的显示布局）</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">RelativeLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/iv_image&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:src</span>=<span class="string">&quot;@mipmap/ic_launcher&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;60dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;60dp&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_title&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;30dp&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_toEndOf</span>=<span class="string">&quot;@id/iv_image&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;Title&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;25sp&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/tv_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_toEndOf</span>=<span class="string">&quot;@id/iv_image&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_below</span>=<span class="string">&quot;@id/tv_title&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;Content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:textSize</span>=<span class="string">&quot;20sp&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2.创建数据源</p>
<p>ItemBean.java   </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">package com.cbt.learnbaseadapter;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Created by caobotao on 15/12/20.</span><br><span class="line"> */</span><br><span class="line">public class ItemBean &#123;</span><br><span class="line">    public int itemImageResId;//图像资源ID</span><br><span class="line">    public String itemTitle;//标题</span><br><span class="line">    public String itemContent;//内容</span><br><span class="line"></span><br><span class="line">    public ItemBean(int itemImageResId, String itemTitle, String itemContent) &#123;</span><br><span class="line">        this.itemImageResId = itemImageResId;</span><br><span class="line">        this.itemTitle = itemTitle;</span><br><span class="line">        this.itemContent = itemContent;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p>通过此Bean类，我们就将要显示的数据与ListView的布局内容一一对应了，每个Bean对象对应ListView的一条数据。这种方法在ListView中使用的非常广泛。</p>
<p>MainActivity.java  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cbt.learnbaseadapter;</span><br><span class="line"><span class="keyword">import</span> android.support.v7.app.AppCompatActivity;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.widget.ListView;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line">    ListView mListView ;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        List&lt;ItemBean&gt; itemBeanList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;i &lt; <span class="number">20</span>; i ++)&#123;</span><br><span class="line">            itemBeanList.add(<span class="keyword">new</span> <span class="title class_">ItemBean</span>(R.mipmap.ic_launcher, <span class="string">&quot;标题&quot;</span> + i, <span class="string">&quot;内容&quot;</span> + i));</span><br><span class="line">        &#125;</span><br><span class="line">        mListView = (ListView) findViewById(R.id.lv_main);</span><br><span class="line">        <span class="comment">//设置ListView的数据适配器</span></span><br><span class="line">        mListView.setAdapter(<span class="keyword">new</span> <span class="title class_">MyAdapter</span>(<span class="built_in">this</span>,itemBeanList));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>3.创建BaseAdapter</p>
<p>通过上面的讲解，我们知道继承BaseAdapter需要重新四个方法：getCount、getItem、getItemId、getView。其中前三个都比较简单，而getView稍微比较复杂。通常重写getView有三种方式，这三种方法性能方面有很大的不同。接下来我们使用此三种方式分别实现MyAdapter。<br>第一种：逗比式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cbt.learnbaseadapter;</span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.view.*;</span><br><span class="line"><span class="keyword">import</span> android.widget.BaseAdapter;</span><br><span class="line"><span class="keyword">import</span> android.widget.ImageView;</span><br><span class="line"><span class="keyword">import</span> android.widget.TextView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by caobotao on 15/12/20.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAdapter</span> <span class="keyword">extends</span> <span class="title class_">BaseAdapter</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> List&lt;ItemBean&gt; mList;<span class="comment">//数据源</span></span><br><span class="line">    <span class="keyword">private</span> LayoutInflater mInflater;<span class="comment">//布局装载器对象</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 通过构造方法将数据源与数据适配器关联起来</span></span><br><span class="line">    <span class="comment">// context:要使用当前的Adapter的界面对象</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyAdapter</span><span class="params">(Context context, List&lt;ItemBean&gt; list)</span> &#123;</span><br><span class="line">        mList = list;</span><br><span class="line">        mInflater = LayoutInflater.from(context);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="comment">//ListView需要显示的数据数量</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCount</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> mList.size();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="comment">//指定的索引对应的数据项</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getItem</span><span class="params">(<span class="type">int</span> position)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> mList.get(position);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="comment">//指定的索引对应的数据项ID</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">getItemId</span><span class="params">(<span class="type">int</span> position)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> position;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="comment">//返回每一项的显示内容</span></span><br><span class="line">    <span class="keyword">public</span> View <span class="title function_">getView</span><span class="params">(<span class="type">int</span> position, View convertView, ViewGroup parent)</span> &#123;</span><br><span class="line">        <span class="comment">//将布局文件转化为View对象</span></span><br><span class="line">        <span class="type">View</span> <span class="variable">view</span> <span class="operator">=</span> mInflater.inflate(R.layout.item,<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 找到item布局文件中对应的控件 </span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">ImageView</span> <span class="variable">imageView</span> <span class="operator">=</span> (ImageView) view.findViewById(R.id.iv_image);</span><br><span class="line">        <span class="type">TextView</span> <span class="variable">titleTextView</span> <span class="operator">=</span> (TextView) view.findViewById(R.id.tv_title);</span><br><span class="line">        <span class="type">TextView</span> <span class="variable">contentTextView</span> <span class="operator">=</span> (TextView) view.findViewById(R.id.tv_content);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取相应索引的ItemBean对象</span></span><br><span class="line">        <span class="type">ItemBean</span> <span class="variable">bean</span> <span class="operator">=</span> mList.get(position);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 设置控件的对应属性值 </span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        imageView.setImageResource(bean.itemImageResId);</span><br><span class="line">        titleTextView.setText(bean.itemTitle);</span><br><span class="line">        contentTextView.setText(bean.itemContent);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> view;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>为什么称这种getView的方式是逗比式呢？</p>
<p>通过上面讲解，我们知道ListView、GridView等数据展示控件有缓存机制，而这种方式每次调用getView时都是通过inflate创建一个新的View对象，然后在此view中通过findViewById找到对应的控件，完全没有利用到ListView的缓存机制。这种方式没有经过优化处理，对资源造成了极大的浪费，效率是很低的。<br>第二种：普通式  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> View <span class="title function_">getView</span><span class="params">(<span class="type">int</span> position, View convertView, ViewGroup parent)</span> &#123;<span class="comment">//如果view未被实例化过，缓存池中没有对应的缓存</span></span><br><span class="line">        <span class="keyword">if</span> (convertView == <span class="literal">null</span>) &#123;</span><br><span class="line">            convertView = mInflater.inflate(R.layout.item,<span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 找到item布局文件中对应的控件</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">ImageView</span> <span class="variable">imageView</span> <span class="operator">=</span> (ImageView) convertView.findViewById(R.id.iv_image);</span><br><span class="line">        <span class="type">TextView</span> <span class="variable">titleTextView</span> <span class="operator">=</span> (TextView) convertView.findViewById(R.id.tv_title);</span><br><span class="line">        <span class="type">TextView</span> <span class="variable">contentTextView</span> <span class="operator">=</span> (TextView) convertView.findViewById(R.id.tv_content);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取相应索引的ItemBean对象</span></span><br><span class="line">        <span class="type">ItemBean</span> <span class="variable">bean</span> <span class="operator">=</span> mList.get(position);</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 设置控件的对应属性值</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        imageView.setImageResource(bean.itemImageResId);</span><br><span class="line">        titleTextView.setText(bean.itemTitle);</span><br><span class="line">        contentTextView.setText(bean.itemContent);</span><br><span class="line">        <span class="keyword">return</span> convertView;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>此方式充分使用了ListView的缓存机制，如果view没有缓存才创建新的view，效率相比于逗比式提升了很多。但是，当ListView很复杂时，每次调用findViewById都会去遍历视图树，所以findViewById是很消耗时间的，我们应该尽量避免使用findViewById来达到进一步优化的目的。<br>第三种：文艺式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> View <span class="title function_">getView</span><span class="params">(<span class="type">int</span> position, View convertView, ViewGroup parent)</span> &#123;</span><br><span class="line">    ViewHolder viewHolder;</span><br><span class="line">    <span class="comment">//如果view未被实例化过，缓存池中没有对应的缓存</span></span><br><span class="line">    <span class="keyword">if</span> (convertView == <span class="literal">null</span>) &#123;</span><br><span class="line">        viewHolder = <span class="keyword">new</span> <span class="title class_">ViewHolder</span>();</span><br><span class="line">        <span class="comment">// 由于我们只需要将XML转化为View，并不涉及到具体的布局，所以第二个参数通常设置为null</span></span><br><span class="line">        convertView = mInflater.inflate(R.layout.item, <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//对viewHolder的属性进行赋值</span></span><br><span class="line">        viewHolder.imageView = (ImageView) convertView.findViewById(R.id.iv_image);</span><br><span class="line">        viewHolder.title = (TextView) convertView.findViewById(R.id.tv_title);</span><br><span class="line">        viewHolder.content = (TextView) convertView.findViewById(R.id.tv_content);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//通过setTag将convertView与viewHolder关联</span></span><br><span class="line">        convertView.setTag(viewHolder);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;<span class="comment">//如果缓存池中有对应的view缓存，则直接通过getTag取出viewHolder</span></span><br><span class="line">        viewHolder = (ViewHolder) convertView.getTag();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 取出bean对象</span></span><br><span class="line">    <span class="type">ItemBean</span> <span class="variable">bean</span> <span class="operator">=</span> mList.get(position);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置控件的数据</span></span><br><span class="line">    viewHolder.imageView.setImageResource(bean.itemImageResId);</span><br><span class="line">    viewHolder.title.setText(bean.itemTitle);</span><br><span class="line">    viewHolder.content.setText(bean.itemContent);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> convertView;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ViewHolder用于缓存控件，三个属性分别对应item布局文件的三个控件</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ViewHolder</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> ImageView imageView;</span><br><span class="line">    <span class="keyword">public</span> TextView title;</span><br><span class="line">    <span class="keyword">public</span> TextView content;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>此方式不仅利用了ListView的缓存机制，而且使用ViewHolder类来实现显示数据视图的缓存，避免多次调用findViewById来寻找控件，以达到优化程序的目的。所以，大家在平时的开发中应当尽量使用这种方式进行getView的实现。</p>
<p>总结一下用ViewHolder优化BaseAdapter的整体步骤：</p>
<blockquote>
<p>1 创建bean对象，用于封装数据；</p>
</blockquote>
<blockquote>
<p>2 在构造方法中初始化的数据List；</p>
</blockquote>
<blockquote>
<p>3 创建ViewHolder类，创建布局映射关系；</p>
</blockquote>
<blockquote>
<p>4 判断convertView，为空则创建，并设置tag，不为空则通过tag取出ViewHolder；</p>
</blockquote>
<blockquote>
<p>5 给ViewHolder的控件设置数据。</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://rshawshank.github.io/2020/01/13/android_Activity/" data-id="claaf6qhw004etkuphg1eaush" data-title="Activity" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/activity/" rel="tag">activity</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/android/" rel="tag">android</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2020/01/13/android_Adapter/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">前一篇</strong>
      <div class="article-nav-title">
        
          Adapter
        
      </div>
    </a>
  
  
    <a href="/2020/01/02/Algorithm_%E6%9C%80%E5%A4%A7%E6%B5%81/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">后一篇</strong>
      <div class="article-nav-title">最大流</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/C/">C++</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/android/">android</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/java/">java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/javaweb/">javaweb</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/oracle%E6%95%B0%E6%8D%AE%E5%BA%93/">oracle数据库</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/">函数式编程</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/">动态规划</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">操作系统</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">数据结构</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E7%AE%97%E6%B3%95/">算法</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E7%BB%84%E5%8E%9F%E5%8E%9F%E7%90%86/">组原原理</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/">组成原理</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/">编译原理</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84/">计算机系统结构</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E8%B5%84%E6%BA%90%E5%88%86%E9%85%8D/">资源分配</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E9%BB%91%E4%B9%A6/">黑书</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B7%A5%E4%BD%9C%E7%AC%94%E8%AE%B0/">工作笔记</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%AF%95%E8%AE%BE/">毕设</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/">读书笔记</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/" rel="tag">C++</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CPU/" rel="tag">CPU</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/KMP/" rel="tag">KMP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Leetcode/" rel="tag">Leetcode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/activity/" rel="tag">activity</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/adapter/" rel="tag">adapter</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/android/" rel="tag">android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/broadcast/" rel="tag">broadcast</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/drawable/" rel="tag">drawable</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/" rel="tag">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javaweb/" rel="tag">javaweb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/layout/" rel="tag">layout</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/leetcode/" rel="tag">leetcode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/oracle/" rel="tag">oracle</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/socket/" rel="tag">socket</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%BB%E5%AD%98%E7%AE%A1%E7%90%86/" rel="tag">主存管理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/" rel="tag">函数式编程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%86%E6%B2%BB%E7%AD%96%E7%95%A5/" rel="tag">分治策略</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" rel="tag">动态规划</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8D%95%E5%85%83%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84/" rel="tag">单元最短路径</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8F%8C%E6%8C%87%E9%92%88%E6%B3%95/" rel="tag">双指针法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9F%BA%E6%9C%AC%E5%9B%BE%E7%AE%97%E6%B3%95/" rel="tag">基本图算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/" rel="tag">处理机调度</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AD%97%E7%AC%A6%E5%8C%B9%E9%85%8D/" rel="tag">字符匹配</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="tag">学习笔记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%80%BB%E7%BA%BF/" rel="tag">总线</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%89%80%E6%9C%89%E7%BB%93%E7%82%B9%E5%AF%B9%E7%9A%84%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84/" rel="tag">所有结点对的最短路径</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8E%92%E5%BA%8F/" rel="tag">排序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" rel="tag">操作系统</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%BF%B0/" rel="tag">操作系统概述</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">数据库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag">数据结构</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/" rel="tag">文件管理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9C%80%E5%A4%A7%E6%B5%81/" rel="tag">最大流</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91/" rel="tag">最小生成树</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A0%88%E5%92%8C%E9%98%9F%E5%88%97/" rel="tag">栈和队列</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A0%91/" rel="tag">树</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A6%82%E7%8E%87%E5%88%86%E6%9E%90%E5%92%8C%E9%9A%8F%E6%9C%BA%E7%AE%97%E6%B3%95/" rel="tag">概率分析和随机算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" rel="tag">正则表达式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%AF%95%E8%AE%BE/" rel="tag">毕设</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3/" rel="tag">滑动窗口</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BA%BF%E6%80%A7%E8%A1%A8/" rel="tag">线性表</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/" rel="tag">组成原理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/" rel="tag">编译原理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84/" rel="tag">计算机系统结构</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" rel="tag">计算机网络</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86/" rel="tag">设备管理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B4%AA%E5%BF%83%E7%AE%97%E6%B3%95/" rel="tag">贪心算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B5%84%E6%BA%90%E5%88%86%E9%85%8D%E4%B8%8E%E8%B0%83%E5%BA%A6/" rel="tag">资源分配与调度</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E7%B3%BB%E7%BB%9F/" rel="tag">输入输出系统</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BF%9B%E7%A8%8B%E5%92%8C%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/" rel="tag">进程和进程管理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%80%89%E6%8B%A9%E7%AE%97%E6%B3%95/" rel="tag">选择算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%80%92%E5%BD%92/" rel="tag">递归</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%94%81%E6%9C%BA%E5%88%B6/" rel="tag">锁机制</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/C/" style="font-size: 10px;">C++</a> <a href="/tags/CPU/" style="font-size: 10px;">CPU</a> <a href="/tags/KMP/" style="font-size: 10px;">KMP</a> <a href="/tags/Leetcode/" style="font-size: 11.25px;">Leetcode</a> <a href="/tags/activity/" style="font-size: 10px;">activity</a> <a href="/tags/adapter/" style="font-size: 10px;">adapter</a> <a href="/tags/android/" style="font-size: 13.75px;">android</a> <a href="/tags/broadcast/" style="font-size: 10px;">broadcast</a> <a href="/tags/drawable/" style="font-size: 10px;">drawable</a> <a href="/tags/java/" style="font-size: 20px;">java</a> <a href="/tags/javaweb/" style="font-size: 17.5px;">javaweb</a> <a href="/tags/layout/" style="font-size: 10px;">layout</a> <a href="/tags/leetcode/" style="font-size: 10px;">leetcode</a> <a href="/tags/oracle/" style="font-size: 10px;">oracle</a> <a href="/tags/socket/" style="font-size: 10px;">socket</a> <a href="/tags/%E4%B8%BB%E5%AD%98%E7%AE%A1%E7%90%86/" style="font-size: 10px;">主存管理</a> <a href="/tags/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/" style="font-size: 11.25px;">函数式编程</a> <a href="/tags/%E5%88%86%E6%B2%BB%E7%AD%96%E7%95%A5/" style="font-size: 10px;">分治策略</a> <a href="/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" style="font-size: 10px;">动态规划</a> <a href="/tags/%E5%8D%95%E5%85%83%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84/" style="font-size: 10px;">单元最短路径</a> <a href="/tags/%E5%8F%8C%E6%8C%87%E9%92%88%E6%B3%95/" style="font-size: 10px;">双指针法</a> <a href="/tags/%E5%9F%BA%E6%9C%AC%E5%9B%BE%E7%AE%97%E6%B3%95/" style="font-size: 10px;">基本图算法</a> <a href="/tags/%E5%A4%84%E7%90%86%E6%9C%BA%E8%B0%83%E5%BA%A6/" style="font-size: 10px;">处理机调度</a> <a href="/tags/%E5%AD%97%E7%AC%A6%E5%8C%B9%E9%85%8D/" style="font-size: 10px;">字符匹配</a> <a href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" style="font-size: 10px;">学习笔记</a> <a href="/tags/%E6%80%BB%E7%BA%BF/" style="font-size: 10px;">总线</a> <a href="/tags/%E6%89%80%E6%9C%89%E7%BB%93%E7%82%B9%E5%AF%B9%E7%9A%84%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84/" style="font-size: 10px;">所有结点对的最短路径</a> <a href="/tags/%E6%8E%92%E5%BA%8F/" style="font-size: 10px;">排序</a> <a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" style="font-size: 16.25px;">操作系统</a> <a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%BF%B0/" style="font-size: 10px;">操作系统概述</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 17.5px;">数据库</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 12.5px;">数据结构</a> <a href="/tags/%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/" style="font-size: 10px;">文件管理</a> <a href="/tags/%E6%9C%80%E5%A4%A7%E6%B5%81/" style="font-size: 10px;">最大流</a> <a href="/tags/%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91/" style="font-size: 10px;">最小生成树</a> <a href="/tags/%E6%A0%88%E5%92%8C%E9%98%9F%E5%88%97/" style="font-size: 10px;">栈和队列</a> <a href="/tags/%E6%A0%91/" style="font-size: 10px;">树</a> <a href="/tags/%E6%A6%82%E7%8E%87%E5%88%86%E6%9E%90%E5%92%8C%E9%9A%8F%E6%9C%BA%E7%AE%97%E6%B3%95/" style="font-size: 10px;">概率分析和随机算法</a> <a href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" style="font-size: 10px;">正则表达式</a> <a href="/tags/%E6%AF%95%E8%AE%BE/" style="font-size: 10px;">毕设</a> <a href="/tags/%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3/" style="font-size: 10px;">滑动窗口</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 18.75px;">算法</a> <a href="/tags/%E7%BA%BF%E6%80%A7%E8%A1%A8/" style="font-size: 11.25px;">线性表</a> <a href="/tags/%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/" style="font-size: 15px;">组成原理</a> <a href="/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/" style="font-size: 16.25px;">编译原理</a> <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84/" style="font-size: 15px;">计算机系统结构</a> <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" style="font-size: 15px;">计算机网络</a> <a href="/tags/%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86/" style="font-size: 10px;">设备管理</a> <a href="/tags/%E8%B4%AA%E5%BF%83%E7%AE%97%E6%B3%95/" style="font-size: 10px;">贪心算法</a> <a href="/tags/%E8%B5%84%E6%BA%90%E5%88%86%E9%85%8D%E4%B8%8E%E8%B0%83%E5%BA%A6/" style="font-size: 10px;">资源分配与调度</a> <a href="/tags/%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E7%B3%BB%E7%BB%9F/" style="font-size: 10px;">输入输出系统</a> <a href="/tags/%E8%BF%9B%E7%A8%8B%E5%92%8C%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/" style="font-size: 10px;">进程和进程管理</a> <a href="/tags/%E9%80%89%E6%8B%A9%E7%AE%97%E6%B3%95/" style="font-size: 10px;">选择算法</a> <a href="/tags/%E9%80%92%E5%BD%92/" style="font-size: 10px;">递归</a> <a href="/tags/%E9%94%81%E6%9C%BA%E5%88%B6/" style="font-size: 10px;">锁机制</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/11/">十一月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">四月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">一月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">十二月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">十一月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">十月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">九月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">八月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">三月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">二月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">一月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">十二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/11/10/%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-%E5%AD%98%E5%82%A8%E7%B3%BB%E7%BB%9F/">(no title)</a>
          </li>
        
          <li>
            <a href="/2022/04/25/%E6%95%B0%E6%8D%AE%E5%BA%93-%E5%B8%B8%E7%94%A8%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AF%B9%E8%B1%A1/">数据库-常用数据库对象</a>
          </li>
        
          <li>
            <a href="/2022/01/12/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">正则表达式</a>
          </li>
        
          <li>
            <a href="/2021/12/29/java-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%88%E5%85%AD%EF%BC%89/">java-设计模式（六）</a>
          </li>
        
          <li>
            <a href="/2021/12/29/java-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%88%E4%BA%94%EF%BC%89/">java-设计模式（五）</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2022 rhb<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>