<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-loading-bar.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"rshawshank.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":true,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":3,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="纵浪大化中，不喜亦不惧">
<meta property="og:type" content="website">
<meta property="og:title" content="rhb_blog">
<meta property="og:url" content="http://rshawshank.github.io/page/3/index.html">
<meta property="og:site_name" content="rhb_blog">
<meta property="og:description" content="纵浪大化中，不喜亦不惧">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="rhb">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://rshawshank.github.io/page/3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>rhb_blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">rhb_blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">rao的博客</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">55</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">22</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">126</span></a>

  </li>
        <li class="menu-item menu-item-photos">

    <a href="/photos/" rel="section"><i class="fa fa-camera fa-fw"></i>相册</a>

  </li>
        <li class="menu-item menu-item-resources">

    <a href="/resources/" rel="section"><i class="fa fa-download fa-fw"></i>资源</a>

  </li>
        <li class="menu-item menu-item-readnote">

    <a href="/readnote/" rel="section"><i class="fa fa-book fa-fw"></i>阅读笔记</a>

  </li>
        <li class="menu-item menu-item-somethink">

    <a href="/somethink/" rel="section"><i class="fa fa-sticky-note fa-fw"></i>随笔闲谈</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

  <a href="https://github.com/RShawshank" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://rshawshank.github.io/2021/09/29/JavaWeb%E5%AD%A6%E4%B9%A0%EF%BC%88%E5%85%AB%EF%BC%89%E2%80%94%E2%80%94JSTL%E6%A0%87%E7%AD%BE%E5%BA%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="rhb">
      <meta itemprop="description" content="纵浪大化中，不喜亦不惧">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="rhb_blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/09/29/JavaWeb%E5%AD%A6%E4%B9%A0%EF%BC%88%E5%85%AB%EF%BC%89%E2%80%94%E2%80%94JSTL%E6%A0%87%E7%AD%BE%E5%BA%93/" class="post-title-link" itemprop="url">JavaWeb学习（八）——JSTL标签库</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-09-29 09:44:36" itemprop="dateCreated datePublished" datetime="2021-09-29T09:44:36Z">2021-09-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-09-30 01:08:40" itemprop="dateModified" datetime="2021-09-30T01:08:40Z">2021-09-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">学习笔记</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/javaweb/" itemprop="url" rel="index"><span itemprop="name">javaweb</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="JSTL标签库"><a href="#JSTL标签库" class="headerlink" title="JSTL标签库"></a>JSTL标签库</h1><p>为了弥补html标签的不足，规范自定义标签的使用而诞生的。使用JSLT标签的目的就是不希望在jsp页面中出现java逻辑代码。</p>
<h2 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h2><ul>
<li>核心标签(用得最多)</li>
<li>国际化标签(I18N格式化标签)</li>
<li>数据库标签(SQL标签，很少使用)</li>
<li>XML标签(几乎不用)</li>
<li>JSTL函数(EL函数)</li>
</ul>
<h1 id="核心标签库"><a href="#核心标签库" class="headerlink" title="核心标签库"></a>核心标签库</h1><p>JSTL的核心标签库标签共13个，使用这些标签能够完成JSP页面的基本功能，减少编码工作。</p>
<p>　　从功能上可以分为4类：表达式控制标签、流程控制标签、循环标签、URL操作标签。<br>　　　　（1）<strong>表达式控制标签</strong>：<strong>out标签、set标签、remove标签、catch标签。</strong><br>　　　　（2）<strong>流程控制标签</strong>：<strong>if标签、choose标签、when标签、otherwise标签</strong>。<br>　　　　（3）<strong>循环标签</strong>：<strong>forEach标签、forTokens标签</strong>。<br>　　　　（4）<strong>URL操作标签</strong>：<strong>import标签、url标签、redirect标签、param标签</strong>。</p>
<p>　　在JSP页面引入核心标签库的代码为：**&lt;%@ taglib prefix&#x3D;”c” uri&#x3D;”<a target="_blank" rel="noopener" href="http://java.sun.com/jsp/jstl/core&quot;">http://java.sun.com/jsp/jstl/core&quot;</a> %&gt;**</p>
<h2 id="out标签"><a href="#out标签" class="headerlink" title="out标签"></a>out标签</h2><p>&lt;c:out&gt;标签主要是<strong>用来输出数据对象（字符串、表达式）的内容或结果</strong>。<br>　　在使用Java脚本输出时常使用的方式为： &lt;% out.println(“字符串”)%&gt; 或者 &lt;%&#x3D;表达式%&gt; ，在web开发中，为了避免暴露逻辑代码会尽量减少页面中的Java脚本，使用&lt;c:out&gt;标签就可以实现以上功能。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">c:out</span> <span class="attr">value</span>=<span class="string">”字符串”</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">c:out</span> <span class="attr">value</span>=<span class="string">”EL表达式”</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>　　JSTL的使用是和EL表达式分不开的，EL表达式虽然可以直接将结果返回给页面，但有时得到的结果为空，&lt;c:out&gt;有特定的结果处理功能，EL的单独使用会降低程序的易读性，建议把EL的结果输入放入&lt;c:out&gt;标签中。</p>
<p>&lt;c:out&gt;标签的语法：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;c:out value=”要显示的数据对象” [escapeXml=”<span class="literal">true</span>|<span class="literal">false</span>”] [<span class="keyword">default</span>=”默认值”]/&gt;</span><br><span class="line">&lt;c:out value=”要显示的数据对象” [escapeXml=”<span class="literal">true</span>|<span class="literal">false</span>”]&gt;默认值&lt;/c:out&gt;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="center">属性名</th>
<th align="center">是否支持EL</th>
<th align="center">属性类型</th>
<th align="center">属性描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">value</td>
<td align="center">true</td>
<td align="center">Object</td>
<td align="center">指定要输出的内容</td>
</tr>
<tr>
<td align="center">escapeXml</td>
<td align="center">true</td>
<td align="center">Boolean</td>
<td align="center">指定是否将&gt;、&lt;、&amp;等特殊字符进行HTML编码转换后再进行输出。默认true</td>
</tr>
<tr>
<td align="center">default</td>
<td align="center">true</td>
<td align="center">Object</td>
<td align="center">指定如果value属性值为null时所输出的默认值</td>
</tr>
</tbody></table>
<p>使用范例：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; pageEncoding=&quot;UTF-8&quot;%&gt;</span><br><span class="line">&lt;%--引入JSTL核心标签库 --%&gt;</span><br><span class="line">&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot;%&gt;</span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">HTML</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>JSTL: --表达式控制标签“out”标签的使用<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span><span class="tag">&lt;<span class="name">c:out</span> <span class="attr">value</span>=<span class="string">&quot;下面的代码演示了c:out的使用，以及在不同属性值状态下的结果。&quot;</span>/&gt;</span><span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hr</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        &lt;%--（1）直接输出了一个字符串。 --%&gt;</span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>（1）<span class="tag">&lt;<span class="name">c:out</span> <span class="attr">value</span>=<span class="string">&quot;JSTL的out标签的使用&quot;</span> /&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>（2）<span class="tag">&lt;<span class="name">c:out</span> <span class="attr">value</span>=<span class="string">&quot;&lt;a href=&#x27;http://www.cnblogs.com/&#x27;&gt;点击链接到博客园&lt;/a&gt;&quot;</span> /&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        &lt;%--escapeXml=&quot;false&quot;表示value值中的html标签不进行转义，而是直接输出 --%&gt;</span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>（3）<span class="tag">&lt;<span class="name">c:out</span> <span class="attr">value</span>=<span class="string">&quot;&lt;a href=&#x27;http://www.cnblogs.com/&#x27;&gt;点击链接到博客园&lt;/a&gt;&quot;</span> <span class="attr">escapeXml</span>=<span class="string">&quot;false&quot;</span>/&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        &lt;%--(4）字符串中有转义字符，但在默认情况下没有转换。 --%&gt;</span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>（4）<span class="tag">&lt;<span class="name">c:out</span> <span class="attr">value</span>=<span class="string">&quot;&amp;lt未使用字符转义&amp;gt&quot;</span> /&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        &lt;%--（5）使用了转义字符&amp;lt和&amp;gt分别转换成<span class="tag">&lt;<span class="name">和</span>&gt;</span>符号。 --%&gt;</span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>（5）<span class="tag">&lt;<span class="name">c:out</span> <span class="attr">value</span>=<span class="string">&quot;&amp;lt使用字符转义&amp;gt&quot;</span> <span class="attr">escapeXml</span>=<span class="string">&quot;false&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">c:out</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        &lt;%--（6）设定了默认值，从EL表达式$&#123;null&#125;得到空值，所以直接输出设定的默认值。 --%&gt;</span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>（6）<span class="tag">&lt;<span class="name">c:out</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;null&#125;&quot;</span>&gt;</span>使用了默认值<span class="tag">&lt;/<span class="name">c:out</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        &lt;%--（7）未设定默认值，输出结果为空。 --%&gt;</span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>（7）<span class="tag">&lt;<span class="name">c:out</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;null&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">c:out</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        &lt;%--（8）设定了默认值，从EL表达式$&#123;null&#125;得到空值，所以直接输出设定的默认值。 --%&gt;</span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>（8）<span class="tag">&lt;<span class="name">c:out</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;null&#125;&quot;</span> <span class="attr">default</span>=<span class="string">&quot;默认值&quot;</span>/&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        &lt;%--（9）未设定默认值，输出结果为空。 --%&gt;</span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>（9）<span class="tag">&lt;<span class="name">c:out</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;null&#125;&quot;</span>/&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="set标签"><a href="#set标签" class="headerlink" title="set标签"></a>set标签</h2><p>&lt;c:set&gt;标签用于把某一个对象存在指定的域范围内，或者将某一个对象存储到Map或者JavaBean对象中。</p>
<p>语法：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">1：存值，把一个值放在指定的域范围内。</span><br><span class="line">　　　　<span class="tag">&lt;<span class="name">c:set</span> <span class="attr">value</span>=<span class="string">”值1”</span> <span class="attr">var</span>=<span class="string">”name1”</span> [<span class="attr">scope</span>=<span class="string">”page|request|session|application”]/</span>&gt;</span></span><br><span class="line">　　　　含义：把一个变量名为name1值为“值1”的变量存储在指定的scope范围内。</span><br><span class="line">2：</span><br><span class="line">　　　　<span class="tag">&lt;<span class="name">c:set</span> <span class="attr">var</span>=<span class="string">”name2”</span> [<span class="attr">scope</span>=<span class="string">”page|request|session|application”]</span>&gt;</span></span><br><span class="line">　　　　　　值2</span><br><span class="line">　　　　<span class="tag">&lt;/<span class="name">c:set</span>&gt;</span></span><br><span class="line">　　　　含义：把一个变量名为name2，值为值2的变量存储在指定的scope范围内。</span><br><span class="line">3：</span><br><span class="line">　　　　<span class="tag">&lt;<span class="name">c:set</span> <span class="attr">value</span>=<span class="string">”值3”</span> <span class="attr">target</span>=<span class="string">”JavaBean对象”</span> <span class="attr">property</span>=<span class="string">”属性名”/</span>&gt;</span></span><br><span class="line">　　　　含义：把一个值为“值3”赋值给指定的JavaBean的属性名。相当与setter()方法。</span><br><span class="line">4：</span><br><span class="line">　　　　<span class="tag">&lt;<span class="name">c:set</span> <span class="attr">target</span>=<span class="string">”JavaBean对象”</span> <span class="attr">property</span>=<span class="string">”属性名”</span>&gt;</span></span><br><span class="line">　　　　　　值4</span><br><span class="line">　　　　<span class="tag">&lt;/<span class="name">c:set</span>&gt;</span></span><br><span class="line">　　　　含义：把一个值4赋值给指定的JavaBean的属性名。</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="center">属性名</th>
<th align="center">是否支持EL</th>
<th align="center">属性类型</th>
<th align="center">属性描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">value</td>
<td align="center">true</td>
<td align="center">Object</td>
<td align="center">指定要输出的内容</td>
</tr>
<tr>
<td align="center">var</td>
<td align="center">false</td>
<td align="center">String</td>
<td align="center">指定要设置的web域属性的名称</td>
</tr>
<tr>
<td align="center">scope</td>
<td align="center">false</td>
<td align="center">String</td>
<td align="center">指定属性所在的web域</td>
</tr>
<tr>
<td align="center">target</td>
<td align="center">true</td>
<td align="center">Object</td>
<td align="center">指定要设置属性的对象（javabean或是map）</td>
</tr>
<tr>
<td align="center">property</td>
<td align="center">true</td>
<td align="center">String</td>
<td align="center">指定当前为对象设置的属性名称</td>
</tr>
</tbody></table>
<p>使用范例</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; import=&quot;java.util.*&quot; pageEncoding=&quot;UTF-8&quot;%&gt;</span><br><span class="line">&lt;%--引入JSTL核心标签库 --%&gt;</span><br><span class="line">&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot;%&gt;</span><br><span class="line">&lt;%--使用JSP的指令元素指定要使用的JavaBean --%&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">jsp:useBean</span> <span class="attr">id</span>=<span class="string">&quot;person&quot;</span> <span class="attr">class</span>=<span class="string">&quot;javabean.Person&quot;</span>/&gt;</span></span><br><span class="line">&lt;%--负责实例化Bean，id指定实例化后的对象名，可以通过$&#123;person&#125;得到person在内存中的值</span><br><span class="line">（或者使用person.toString()方法）。 --%&gt;</span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">HTML</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>JSTL: --表达式控制标签“set”标签的使用<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>代码给出了给指定scope范围赋值的示例。<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        &lt;%--通过<span class="tag">&lt;<span class="name">c:set</span>&gt;</span>标签将data1的值放入page范围中。--%&gt;</span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>把一个值放入page域中:<span class="tag">&lt;<span class="name">c:set</span> <span class="attr">var</span>=<span class="string">&quot;data1&quot;</span> <span class="attr">value</span>=<span class="string">&quot;xdp&quot;</span> <span class="attr">scope</span>=<span class="string">&quot;page&quot;</span>/&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        &lt;%--使用EL表达式从pageScope得到data1的值。--%&gt;</span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>从page域中得到值：$&#123;pageScope.data1&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        &lt;%--通过<span class="tag">&lt;<span class="name">c:set</span>&gt;</span>标签将data2的值放入request范围中。--%&gt;</span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>把一个值放入request域中:<span class="tag">&lt;<span class="name">c:set</span> <span class="attr">var</span>=<span class="string">&quot;data2&quot;</span> <span class="attr">value</span>=<span class="string">&quot;gacl&quot;</span> <span class="attr">scope</span>=<span class="string">&quot;request&quot;</span>/&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        &lt;%--使用EL表达式从requestScope得到data2的值。--%&gt;</span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>从request域中得到值：$&#123;requestScope.data2&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        &lt;%--通过<span class="tag">&lt;<span class="name">c:set</span>&gt;</span>标签将值name1的值放入session范围中。--%&gt;</span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>把一个值放入session域中。<span class="tag">&lt;<span class="name">c:set</span> <span class="attr">value</span>=<span class="string">&quot;孤傲苍狼&quot;</span> <span class="attr">var</span>=<span class="string">&quot;name1&quot;</span> <span class="attr">scope</span>=<span class="string">&quot;session&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">c:set</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        &lt;%--使用EL表达式从sessionScope得到name1的值。--%&gt;</span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>从session域中得到值:$&#123;sessionScope.name1&#125; <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        &lt;%--把name2放入application范围中。 --%&gt;</span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>把一个值放入application域中。<span class="tag">&lt;<span class="name">c:set</span> <span class="attr">var</span>=<span class="string">&quot;name2&quot;</span> <span class="attr">scope</span>=<span class="string">&quot;application&quot;</span>&gt;</span>白虎神皇<span class="tag">&lt;/<span class="name">c:set</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        &lt;%--使用EL表达式从application范围中取值，用<span class="tag">&lt;<span class="name">c:out</span>&gt;</span>标签输出使得页面规范化。 --%&gt;</span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>使用out标签和EL表达式嵌套从application域中得到值：</span><br><span class="line">             <span class="tag">&lt;<span class="name">c:out</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;applicationScope.name2&#125;&quot;</span>&gt;</span>未得到name的值<span class="tag">&lt;/<span class="name">c:out</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        &lt;%--不指定范围使用EL自动查找得到值 --%&gt;</span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>未指定scope的范围，会从不同的范围内查找得到相应的值：$&#123;data1&#125;、$&#123;data2&#125;、$&#123;name1&#125;、$&#123;name2&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hr</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>使用Java脚本实现以上功能<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>把一个值放入page域中。&lt;%pageContext.setAttribute(&quot;data1&quot;,&quot;xdp&quot;);%&gt;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>从page域中得到值:&lt;%out.println(pageContext.getAttribute(&quot;data1&quot;));%&gt;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>把一个值放入request域中。&lt;%request.setAttribute(&quot;data2&quot;,&quot;gacl&quot;);%&gt;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>从request域中得到值:&lt;%out.println(request.getAttribute(&quot;data2&quot;));%&gt;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>把一个值放入session域中。&lt;%session.setAttribute(&quot;name1&quot;,&quot;孤傲苍狼&quot;);%&gt;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>从session中域得到值:&lt;%out.println(session.getAttribute(&quot;name1&quot;));%&gt;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        &lt;%--out.println()方法与&lt;%=%&gt;表达式输出功能一样</span><br><span class="line">        但使用表达式输出（&lt;%=%&gt;）明显要比使用out.println()输出更好。</span><br><span class="line">        --%&gt;</span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>&lt;%=session.getAttribute(&quot;name1&quot;) %&gt;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>把另一个值放入application域中。&lt;%application.setAttribute(&quot;name2&quot;,&quot;白虎神皇&quot;);%&gt;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span> 从application域中得到值：&lt;%out.println(application.getAttribute(&quot;name2&quot;));%&gt;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>&lt;%=application.getAttribute(&quot;name2&quot;)%&gt;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>未指定scope的范围，会从不同的范围内查找得到相应的值：</span><br><span class="line">            &lt;%=pageContext.findAttribute(&quot;data1&quot;)%&gt;、</span><br><span class="line">            &lt;%=pageContext.findAttribute(&quot;data2&quot;)%&gt;、</span><br><span class="line">            &lt;%=pageContext.findAttribute(&quot;name1&quot;)%&gt;、</span><br><span class="line">            &lt;%=pageContext.findAttribute(&quot;name2&quot;)%&gt;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hr</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>操作JavaBean，设置JavaBean的属性值<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    &lt;%--设置JavaBean的属性值，等同与setter方法，Target指向实例化后的对象，property指向要插入值的参数名。</span><br><span class="line">    注意：使用target时一定要指向实例化后的JavaBean对象，也就是要跟<span class="tag">&lt;<span class="name">jsp:useBean</span>&gt;</span>配套使用，</span><br><span class="line">    也可以java脚本实例化，但这就失去了是用标签的本质意义。</span><br><span class="line">    使用Java脚本实例化：</span><br><span class="line">    &lt;%@page import=&quot;javabean.Person&quot;%</span><br><span class="line">    &lt;% Person person=new Person(); %&gt;</span><br><span class="line">     --%&gt;</span><br><span class="line">    <span class="tag">&lt;<span class="name">c:set</span> <span class="attr">target</span>=<span class="string">&quot;$&#123;person&#125;&quot;</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span>&gt;</span>孤傲苍狼<span class="tag">&lt;/<span class="name">c:set</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">c:set</span> <span class="attr">target</span>=<span class="string">&quot;$&#123;person&#125;&quot;</span> <span class="attr">property</span>=<span class="string">&quot;age&quot;</span>&gt;</span>25<span class="tag">&lt;/<span class="name">c:set</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">c:set</span> <span class="attr">target</span>=<span class="string">&quot;$&#123;person&#125;&quot;</span> <span class="attr">property</span>=<span class="string">&quot;sex&quot;</span>&gt;</span>男<span class="tag">&lt;/<span class="name">c:set</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">c:set</span> <span class="attr">target</span>=<span class="string">&quot;$&#123;person&#125;&quot;</span> <span class="attr">property</span>=<span class="string">&quot;home&quot;</span>&gt;</span>中国<span class="tag">&lt;/<span class="name">c:set</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>使用的目标对象为：$&#123;person&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>从Bean中获得的name值为：<span class="tag">&lt;<span class="name">c:out</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;person.name&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">c:out</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>从Bean中获得的age值为：<span class="tag">&lt;<span class="name">c:out</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;person.age&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">c:out</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>从Bean中获得的sex值为：<span class="tag">&lt;<span class="name">c:out</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;person.sex&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">c:out</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>从Bean中获得的home值为：<span class="tag">&lt;<span class="name">c:out</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;person.home&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">c:out</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hr</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>操作Map<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">     &lt;%</span><br><span class="line">        Map map = new HashMap();</span><br><span class="line">        request.setAttribute(&quot;map&quot;,map);</span><br><span class="line">     %&gt;</span><br><span class="line">     &lt;%--将data对象的值存储到map集合中 --%&gt;</span><br><span class="line">    <span class="tag">&lt;<span class="name">c:set</span> <span class="attr">property</span>=<span class="string">&quot;data&quot;</span> <span class="attr">value</span>=<span class="string">&quot;gacl&quot;</span> <span class="attr">target</span>=<span class="string">&quot;$&#123;map&#125;&quot;</span>/&gt;</span></span><br><span class="line">        $&#123;map.data&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="remove标签"><a href="#remove标签" class="headerlink" title="remove标签"></a>remove标签</h2><p>从指定的JSP范围内移除指定的变量。</p>
<p>语法：</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;c:<span class="built_in">remove</span> <span class="attribute">var</span>=”变量名” [<span class="attribute">scope</span>=”page|request|session|application”]/&gt;</span><br><span class="line">　　其中var属性是必须的，scope可以以省略。</span><br></pre></td></tr></table></figure>

<p>范例：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; import=&quot;java.util.*&quot; pageEncoding=&quot;UTF-8&quot;%&gt;</span><br><span class="line">&lt;%--引入JSTL核心标签库 --%&gt;</span><br><span class="line">&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot;%&gt;</span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">HTML</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>JSTL: --表达式控制标签“remove”标签的使用<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">c:set</span> <span class="attr">var</span>=<span class="string">&quot;name&quot;</span> <span class="attr">scope</span>=<span class="string">&quot;session&quot;</span>&gt;</span>孤傲苍狼<span class="tag">&lt;/<span class="name">c:set</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">c:set</span> <span class="attr">var</span>=<span class="string">&quot;age&quot;</span> <span class="attr">scope</span>=<span class="string">&quot;session&quot;</span>&gt;</span>25<span class="tag">&lt;/<span class="name">c:set</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">c:out</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;sessionScope.name&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">c:out</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">c:out</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;sessionScope.age&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">c:out</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        &lt;%--使用remove标签移除age变量 --%&gt;</span><br><span class="line">        <span class="tag">&lt;<span class="name">c:remove</span> <span class="attr">var</span>=<span class="string">&quot;age&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">c:out</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;sessionScope.name&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">c:out</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">c:out</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;sessionScope.age&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">c:out</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="catch标签"><a href="#catch标签" class="headerlink" title="catch标签"></a>catch标签</h2><p>用于捕获嵌套在标签体中的内容抛出的异常。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; import=&quot;java.util.*&quot; pageEncoding=&quot;UTF-8&quot;%&gt;</span><br><span class="line">&lt;%--引入JSTL核心标签库 --%&gt;</span><br><span class="line">&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot;%&gt;</span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">HTML</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>JSTL: --表达式控制标签“catch”标签实例<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h4</span>&gt;</span>catch标签实例<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">    &lt;%--把容易产生异常的代码放在<span class="tag">&lt;<span class="name">c:catch</span>&gt;</span><span class="tag">&lt;/<span class="name">c:catch</span>&gt;</span>中，</span><br><span class="line">    自定义一个变量errorInfo用于存储异常信息 --%&gt;</span><br><span class="line">    <span class="tag">&lt;<span class="name">c:catch</span> <span class="attr">var</span>=<span class="string">&quot;errorInfo&quot;</span>&gt;</span></span><br><span class="line">        &lt;%--实现了一段异常代码，向一个不存在的JavaBean中插入一个值--%&gt;</span><br><span class="line">        <span class="tag">&lt;<span class="name">c:set</span> <span class="attr">target</span>=<span class="string">&quot;person&quot;</span> <span class="attr">property</span>=<span class="string">&quot;hao&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">c:set</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">c:catch</span>&gt;</span></span><br><span class="line">    &lt;%--用EL表达式得到errorInfo的值，并使用<span class="tag">&lt;<span class="name">c:out</span>&gt;</span>标签输出 --%&gt;</span><br><span class="line">    异常：<span class="tag">&lt;<span class="name">c:out</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;errorInfo&#125;&quot;</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">    异常 errorInfo.getMessage：<span class="tag">&lt;<span class="name">c:out</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;errorInfo.message&#125;&quot;</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">    异常 errorInfo.getCause：<span class="tag">&lt;<span class="name">c:out</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;errorInfo.cause&#125;&quot;</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">    异常 errorInfo.getStackTrace：<span class="tag">&lt;<span class="name">c:out</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;errorInfo.stackTrace&#125;&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>其他的标签可见:<br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/xdp-gacl/p/3943390.html">javaweb学习总结(二十八)——JSTL标签库之核心标签 - 孤傲苍狼 - 博客园 (cnblogs.com)</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://rshawshank.github.io/2021/09/22/JavaWeb%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%83%EF%BC%89%E2%80%94%E2%80%94javaweb%E7%9A%84%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="rhb">
      <meta itemprop="description" content="纵浪大化中，不喜亦不惧">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="rhb_blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/09/22/JavaWeb%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%83%EF%BC%89%E2%80%94%E2%80%94javaweb%E7%9A%84%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F/" class="post-title-link" itemprop="url">JavaWeb学习（七）——javaweb的开发模式</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-09-22 15:51:07 / 修改时间：08:51:42" itemprop="dateCreated datePublished" datetime="2021-09-22T15:51:07Z">2021-09-22</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">学习笔记</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/javaweb/" itemprop="url" rel="index"><span itemprop="name">javaweb</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="JSP-JavaBean开发模式"><a href="#JSP-JavaBean开发模式" class="headerlink" title="JSP+JavaBean开发模式"></a>JSP+JavaBean开发模式</h1><p><img src="https://i.loli.net/2021/09/22/hKmi34gapD9dNIH.png" alt="img"></p>
<p>JSP负责控制逻辑、表现逻辑、业务对象（javabean）的调用。</p>
<p>JSP+JavaBean模式适合开发业务逻辑不太复杂的web应用程序，这种模式下，JavaBean用于封装业务数据，JSP即负责处理用户请求，又显示数据。</p>
<h1 id="Servlet-JSP-JavaBean开发模式"><a href="#Servlet-JSP-JavaBean开发模式" class="headerlink" title="Servlet+JSP+JavaBean开发模式"></a>Servlet+JSP+JavaBean开发模式</h1><p>Servlet+JSP+JavaBean组合开发就是一种MVC开发模式了，控制器(Controller)采用Servlet、模型(Model)采用JavaBean、视图(View)采用JSP。</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/xdp-gacl/p/3908610.html">javaweb学习总结(二十一)——JavaWeb的两种开发模式 - 孤傲苍狼 - 博客园 (cnblogs.com)</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://rshawshank.github.io/2021/09/19/JavaWeb%E5%AD%A6%E4%B9%A0%EF%BC%88%E5%85%AD%EF%BC%89%E2%80%94%E2%80%94JSP/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="rhb">
      <meta itemprop="description" content="纵浪大化中，不喜亦不惧">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="rhb_blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/09/19/JavaWeb%E5%AD%A6%E4%B9%A0%EF%BC%88%E5%85%AD%EF%BC%89%E2%80%94%E2%80%94JSP/" class="post-title-link" itemprop="url">JavaWeb学习（六）——JSP</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-09-18 16:56:26" itemprop="dateCreated datePublished" datetime="2021-09-18T16:56:26Z">2021-09-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-09-30 01:19:12" itemprop="dateModified" datetime="2021-09-30T01:19:12Z">2021-09-30</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">学习笔记</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/javaweb/" itemprop="url" rel="index"><span itemprop="name">javaweb</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="JSP简介"><a href="#JSP简介" class="headerlink" title="JSP简介"></a>JSP简介</h1><p>JSP是为了简化Servlet的工作出现的替代品，Servlet输出HTML非常困难，JSP就是替代Servlet输出HTML的。</p>
<h1 id="JSP的响应"><a href="#JSP的响应" class="headerlink" title="JSP的响应"></a>JSP的响应</h1><ul>
<li><p>浏览器第一次请求1.jsp时，Tomcat会将1.jsp转化成1_jsp.java这么一个类，并将该文件编译成class文件。编译完毕后再运行class文件来响应浏览器的请求。</p>
</li>
<li><p>以后访问1.jsp就不再重新编译jsp文件了，直接调用class文件来响应浏览器。当然了，如果Tomcat检测到JSP页面改动了的话，会重新编译的。</p>
</li>
<li><p>既然JSP是一个Servlet，那JSP页面中的HTML排版标签是怎么样被发送到浏览器的？用write()出去的。说到底，JSP就是封装了Servlet的java程序罢了。</p>
</li>
<li><p><strong>JSP比Servlet更方便更简单的一个重要原因就是：内置了9个对象！</strong>内置对象有：out、session、response、request、config、page、application、pageContext、exception</p>
</li>
</ul>
<h1 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h1><p>JSP也是Servlet，运行时只有一个实例，<strong>JSP初始化和销毁时也会调用Servlet的init()和destroy()方法</strong>。另外，JSP还有自己初始化和销毁的方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">_jspInit</span><span class="params">()</span> &#123;</span><br><span class="line">  _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();</span><br><span class="line">  _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">_jspDestroy</span><span class="params">()</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h1><p>JSP代码分为两个部分：</p>
<ol>
<li>模板数据：HTML代码<ul>
<li>定义了网页的基本骨架————页面的结构和外观</li>
</ul>
</li>
<li>元素：JSP页面中的java代码、JSP指令和JSP标签</li>
</ol>
<h1 id="脚本"><a href="#脚本" class="headerlink" title="脚本"></a>脚本</h1><ul>
<li><strong>JSP的脚本就是JSP页面中的java代码</strong>，也叫做scriptlet。<strong>JSP的脚本必须使用&lt;%%&gt;括起来，不然会被当成是模板数据的！</strong></li>
<li>JSP脚本有三种方式：<ul>
<li>&lt;%%&gt;【定义局部变量，编写语句】</li>
<li>&lt;%!%&gt;【定义类或方法，<strong>但是没人这样用！</strong>】</li>
<li>&lt;%&#x3D;%&gt;（也称之为<strong>表达式输出</strong>）【输出各种类型的变量，int、double、String、Object等】</li>
<li>表达式和变量后面不能有分号（;）</li>
<li><strong>在&lt;% %&gt;中可以定义变量、编写语句，不能定义方法。</strong></li>
</ul>
</li>
<li>如果过多地使用&lt;%%&gt;会导致代码混乱，JSP还提供了一种scriptlet标签，<strong>使用此标签和&lt;%%&gt;有相同的功能，只不过它更美观了一些</strong></li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"> &lt;jsp:scriptlet&gt;</span><br><span class="line">    </span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;HelloWorld&quot;</span>;</span><br><span class="line">        out.println(s);</span><br><span class="line">    </span><br><span class="line">    &lt;/jsp:scriptlet&gt;</span><br><span class="line">        </span><br><span class="line">       &lt;%--这是JSP注释--%&gt;</span><br><span class="line">    &lt;%--%&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    <span class="type">int</span> sum=<span class="number">0</span>;<span class="comment">//声明变量</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/*编写语句*/</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">100</span>;i++)&#123;</span><br><span class="line">        sum+=i;</span><br><span class="line">    &#125;</span><br><span class="line">    out.println(<span class="string">&quot;&lt;h1&gt;Sum=&quot;</span>+sum+<span class="string">&quot;&lt;/h1&gt;&quot;</span>);</span><br><span class="line">%&gt;</span><br><span class="line">       </span><br></pre></td></tr></table></figure>

<h1 id="指令"><a href="#指令" class="headerlink" title="指令"></a>指令</h1><p><strong>JSP指令用来声明JSP页面的相关属性，例如编码方式、文档类型等等</strong></p>
<figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="meta">%</span>@指令  属性名=<span class="string">&quot;值&quot;</span>  <span class="meta">%</span>&gt;</span><br></pre></td></tr></table></figure>

<h2 id="page指令"><a href="#page指令" class="headerlink" title="page指令"></a>page指令</h2><p>page指令可以帮助跳到提示页面或是错误页面上。为了保持程序的可读性和遵循良好的编程习惯，page指令最好是放在整个JSP页面的起始位置。</p>
<ul>
<li>我在idea生成的JSP页面就有page指令了。</li>
</ul>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@<span class="built_in"> page </span><span class="attribute">contentType</span>=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> <span class="attribute">language</span>=<span class="string">&quot;java&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>page指令常见属性：</li>
</ul>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page</span><br><span class="line">    [ language=<span class="string">&quot;java&quot;</span> ]</span><br><span class="line">    [ extends=<span class="string">&quot;package.class&quot;</span> ]</span><br><span class="line">    [ <span class="keyword">import</span>=<span class="string">&quot;&#123;package.class | package.*&#125;, ...&quot;</span> ]</span><br><span class="line">    [ session=<span class="string">&quot;true | false&quot;</span> ]</span><br><span class="line">    [ buffer=<span class="string">&quot;none | 8kb | sizekb&quot;</span> ]</span><br><span class="line">    [ autoFlush=<span class="string">&quot;true | false&quot;</span> ]</span><br><span class="line">    [ isThreadSafe=<span class="string">&quot;true | false&quot;</span> ]</span><br><span class="line">    [ info=<span class="string">&quot;text&quot;</span> ]</span><br><span class="line">    [ errorPage=<span class="string">&quot;relative_url&quot;</span> ]【通过page指令的errorPage属性跳转到relative_url页面】</span><br><span class="line">    [ isErrorPage=<span class="string">&quot;true | false&quot;</span> ]【设置页面是否是错误页面】</span><br><span class="line">    [ contentType=<span class="string">&quot;mimeType [ ;charset=characterSet ]&quot;</span> | <span class="string">&quot;text/html ; charset=ISO-8859-1&quot;</span> ]</span><br><span class="line">    [ pageEncoding=<span class="string">&quot;characterSet | ISO-8859-1&quot;</span> ]</span><br><span class="line">    [ isELIgnored=<span class="string">&quot;true | false&quot;</span> ]</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>

<p>一般地，在eclipse或idea这些高级开发工具上开发，<strong>我们只需要在page指令中指定contentType&#x3D;”text&#x2F;html;charset&#x3D;UTF-8”，就不会出现中文乱码问题！</strong>当然了contentType <strong>不仅仅可以指定以text&#x2F;html的方式显示，还可以使用其他的形式显示出来。在conf&#x2F;web.xml文件中可以查询出来</strong></p>
<h3 id="import属性"><a href="#import属性" class="headerlink" title="import属性"></a>import属性</h3><ul>
<li><p>可以在一条page指令的import属性中引入多个类或包，其中的每个包或类之间使用逗号(,)分隔</p>
</li>
<li><p>&#96;&#96;&#96;jsp<br> &lt;%@ page import&#x3D;”java.util.*,java.io.*,java.sql.*”%&gt;</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### errorPage属性</span><br><span class="line"></span><br><span class="line">- rrorPage属性的设置值必须使用相对路径，如果以“/”开头，表示相对于当前Web应用程序的根目录(注意不是站点根目录)，否则，表示相对于当前页面</span><br><span class="line"></span><br><span class="line">- 可以在web.xml文件中使用\&lt;error-page\&gt;元素为整个Web应用程序设置错误处理页面。</span><br><span class="line"></span><br><span class="line">- \&lt;error-page\&gt;元素有3个子元素，\&lt;error-code\&gt;、\&lt;exception-type\&gt;、\&lt;location\&gt;</span><br><span class="line"></span><br><span class="line">  - \&lt;error-code\&gt;子元素指定错误的状态码，例如：\&lt;error-code\&gt;404\&lt;/error-code\&gt;</span><br><span class="line">  - \&lt;exception-type\&gt;子元素指定异常类的完全限定名，例如：\&lt;exception-type\&gt;java.lang.ArithmeticException\&lt;/exception-type\&gt;</span><br><span class="line">  - \<span class="tag">&lt;<span class="name">location</span>&gt;</span>子元素指定以“/”开头的错误处理页面的路径，例如：\&lt;location\&gt;/ErrorPage/404Error.jsp\&lt;/location\&gt;</span><br><span class="line"></span><br><span class="line">- 如果设置了某个JSP页面的errorPage属性，那么在web.xml文件中设置的错误处理将不对该页面起作用。</span><br><span class="line"></span><br><span class="line">  web.xml的代码下：</span><br><span class="line"></span><br><span class="line">  ```xml</span><br><span class="line">  <span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">web-app</span> <span class="attr">version</span>=<span class="string">&quot;3.0&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xmlns</span>=<span class="string">&quot;http://java.sun.com/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://java.sun.com/xml/ns/javaee</span></span></span><br><span class="line"><span class="string"><span class="tag">      http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">display-name</span>&gt;</span><span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.jsp<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">    <span class="comment">&lt;!-- 针对404错误的处理页面 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">error-page</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">error-code</span>&gt;</span>404<span class="tag">&lt;/<span class="name">error-code</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">location</span>&gt;</span>/ErrorPage/404Error.jsp<span class="tag">&lt;/<span class="name">location</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">error-page</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>404Error.jsp代码如下：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> <span class="keyword">import</span>=<span class="string">&quot;java.util.*&quot;</span> pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;<span class="number">404</span>错误友好提示页面&lt;/title&gt;</span><br><span class="line">    &lt;!-- <span class="number">3</span>秒钟后自动跳转回首页 --&gt;</span><br><span class="line">    &lt;meta http-equiv=<span class="string">&quot;refresh&quot;</span> content=<span class="string">&quot;3;url=$&#123;pageContext.request.contextPath&#125;/index.jsp&quot;</span>&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;img alt=<span class="string">&quot;对不起，你要访问的页面没有找到，请联系管理员处理!&quot;</span></span><br><span class="line">    src=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/img/404Error.png&quot;</span>/&gt;&lt;br/&gt;</span><br><span class="line">    <span class="number">3</span>秒钟后自动跳转回首页，如果没有跳转，请点击&lt;a href=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/index.jsp&quot;</span>&gt;这里&lt;/a&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="include指令"><a href="#include指令" class="headerlink" title="include指令"></a>include指令</h2><p>在JSP中对于包含有两种语句形式：</p>
<ol>
<li>@include指令</li>
<li><a href="jsp:include">jsp:include</a>指令</li>
</ol>
<p><strong>include指令是静态包含</strong>。静态包含的意思就是：<strong>把文件的代码内容都包含进来，再编译！</strong></p>
<p><strong>include指令细节注意问题：</strong></p>
<ol>
<li><strong>被引入的文件必须遵循JSP语法。</strong></li>
<li><strong>被引入的文件可以使用任意的扩展名，即使其扩展名是html，JSP引擎也会按照处理jsp页面的方式处理它里面的内容，为了见明知意，JSP规范建议使用.jspf（JSP fragments(片段)）作为静态引入文件的扩展名。</strong></li>
<li><strong>由于使用include指令将会涉及到2个JSP页面，并会把2个JSP翻译成一个servlet，所以这2个JSP页面的指令不能冲突（除了pageEncoding和导包除外）。</strong></li>
</ol>
<p>在1.jsp中把页头和页尾包含进来：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;包含页头和页尾进来&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%<span class="meta">@include</span> file=<span class="string">&quot;head.jsp&quot;</span> %&gt;</span><br><span class="line">&lt;%<span class="meta">@include</span> file=<span class="string">&quot;foot.jsp&quot;</span> %&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>



<h2 id="taglib指令"><a href="#taglib指令" class="headerlink" title="taglib指令"></a>taglib指令</h2><p>用来说明JSP页面内使用的标签库</p>
<h1 id="行为（内置标签）"><a href="#行为（内置标签）" class="headerlink" title="行为（内置标签）"></a>行为（内置标签）</h1><blockquote>
<p><strong>JSP行为（JSP Actions）是一组JSP内置的标签</strong>，只书写少量的标记代码就能够使用JSP提供丰富的功能，<strong>JSP行为是对常用的JSP功能的抽象和封装</strong>。</p>
</blockquote>
<p>　jsp的常用标签有以下三个</p>
<ul>
<li><a href="jsp:include">jsp:include</a>标签  </li>
<li><a href="jsp:forward">jsp:forward</a>标签  </li>
<li><a href="jsp:param">jsp:param</a>标签</li>
</ul>
<h2 id="include标签"><a href="#include标签" class="headerlink" title="include标签"></a>include标签</h2><ul>
<li>include标签语法是这个样子的</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:include page=<span class="string">&quot;relativeURL | &lt;%=expression%&gt;&quot;</span> flush=<span class="string">&quot;true|false&quot;</span> /&gt;</span><br><span class="line">　　page属性用于指定被引入资源的相对路径，它也可以通过执行一个表达式来获得。</span><br><span class="line">　　flush属性指定在插入其他资源的输出内容时，是否先将当前JSP页面的已输出的内容刷新到客户端。</span><br></pre></td></tr></table></figure>

<ul>
<li>jsp标签包含文件就是<strong>先编译被包含的页面，再将页面的结果写入到包含的页面中</strong>————属于动态包含</li>
</ul>
<h3 id="include标签和include指令的区别"><a href="#include标签和include指令的区别" class="headerlink" title="include标签和include指令的区别"></a>include标签和include指令的区别</h3><p>&lt;jsp:include&gt;标签是动态引入， &lt;jsp:include&gt;标签涉及到的2个JSP页面会被翻译成2个servlet，这2个servlet的内容在执行时进行合并。<br>　　而include指令是静态引入，涉及到的2个JSP页面会被翻译成一个servlet，其内容是在源文件级别进行合并。</p>
<h2 id="param标签"><a href="#param标签" class="headerlink" title="param标签"></a>param标签</h2><ul>
<li>当使用&lt;jsp:include&gt;和&lt;jsp:forward&gt;标签引入或将请求转发给其它资源时，可以使用&lt;jsp:param&gt;标签向这个资源传递参数。</li>
</ul>
<h2 id="forward标签"><a href="#forward标签" class="headerlink" title="forward标签"></a>forward标签</h2><p>&lt;jsp:forward&gt;标签用于把请求转发给另外一个资源。</p>
<ul>
<li><p>forward标签就是对request.getRequestDispatcher(String url).forward(request,response)的封装</p>
</li>
<li><p>语法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">  　&lt;jsp:forward page=<span class="string">&quot;relativeURL | &lt;%=expression%&gt;&quot;</span> /&gt;</span><br><span class="line">  　　page属性用于指定请求转发到的资源的相对路径，它也可以通过执行一个表达式来获得。</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="directive标签"><a href="#directive标签" class="headerlink" title="directive标签"></a>directive标签</h2><ul>
<li><strong>directive的中文意思就是指令</strong>。<strong>该行为就是替代指令&lt;%@%&gt;的语法的</strong><ul>
<li>&lt;jsp:directive.include file&#x3D;””&#x2F;&gt; 相当于&lt;%@include file&#x3D;”” %&gt;</li>
<li>&lt;jsp:directive.page&#x2F;&gt; 相当于&lt;%@page %&gt;</li>
<li>&lt;jsp:directive.taglib&#x2F;&gt; 相当于&lt;%@taglib %&gt;</li>
</ul>
</li>
</ul>
<h1 id="内置对象"><a href="#内置对象" class="headerlink" title="内置对象"></a>内置对象</h1><p>每个JSP 页面在第一次被访问时，WEB容器都会把请求交给JSP引擎（即一个Java程序）去处理。JSP引擎先将JSP翻译成一个_jspServlet(实质上也是一个servlet) ，然后按照servlet的调用方式进行调用。<br>　　由于JSP第一次访问时会翻译成servlet，所以第一次访问通常会比较慢，但第二次访问，JSP引擎如果发现JSP没有变化，就不再翻译，而是直接调用，所以程序的执行效率不会受到影响。<br>　　JSP引擎在调用JSP对应的_jspServlet时，会传递或创建9个与web开发相关的对象供_jspServlet使用。JSP技术的设计者为便于开发人员在编写JSP页面时获得这些web对象的引用，特意定义了9个相应的变量，开发人员在JSP页面中通过这些变量就可以快速获得这9大对象的引用。</p>
<p>九个内置对象：</p>
<table>
<thead>
<tr>
<th>NO.</th>
<th>内置对象</th>
<th>类型</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td><strong>pageContext</strong></td>
<td><strong>javax.servlet.jsp.PageContext</strong></td>
</tr>
<tr>
<td>2</td>
<td><strong>request</strong></td>
<td><strong>javax.servlet.http.HttpServletRequest</strong></td>
</tr>
<tr>
<td>3</td>
<td><strong>response</strong></td>
<td><strong>javax.servlet.http.HttpServletResponse</strong></td>
</tr>
<tr>
<td>4</td>
<td><strong>session</strong></td>
<td><strong>javax.servlet.http.HttpSession</strong></td>
</tr>
<tr>
<td>5</td>
<td><strong>application</strong></td>
<td><strong>javax.servlet.ServletContext</strong></td>
</tr>
<tr>
<td>6</td>
<td><strong>config</strong></td>
<td><strong>javax.servlet.ServletConfig</strong></td>
</tr>
<tr>
<td>7</td>
<td>out</td>
<td>javax.servlet.jsp.JspWriter</td>
</tr>
<tr>
<td>8</td>
<td>page</td>
<td>java.lang.Object</td>
</tr>
<tr>
<td>9</td>
<td>exception</td>
<td>java.lang.Throwable</td>
</tr>
</tbody></table>
<p>————无需定义，即可直接使用</p>
<h2 id="out对象"><a href="#out对象" class="headerlink" title="out对象"></a>out对象</h2><p>out对象的API</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">getBufferSize</span><span class="params">()</span>【得到缓存大小】</span><br><span class="line"><span class="type">int</span> <span class="title function_">getRemaining</span><span class="params">()</span>【得到未使用缓存的大小】</span><br><span class="line"><span class="type">boolean</span> <span class="title function_">isAutoFlush</span><span class="params">()</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">println</span><span class="params">()</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">flush</span><span class="params">()</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">close</span><span class="params">()</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">clearBuffer</span><span class="params">()</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">clear</span><span class="params">()</span></span><br></pre></td></tr></table></figure>

<p>out对象用于向客户端发送文本数据。</p>
<p>out对象是通过调用pageContext对象的getOut方法返回的，其作用和用法与ServletResponse.getWriter方法返回的PrintWriter对象非常相似。</p>
<p>JSP页面中的out对象的类型为JspWriter，JspWriter相当于一种带缓存功能的PrintWriter，设置JSP页面的page指令的buffer属性可以调整它的缓存大小，甚至关闭它的缓存。</p>
<p>只有向out对象中写入了内容，且满足如下任何一个条件时，out对象才去调用ServletResponse.getWriter方法，并通过该方法返回的PrintWriter对象将out对象的缓冲区中的内容真正写入到Servlet引擎提供的缓冲区中：</p>
<ul>
<li>设置page指令的buffer属性关闭了out对象的缓存功能</li>
<li>out对象的缓冲区已满</li>
<li>整个JSP页面结束</li>
</ul>
<p>out对象的原理如下：</p>
<p><img src="https://i.loli.net/2021/09/18/KCdBurWOV2yUlIe.png"></p>
<ul>
<li>只有向out对象中写入了内容，且<strong>满足如下任何一个条件时，out对象才去调用ServletResponse.getWriter方法</strong>，并<strong>通过该方法返回的PrintWriter对象将out对象的缓冲区中的内容真正写入到Servlet引擎提供的缓冲区中</strong>：<ul>
<li><strong>设置page指令的buffer属性关闭了out对象的缓存功能</strong></li>
<li><strong>out对象的缓冲区已满</strong></li>
<li><strong>整个JSP页面结束</strong></li>
</ul>
</li>
<li><strong>一般我们在JSP页面输出都是用表达式（&lt;%&#x3D;%&gt;)，所以out对象用得并不是很多</strong>！</li>
</ul>
<h2 id="page对象"><a href="#page对象" class="headerlink" title="page对象"></a>page对象</h2><p>内置对象page是HttpJasPage对象，<strong>其实page对象代表的就是当前JSP页面，是当前JSP编译后的Servlet类的对象</strong>。也就是说：<strong>page对象相当于普通java类的this</strong></p>
<p>在开发中几乎不用</p>
<h2 id="exception对象"><a href="#exception对象" class="headerlink" title="exception对象"></a>exception对象</h2><ul>
<li><strong>内置对象exception是java.lang.Exception类的对象，exception封装了JSP页面抛出的异常信息。</strong>exception经常被用来处理错误页面</li>
</ul>
<h2 id="pageContext对象"><a href="#pageContext对象" class="headerlink" title="pageContext对象"></a>pageContext对象</h2><p><strong>pageContext是内置对象中最重要的一个对象，它代表着JSP页面编译后的内容（也就是JSP页面的运行环境）！</strong></p>
<h3 id="pageContext获取8个内置对象"><a href="#pageContext获取8个内置对象" class="headerlink" title="pageContext获取8个内置对象"></a>pageContext获取8个内置对象</h3><p>既然它代表了JSP页面编译后的内容，理所当然的：<strong>它封装了对其他8大内置对象的引用！</strong>，也就是说，<strong>通过pageContext可以获取到其他的8个内置对象！</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;获取八大内置对象&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line"></span><br><span class="line">    System.out.println(pageContext.getSession());</span><br><span class="line">    System.out.println(pageContext.getRequest());</span><br><span class="line">    System.out.println(pageContext.getResponse());</span><br><span class="line"></span><br><span class="line">    System.out.println(pageContext.getException());</span><br><span class="line"></span><br><span class="line">    System.out.println(pageContext.getPage());</span><br><span class="line">    System.out.println(pageContext.getServletConfig());</span><br><span class="line">    System.out.println(pageContext.getServletContext());</span><br><span class="line">    System.out.println(pageContext.getOut());</span><br><span class="line"></span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="pageContext作为域对象"><a href="#pageContext作为域对象" class="headerlink" title="pageContext作为域对象"></a>pageContext作为域对象</h3><p>类似于request，session，ServletContext作为域对象而言<strong>都有以下三个方法</strong>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、setAttribute(String name,Objcet o)</span><br><span class="line"><span class="number">2</span>、getAttribute(String name)</span><br><span class="line"><span class="number">3</span>、removeAttribute(String name)</span><br><span class="line">    </span><br></pre></td></tr></table></figure>

<p>当然了，pageContext也不例外，<strong>pageContext也有这三个方法</strong>！</p>
<p>pageContext本质上代表的是当前JSP页面编译后的内容，<strong>作为域对象而言，它就代表着当前JSP页面（也就是page）</strong>！也就是说：<strong>pageContext域对象只在page范围内有效，超出了page范围就无效了</strong>！</p>
<p>findAttribute(String name)方法介绍：</p>
<p>该方法是用于查找各个域中的属性的。当要查找某个属性时，findAttribute方法按照查找顺序”page→request→session→application”在这四个对象中去查找，只要找到了就返回属性值，如果四个对象都没有找到要查找的属性，则返回一个null。</p>
<p>pageContext对象中封装了访问其它域的方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> <span class="keyword">public</span> java.lang.Object <span class="title function_">getAttribute</span><span class="params">(java.lang.String name,<span class="type">int</span> scope)</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAttribute</span><span class="params">(java.lang.String name, java.lang.Object value,<span class="type">int</span> scope)</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">removeAttribute</span><span class="params">(java.lang.String name,<span class="type">int</span> scope)</span></span><br></pre></td></tr></table></figure>

<p>代表各个域的常量</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> PageContext.APPLICATION_SCOPE</span><br><span class="line"><span class="number">2</span> PageContext.SESSION_SCOPE</span><br><span class="line"><span class="number">3</span> PageContext.REQUEST_SCOPE</span><br><span class="line"><span class="number">4</span> PageContext.PAGE_SCOPE </span><br></pre></td></tr></table></figure>

<h3 id="PageContext引入和跳转到其他资源"><a href="#PageContext引入和跳转到其他资源" class="headerlink" title="PageContext引入和跳转到其他资源"></a>PageContext引入和跳转到其他资源</h3><p>PageContext类中定义了一个forward方法(用来跳转页面)和两个include方法(用来引入页面)来分别简化和替代RequestDispatcher.forward方法和include方法。</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;%<span class="meta">@page</span> contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;%<span class="meta">@page</span> <span class="keyword">import</span>=<span class="string">&quot;java.util.*&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE HTML PUBLIC <span class="string">&quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;使用pageContext的forward方法跳转页面&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    <span class="comment">//使用pageContext的forward方法跳转到pageContextDemo05.jsp页面，/代表了当前的web应用</span></span><br><span class="line">    pageContext.forward(<span class="string">&quot;/pageContextDemo05.jsp&quot;</span>);</span><br><span class="line">    <span class="comment">//使用pageContext.forward(relativeUrlPath)替代RequestDispatcher.forward(relativeUrlPath)</span></span><br><span class="line">    <span class="comment">//使用RequestDispatcher的forward方法实现的跳转方式</span></span><br><span class="line">    <span class="comment">//pageContext.getRequest().getRequestDispatcher(&quot;/pageContextDemo05.jsp&quot;).forward(request, response);</span></span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>

<p>使用include方法引入资源：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> <span class="keyword">import</span>=<span class="string">&quot;java.util.*&quot;</span> pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE HTML PUBLIC <span class="string">&quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;使用pageContext的include方法引入资源&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    pageContext.include(<span class="string">&quot;/jspfragments/head.jsp&quot;</span>);</span><br><span class="line">%&gt;</span><br><span class="line">    使用pageContext的include方法引入资源</span><br><span class="line">&lt;%</span><br><span class="line">    pageContext.include(<span class="string">&quot;/jspfragments/foot.jsp&quot;</span>);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;hr/&gt;</span><br><span class="line">&lt;%--</span><br><span class="line">&lt;jsp:include page=<span class="string">&quot;/jspfragments/head.jsp&quot;</span>/&gt;</span><br><span class="line">使用jsp:include标签引入资源</span><br><span class="line">&lt;jsp:include page=<span class="string">&quot;/jspfragments/foot.jsp&quot;</span>/&gt;</span><br><span class="line">--%&gt;</span><br></pre></td></tr></table></figure>

<h2 id="其他对象"><a href="#其他对象" class="headerlink" title="其他对象"></a>其他对象</h2><p>request对象</p>
<ul>
<li><strong>内置对象request其实就是HttpServletRequest</strong></li>
</ul>
<p>response对象</p>
<ul>
<li><strong>内置对象response其实就是HttpServletResponse</strong></li>
</ul>
<p>config对象</p>
<ul>
<li><strong>内置对象config其实就是ServletConfig</strong></li>
</ul>
<p>session对象</p>
<ul>
<li><strong>内置对象session其实就是HttpSession。</strong></li>
</ul>
<p>注意：<strong>在page指令配置如下信息，session将不可使用</strong></p>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@page session=<span class="string">&quot;false&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>

<p>application对象</p>
<ul>
<li><strong>内置对象application其实就是ServletContext对象</strong></li>
</ul>
<h1 id="四种属性范围"><a href="#四种属性范围" class="headerlink" title="四种属性范围"></a>四种属性范围</h1><ol>
<li><strong>page【只在一个页面中保存属性，跳转页面无效】</strong></li>
<li><strong>request【只在一次请求中保存属性，服务器跳转有效，浏览器跳转无效】</strong></li>
<li><strong>session【在一个会话范围中保存属性，无论何种跳转均有效，关闭浏览器后无效】</strong></li>
<li><strong>application【在整个服务器中保存，所有用户都可以使用】</strong></li>
</ol>
<p>4个内置对象都支持以下的方法：</p>
<table>
<thead>
<tr>
<th>No.</th>
<th>方法</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>public void setAttribute(String name,Object value)</td>
<td>设置属性</td>
</tr>
<tr>
<td>2</td>
<td>public object getAttribute(String name)</td>
<td>取得属性</td>
</tr>
<tr>
<td>3</td>
<td>public void removeAttribute(String name)</td>
<td>删除属性</td>
</tr>
</tbody></table>
<h2 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h2><p>　1、request：如果客户向服务器发请求，产生的数据，用户看完就没用了，像这样的数据就存在request域,像新闻数据，属于用户看完就没用的。<br>　　2、session：如果客户向服务器发请求，产生的数据，用户用完了等一会儿还有用，像这样的数据就存在session域中，像购物数据，用户需要看到自己购物信息，并且等一会儿，还要用这个购物数据结帐。<br>　　3、application(servletContext)：如果客户向服务器发请求，产生的数据，用户用完了，还要给其它用户用，像这样的数据就存在application(servletContext)域中，像聊天数据。</p>
<h1 id="JavaBean"><a href="#JavaBean" class="headerlink" title="JavaBean"></a>JavaBean</h1><p>JavaBean遵循着特定的写法，通常有以下的规则：</p>
<ul>
<li><strong>有无参的构造函数</strong></li>
<li><strong>成员属性私有化</strong></li>
<li><strong>封装的属性如果需要被外所操作，必须编写public类型的setter、getter方法</strong></li>
</ul>
<p>————就是普通的java类。</p>
<h2 id="在jsp中使用javabean"><a href="#在jsp中使用javabean" class="headerlink" title="在jsp中使用javabean"></a>在jsp中使用javabean</h2><ul>
<li>&lt;jsp:useBean&gt;【在JSP页面中查找javaBean对象或者实例化javaBean对象】</li>
<li>&lt;jsp:setProperty&gt;【设置javaBean的属性】</li>
<li>&lt;jsp:getProperty&gt;【获取javaBean的属性】</li>
</ul>
<h3 id="jsp-useBean"><a href="#jsp-useBean" class="headerlink" title="jsp:useBean"></a>jsp:useBean</h3><ul>
<li><p><code>&lt;jsp:useBean&gt;</code>标签用于<strong>在指定的域范围内查找指定名称的JavaBean对象</strong>：</p>
<ul>
<li><strong>存在则直接返回该JavaBean对象的引用</strong>。</li>
<li><strong>不存在则实例化一个新的JavaBean对象并将它以指定的名称存储到指定的域范围中</strong>。</li>
</ul>
</li>
<li><p>语法：</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:useBean id=<span class="string">&quot;beanName&quot;</span> class=<span class="string">&quot;package.class&quot;</span> scope=<span class="string">&quot;page|request|session|application&quot;</span>/&gt;</span><br><span class="line">　　<span class="string">&quot;id&quot;</span>属性用于指定JavaBean实例对象的引用名称和其存储在域范围中的名称。</span><br><span class="line">　　<span class="string">&quot;class&quot;</span>属性用于指定JavaBean的完整类名（即必须带有包名）。</span><br><span class="line">　　<span class="string">&quot;scope&quot;</span>属性用于指定JavaBean实例对象所存储的域范围，其取值只能是page、request、session和application等四个值中的一个，其默认值是page。</span><br></pre></td></tr></table></figure>

<ul>
<li><p>示例：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">如果JSP不支持`&lt;jsp:useBean&gt;`这个行为，我们要使用Person类是这样使用的：</span><br><span class="line">&lt;%--这里需要导入Person类--%&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;domain.Person&quot;</span> %&gt;</span><br><span class="line"></span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    <span class="comment">//new出对象</span></span><br><span class="line">    <span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line"></span><br><span class="line">    person.setName(<span class="string">&quot;zhongfucheng&quot;</span>);</span><br><span class="line">    System.out.println(person.getName());</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line">    使用&lt;jsp:useBean&gt;：</span><br><span class="line">      &lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">    &lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;title&gt;&lt;/title&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;jsp:useBean id=<span class="string">&quot;person&quot;</span> class=<span class="string">&quot;domain.Person&quot;</span> scope=<span class="string">&quot;page&quot;</span>/&gt;</span><br><span class="line">    &lt;%</span><br><span class="line">        person.setName(<span class="string">&quot;zhongfucheng&quot;</span>);</span><br><span class="line">        System.out.println(person.getName());</span><br><span class="line">    %&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">    &lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="jsp-setProperty"><a href="#jsp-setProperty" class="headerlink" title="jsp:setProperty"></a>jsp:setProperty</h3><ul>
<li>语法：</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:setProerty name=<span class="string">&quot;对象名称&quot;</span> property=<span class="string">&quot;属性名&quot;</span> param=<span class="string">&quot;参数名&quot;</span> value=<span class="string">&quot;值&quot;</span>&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>在语法上可分为4种模式</p>
<ul>
<li>&lt;jsp:setProperty name&#x3D;”对象名称” property&#x3D;”*“&#x2F;&gt;自动匹配</li>
<li>&lt;jsp:setProperty name&#x3D;”对象名称” property&#x3D;”属性名称”&#x2F;&gt;指定属性</li>
<li>&lt;jsp:setProperty name&#x3D;”对象名称” property&#x3D;”属性名称” param&#x3D;”参数名称”&#x2F;&gt;指定参数【很少用】</li>
<li>&lt;jsp:setProperty name&#x3D;”对象名称” property&#x3D;”属性名称” value&#x3D;”内容”&#x2F;&gt;指定内容【很少用】</li>
</ul>
</li>
<li><p>当我们没有学习到<code>&lt;jsp:setProperty&gt;</code>时，我们获取表单的信息，然后导入到javaBean对象中是这样的一种情况：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//表单页面代码：</span></span><br><span class="line"></span><br><span class="line">    &lt;form action=<span class="string">&quot;/zhongfucheng/1.jsp&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">        用户名：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span>&gt;</span><br><span class="line">        年龄：&lt;input type=<span class="string">&quot;text &quot;</span> name=<span class="string">&quot;age&quot;</span>&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交&quot;</span>&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//处理表单提交过来数据的jsp的代码：</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;jsp:useBean id=<span class="string">&quot;person&quot;</span> class=<span class="string">&quot;domain.Person&quot;</span> scope=<span class="string">&quot;page&quot;</span>/&gt;</span><br><span class="line">    &lt;%</span><br><span class="line">        <span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> Integer.parseInt(request.getParameter(<span class="string">&quot;age&quot;</span>));</span><br><span class="line">        </span><br><span class="line">        person.setAge(age);</span><br><span class="line">    </span><br><span class="line">        System.out.println(person.getAge());</span><br><span class="line">        </span><br><span class="line">    %&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用&lt;jsp:setProperty&gt;：</span></span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    &lt;jsp:useBean id=<span class="string">&quot;person&quot;</span> class=<span class="string">&quot;domain.Person&quot;</span> scope=<span class="string">&quot;page&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">    &lt;%--指定属性名称为age--%&gt;</span><br><span class="line">    &lt;jsp:setProperty name=<span class="string">&quot;person&quot;</span> property=<span class="string">&quot;age&quot;</span>/&gt;</span><br><span class="line">    &lt;%</span><br><span class="line">        System.out.println(person.getAge());</span><br><span class="line">    %&gt;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="jsp-getProperty"><a href="#jsp-getProperty" class="headerlink" title="jsp:getProperty"></a>jsp:getProperty</h3><p>&lt;jsp:getProperty&gt;标签用于读取JavaBean对象的属性，也就是调用JavaBean对象的getter方法，然后将读取的属性值转换成字符串后插入进输出的响应正文中。</p>
<ul>
<li><p>语法：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:getProperty name=<span class="string">&quot;对象名&quot;</span> property=<span class="string">&quot;属性名&quot;</span>/&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="EL表法式"><a href="#EL表法式" class="headerlink" title="EL表法式"></a>EL表法式</h1><p>主要用于读取数据，进行内容的显示。</p>
<p>语法：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$&#123;标识符&#125;</span></span><br></pre></td></tr></table></figure>

<p><strong>EL表达式如果找不到相应的对象属性，返回的的空白字符串“”，而不是null，这是EL表达式最大的特点</strong>。</p>
<h2 id="获取数据"><a href="#获取数据" class="headerlink" title="获取数据"></a>获取数据</h2><p>EL表达式语句在执行时，会调用pageContext.findAttribute方法，用标识符为关键字，分别从page、request、session、application四个域中查找相应的对象，找到则返回相应对象，找不到则返回”” （注意，不是null，而是空字符串）。</p>
<p>　　EL表达式可以很轻松获取JavaBean的属性，或获取数组、Collection、Map类型集合的数据</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; import=&quot;java.util.*&quot; pageEncoding=&quot;UTF-8&quot;%&gt;</span><br><span class="line">&lt;%@taglib uri=&quot;http://java.sun.com/jsp/jstl/core&quot; prefix=&quot;c&quot; %&gt;</span><br><span class="line">&lt;%@page import=&quot;me.gacl.domain.Person&quot;%&gt;</span><br><span class="line">&lt;%@page import=&quot;me.gacl.domain.Address&quot;%&gt;</span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">HTML</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>el表达式获取数据<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    &lt;%</span><br><span class="line">        request.setAttribute(&quot;name&quot;,&quot;孤傲苍狼&quot;);</span><br><span class="line">    %&gt;</span><br><span class="line">        &lt;%--$&#123;name&#125;等同于pageContext.findAttribute(&quot;name&quot;) --%&gt;</span><br><span class="line">        使用EL表达式获取数据：$&#123;name&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 在jsp页面中，使用el表达式可以获取bean的属性 --&gt;</span></span><br><span class="line">    &lt;%</span><br><span class="line">        Person p = new Person();</span><br><span class="line">        p.setAge(12);</span><br><span class="line">        request.setAttribute(&quot;person&quot;,p);</span><br><span class="line">    %&gt;</span><br><span class="line">        使用el表达式可以获取bean的属性：$&#123;person.age&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 在jsp页面中，使用el表达式可以获取bean中的。。。。。。。。。的属性 --&gt;</span></span><br><span class="line">    &lt;%</span><br><span class="line">        Person person = new Person();</span><br><span class="line">        Address address = new Address();</span><br><span class="line">        person.setAddress(address);</span><br><span class="line"></span><br><span class="line">        request.setAttribute(&quot;person&quot;,person);</span><br><span class="line">    %&gt;</span><br><span class="line">       $&#123;person.address.name&#125;</span><br><span class="line">     <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 在jsp页面中，使用el表达式获取list集合中指定位置的数据 --&gt;</span></span><br><span class="line">    &lt;%</span><br><span class="line">        Person p1 = new Person();</span><br><span class="line">        p1.setName(&quot;孤傲苍狼&quot;);</span><br><span class="line"></span><br><span class="line">        Person p2 = new Person();</span><br><span class="line">        p2.setName(&quot;白虎神皇&quot;);</span><br><span class="line"></span><br><span class="line">        List<span class="tag">&lt;<span class="name">Person</span>&gt;</span> list = new ArrayList<span class="tag">&lt;<span class="name">Person</span>&gt;</span>();</span><br><span class="line">        list.add(p1);</span><br><span class="line">        list.add(p2);</span><br><span class="line"></span><br><span class="line">        request.setAttribute(&quot;list&quot;,list);</span><br><span class="line">    %&gt;</span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 取list指定位置的数据 --&gt;</span></span><br><span class="line">    $&#123;list[1].name&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 迭代List集合 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">c:forEach</span> <span class="attr">var</span>=<span class="string">&quot;person&quot;</span> <span class="attr">items</span>=<span class="string">&quot;$&#123;list&#125;&quot;</span>&gt;</span></span><br><span class="line">        $&#123;person.name&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">c:forEach</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 在jsp页面中，使用el表达式获取map集合的数据 --&gt;</span></span><br><span class="line">    &lt;%</span><br><span class="line">        Map&lt;String,String&gt; map = new LinkedHashMap&lt;String,String&gt;();</span><br><span class="line">        map.put(&quot;a&quot;,&quot;aaaaxxx&quot;);</span><br><span class="line">        map.put(&quot;b&quot;,&quot;bbbb&quot;);</span><br><span class="line">        map.put(&quot;c&quot;,&quot;cccc&quot;);</span><br><span class="line">        map.put(&quot;1&quot;,&quot;aaaa1111&quot;);</span><br><span class="line">        request.setAttribute(&quot;map&quot;,map);</span><br><span class="line">    %&gt;</span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 根据关键字取map集合的数据 --&gt;</span></span><br><span class="line">      $&#123;map.c&#125;</span><br><span class="line">      $&#123;map[&quot;1&quot;]&#125;</span><br><span class="line">      <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 迭代Map集合 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">c:forEach</span> <span class="attr">var</span>=<span class="string">&quot;me&quot;</span> <span class="attr">items</span>=<span class="string">&quot;$&#123;map&#125;&quot;</span>&gt;</span></span><br><span class="line">          $&#123;me.key&#125;=$&#123;me.value&#125;<span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">c:forEach</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="执行运算"><a href="#执行运算" class="headerlink" title="执行运算"></a>执行运算</h2><p>支持关系运算符和逻辑运算符。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; import=&quot;java.util.*&quot; pageEncoding=&quot;UTF-8&quot;%&gt;</span><br><span class="line"> &lt;%@taglib uri=&quot;http://java.sun.com/jsp/jstl/core&quot; prefix=&quot;c&quot; %&gt;</span><br><span class="line">  &lt;%@page import=&quot;me.gacl.domain.User&quot;%&gt;</span><br><span class="line"> <span class="meta">&lt;!DOCTYPE <span class="keyword">HTML</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">title</span>&gt;</span>el表达式运算符<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">   </span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h3</span>&gt;</span>el表达式进行四则运算：<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">        加法运算：$&#123;365+24&#125;<span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        减法运算：$&#123;365-24&#125;<span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        乘法运算：$&#123;365*24&#125;<span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        除法运算：$&#123;365/24&#125;<span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        </span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>el表达式进行关系运算：<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    &lt;%--$&#123;user == null&#125;和 $&#123;user eq null&#125;两种写法等价--%&gt;</span><br><span class="line">        $&#123;user == null&#125;<span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        $&#123;user eq null&#125;<span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>el表达式使用empty运算符检查对象是否为null(空)<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    &lt;% </span><br><span class="line">        </span><br><span class="line">        List<span class="tag">&lt;<span class="name">String</span>&gt;</span> list = new ArrayList<span class="tag">&lt;<span class="name">String</span>&gt;</span>();</span><br><span class="line">        list.add(&quot;gacl&quot;);</span><br><span class="line">        list.add(&quot;xdp&quot;);</span><br><span class="line">        request.setAttribute(&quot;list&quot;,list);</span><br><span class="line">    %&gt;</span><br><span class="line">    &lt;%--使用empty运算符检查对象是否为null(空) --%&gt;</span><br><span class="line">    <span class="tag">&lt;<span class="name">c:if</span> <span class="attr">test</span>=<span class="string">&quot;$&#123;!empty(list)&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">c:forEach</span> <span class="attr">var</span>=<span class="string">&quot;str&quot;</span> <span class="attr">items</span>=<span class="string">&quot;$&#123;list&#125;&quot;</span>&gt;</span></span><br><span class="line">            $&#123;str&#125;<span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">c:forEach</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">c:if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    &lt;%</span><br><span class="line">        List<span class="tag">&lt;<span class="name">String</span>&gt;</span> emptyList = null;</span><br><span class="line">    %&gt;</span><br><span class="line">    &lt;%--使用empty运算符检查对象是否为null(空) --%&gt;</span><br><span class="line">    <span class="tag">&lt;<span class="name">c:if</span> <span class="attr">test</span>=<span class="string">&quot;$&#123;empty(emptyList)&#125;&quot;</span>&gt;</span></span><br><span class="line">        对不起，没有您想看的数据</span><br><span class="line">    <span class="tag">&lt;/<span class="name">c:if</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>EL表达式中使用二元表达式<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    &lt;% </span><br><span class="line">        session.setAttribute(&quot;user&quot;,new User(&quot;孤傲苍狼&quot;));</span><br><span class="line">   %&gt;</span><br><span class="line">    $&#123;user==null? &quot;对不起，您没有登陆 &quot; : user.username&#125;</span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>EL表达式数据回显<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    &lt;% </span><br><span class="line">        User user = new User();</span><br><span class="line">        user.setGender(&quot;male&quot;);</span><br><span class="line">        //数据回显</span><br><span class="line">        request.setAttribute(&quot;user&quot;,user);</span><br><span class="line">    %&gt;</span><br><span class="line">       <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;male&quot;</span> $&#123;<span class="attr">user.gender</span>==<span class="string">&#x27;male&#x27;</span>?&#x27;<span class="attr">checked</span>&#x27;<span class="attr">:</span>&#x27;&#x27;&#125;&gt;</span>男</span><br><span class="line">       <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;female&quot;</span> $&#123;<span class="attr">user.gender</span>==<span class="string">&#x27;female&#x27;</span>?&#x27;<span class="attr">checked</span>&#x27;<span class="attr">:</span>&#x27;&#x27;&#125;&gt;</span>女</span><br><span class="line">   <span class="tag">&lt;<span class="name">br</span>/&gt;</span>65   <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="EL表达式11个内置对象"><a href="#EL表达式11个内置对象" class="headerlink" title="EL表达式11个内置对象"></a>EL表达式11个内置对象</h2><p>EL表达式主要是来对内容的显示，为了显示的方便，EL表达式提供了11个内置对象。</p>
<ol>
<li>pageContext 对应于JSP页面中的pageContext对象（注意：取的是pageContext对象）</li>
<li>pageScope 代表page域中用于保存属性的Map对象</li>
<li>requestScope 代表request域中用于保存属性的Map对象</li>
<li>sessionScope 代表session域中用于保存属性的Map对象</li>
<li>applicationScope 代表application域中用于保存属性的Map对象</li>
<li>param 表示一个保存了所有请求参数的Map对象</li>
<li>paramValues表示一个保存了所有请求参数的Map对象，它对于某个请求参数，返回的是一个string[]</li>
<li>header 表示一个保存了所有http请求头字段的Map对象</li>
<li>headerValues同上，返回string[]数组。</li>
<li>cookie 表示一个保存了所有cookie的Map对象</li>
<li>initParam 表示一个保存了所有web应用初始化参数的map对象</li>
</ol>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--pageContext内置对象--%&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    pageContext.setAttribute(<span class="string">&quot;pageContext1&quot;</span>, <span class="string">&quot;pageContext&quot;</span>);</span><br><span class="line">%&gt;</span><br><span class="line">pageContext内置对象：$&#123;pageContext.getAttribute(<span class="string">&quot;pageContext1&quot;</span>)&#125;</span><br><span class="line">&lt;br&gt;</span><br><span class="line"></span><br><span class="line">&lt;%--pageScope内置对象--%&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    pageContext.setAttribute(<span class="string">&quot;pageScope1&quot;</span>,<span class="string">&quot;pageScope&quot;</span>);</span><br><span class="line">%&gt;</span><br><span class="line">pageScope内置对象:$&#123;pageScope.pageScope1&#125;</span><br><span class="line">&lt;br&gt;</span><br><span class="line"></span><br><span class="line">&lt;%--requestScope内置对象--%&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    request.setAttribute(<span class="string">&quot;request1&quot;</span>,<span class="string">&quot;reqeust&quot;</span>);</span><br><span class="line">%&gt;</span><br><span class="line">requestScope内置对象:$&#123;requestScope.request1&#125;</span><br><span class="line">&lt;br&gt;</span><br><span class="line"></span><br><span class="line">&lt;%--sessionScope内置对象--%&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    session.setAttribute(<span class="string">&quot;session1&quot;</span>, <span class="string">&quot;session&quot;</span>);</span><br><span class="line">%&gt;</span><br><span class="line">sessionScope内置对象：$&#123;sessionScope.session1&#125;</span><br><span class="line">&lt;br&gt;</span><br><span class="line"></span><br><span class="line">&lt;%--applicationScope内置对象--%&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    application.setAttribute(<span class="string">&quot;application1&quot;</span>,<span class="string">&quot;application&quot;</span>);</span><br><span class="line">%&gt;</span><br><span class="line">applicationScopt内置对象：$&#123;applicationScope.application1&#125;</span><br><span class="line">&lt;br&gt;</span><br><span class="line"></span><br><span class="line">&lt;%--header内置对象--%&gt;</span><br><span class="line">header内置对象：$&#123;header.Host&#125;</span><br><span class="line">&lt;br&gt;</span><br><span class="line"></span><br><span class="line">&lt;%--headerValues内置对象,取出第一个Cookie--%&gt;</span><br><span class="line">headerValues内置对象：$&#123;headerValues.Cookie[<span class="number">0</span>]&#125;</span><br><span class="line">&lt;br&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;%--Cookie内置对象--%&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    <span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;Cookie1&quot;</span>, <span class="string">&quot;cookie&quot;</span>);</span><br><span class="line">%&gt;</span><br><span class="line">Cookie内置对象：$&#123;cookie.JSESSIONID.value&#125;</span><br><span class="line">&lt;br&gt;</span><br><span class="line"></span><br><span class="line">&lt;%--initParam内置对象，需要为该Context配置参数才能看出效果【jsp配置的无效！亲测】--%&gt;</span><br><span class="line"></span><br><span class="line">initParam内置对象:$&#123;initParam.name&#125;</span><br><span class="line"></span><br><span class="line">&lt;br&gt;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="自定义标签"><a href="#自定义标签" class="headerlink" title="自定义标签"></a>自定义标签</h1>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://rshawshank.github.io/2021/09/18/JavaWeb%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%94%EF%BC%89%E2%80%94%E2%80%94%E4%BC%9A%E8%AF%9D%E6%8A%80%E6%9C%AF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="rhb">
      <meta itemprop="description" content="纵浪大化中，不喜亦不惧">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="rhb_blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/09/18/JavaWeb%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%94%EF%BC%89%E2%80%94%E2%80%94%E4%BC%9A%E8%AF%9D%E6%8A%80%E6%9C%AF/" class="post-title-link" itemprop="url">JavaWeb学习（（六）——会话技术</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-09-18 14:19:13 / 修改时间：08:18:56" itemprop="dateCreated datePublished" datetime="2021-09-18T14:19:13Z">2021-09-18</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">学习笔记</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/javaweb/" itemprop="url" rel="index"><span itemprop="name">javaweb</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="会话技术"><a href="#会话技术" class="headerlink" title="会话技术"></a>会话技术</h1><blockquote>
<p>基本概念: 指用户开一个浏览器，<strong>访问一个网站,只要不关闭该浏览器，不管该用户点击多少个超链接，访问多少资源，直到用户关闭浏览器，整个这个过程我们称为一次会话</strong>.</p>
</blockquote>
<h1 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h1><blockquote>
<p>Cookie是由W3C组织提出，最早由netscape社区发展的一种机制</p>
</blockquote>
<ul>
<li>Cookie的流程：浏览器访问服务器，<strong>如果服务器需要记录该用户的状态，就使用response向浏览器发送一个Cookie，浏览器会把Cookie保存起来。当浏览器再次访问服务器的时候，浏览器会把请求的网址连同Cookie一同交给服务器</strong>。</li>
</ul>
<h3 id="Cookie-API"><a href="#Cookie-API" class="headerlink" title="Cookie API"></a>Cookie API</h3><p>　Java中的javax.servlet.http.Cookie类用于创建一个Cookie</p>
<table>
<thead>
<tr>
<th>Cookie类的主要方法</th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>No.</td>
<td>方法</td>
<td>类型</td>
<td>描述</td>
</tr>
<tr>
<td>1</td>
<td>[Cookie](<a target="_blank" rel="noopener" href="https://www.cnblogs.com/xdp-gacl/p/3803033.html#Cookie">https://www.cnblogs.com/xdp-gacl/p/3803033.html#Cookie</a>(java.lang.String, java.lang.String))(<a target="_blank" rel="noopener" href="http://java.sun.com/j2se/1.5/docs/api/java/lang/String.html">String</a> name, <a target="_blank" rel="noopener" href="http://java.sun.com/j2se/1.5/docs/api/java/lang/String.html">String</a> value)</td>
<td>构造方法</td>
<td>实例化Cookie对象，传入cooke名称和cookie的值</td>
</tr>
<tr>
<td>2</td>
<td>public <a target="_blank" rel="noopener" href="http://java.sun.com/j2se/1.5/docs/api/java/lang/String.html">String</a> getName()</td>
<td>普通方法</td>
<td>取得Cookie的名字</td>
</tr>
<tr>
<td>3</td>
<td>public <a target="_blank" rel="noopener" href="http://java.sun.com/j2se/1.5/docs/api/java/lang/String.html">String</a> getValue()</td>
<td>普通方法</td>
<td>取得Cookie的值</td>
</tr>
<tr>
<td>4</td>
<td>public void setValue(<a target="_blank" rel="noopener" href="http://java.sun.com/j2se/1.5/docs/api/java/lang/String.html">String</a> newValue)</td>
<td>普通方法</td>
<td>设置Cookie的值</td>
</tr>
<tr>
<td>5</td>
<td>public void setMaxAge(int expiry)</td>
<td>普通方法</td>
<td>设置Cookie的最大保存时间，即cookie的有效期，当服务器给浏览器回送一个cookie时，如果在服务器端没有调用setMaxAge方法设置cookie的有效期，那么cookie的有效期只在一次会话过程中有效，<strong>用户开一个浏览器，点击多个超链接，访问服务器多个web资源，然后关闭浏览器，整个过程称之为一次会话</strong>，当用户关闭浏览器，会话就结束了，此时cookie就会失效，如果在服务器端使用setMaxAge方法设置了cookie的有效期，比如设置了30分钟，那么当服务器把cookie发送给浏览器时，此时cookie就会在客户端的硬盘上存储30分钟，在30分钟内，即使浏览器关了，cookie依然存在，在30分钟内，打开浏览器访问服务器时，浏览器都会把cookie一起带上，这样就可以在服务器端获取到客户端浏览器传递过来的cookie里面的信息了，这就是cookie设置maxAge和不设置maxAge的区别，不设置maxAge，那么cookie就只在一次会话中有效，一旦用户关闭了浏览器，那么cookie就没有了，那么浏览器是怎么做到这一点的呢，我们启动一个浏览器，就相当于启动一个应用程序，而服务器回送的cookie首先是存在浏览器的缓存中的，当浏览器关闭时，浏览器的缓存自然就没有了，所以存储在缓存中的cookie自然就被清掉了，而如果设置了cookie的有效期，那么浏览器在关闭时，就会把缓存中的cookie写到硬盘上存储起来，这样cookie就能够一直存在了。</td>
</tr>
<tr>
<td>6</td>
<td>public int getMaxAge()</td>
<td>普通方法</td>
<td>获取Cookies的有效期</td>
</tr>
<tr>
<td>7</td>
<td>public void setPath(<a target="_blank" rel="noopener" href="http://java.sun.com/j2se/1.5/docs/api/java/lang/String.html">String</a> uri)</td>
<td>普通方法</td>
<td>设置cookie的有效路径，比如把cookie的有效路径设置为”&#x2F;xdp”，那么浏览器访问”xdp”目录下的web资源时，都会带上cookie，再比如把cookie的有效路径设置为”&#x2F;xdp&#x2F;gacl”，那么浏览器只有在访问”xdp”目录下的”gacl”这个目录里面的web资源时才会带上cookie一起访问，而当访问”xdp”目录下的web资源时，浏览器是不带cookie的</td>
</tr>
<tr>
<td>8</td>
<td>public <a target="_blank" rel="noopener" href="http://java.sun.com/j2se/1.5/docs/api/java/lang/String.html">String</a> getPath()</td>
<td>普通方法</td>
<td>获取cookie的有效路径</td>
</tr>
<tr>
<td>9</td>
<td>public void setDomain(<a target="_blank" rel="noopener" href="http://java.sun.com/j2se/1.5/docs/api/java/lang/String.html">String</a> pattern)</td>
<td>普通方法</td>
<td>设置cookie的有效域</td>
</tr>
<tr>
<td>10</td>
<td>public String getDomain()</td>
<td>普通方法</td>
<td>获取cookie的有效域</td>
</tr>
</tbody></table>
<p>　　response接口也中定义了一个addCookie方法，它用于在其响应头中增加一个相应的Set-Cookie头字段。 同样，request接口中也定义了一个getCookies方法，它用于获取客户端提交的Cookie。</p>
<ul>
<li>Cookie类用于创建一个Cookie对象</li>
<li>response接口中定义了一个addCookie方法，它用于在其响应头中增加一个相应的Set-Cookie头字段</li>
<li>request接口中定义了一个getCookies方法，它用于获取客户端提交的Cookie</li>
</ul>
<h3 id="简单使用Cookie"><a href="#简单使用Cookie" class="headerlink" title="简单使用Cookie"></a>简单使用Cookie</h3><ul>
<li>创建Cookie对象，发送Cookie给浏览器、</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//设置response的编码</span></span><br><span class="line">response.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建Cookie对象，指定名称和值</span></span><br><span class="line"><span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;username&quot;</span>, <span class="string">&quot;zhongfucheng&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//向浏览器给一个Cookie</span></span><br><span class="line">response.addCookie(cookie);</span><br><span class="line"></span><br><span class="line">response.getWriter().write(<span class="string">&quot;我已经向浏览器发送了一个Cookie&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//设置Cookie的时间</span></span><br><span class="line">cookie.setMaxAge(<span class="number">1000</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>保存中文</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">response.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line"><span class="type">PrintWriter</span> <span class="variable">printWriter</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">  </span><br><span class="line"><span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">&quot;中国&quot;</span>;</span><br><span class="line">     </span><br><span class="line">  <span class="comment">//对Unicode字符进行编码</span></span><br><span class="line">  <span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;country&quot;</span>, URLEncoder.encode(name, <span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line"></span><br><span class="line">cookie.setMaxAge(<span class="number">2000</span>);</span><br><span class="line">response.addCookie(cookie);</span><br><span class="line">  </span><br><span class="line">printWriter.write(<span class="string">&quot;我颁发了一个Cookie，值保存的是中文数据&quot;</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>我们发现Cookie保存在硬盘的中文数据是经过编码的，那么我们在<strong>取出Cookie的时候要对中文数据进行解码</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Cookie[] cookies = request.getCookies();</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; cookies != <span class="literal">null</span> &amp;&amp; i &lt; cookies.length; i++) &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> cookies[i].getName();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//经过URLEncoding就要URLDecoding</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> URLDecoder.decode(cookies[i].getValue(), <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">    printWriter.write(name + <span class="string">&quot;------&quot;</span> + value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Cookie不可跨域名性"><a href="#Cookie不可跨域名性" class="headerlink" title="Cookie不可跨域名性"></a>Cookie不可跨域名性</h3><p>Cookie具有不可跨域名性。浏览器判断<strong>一个网站是否能操作另一个网站的Cookie的依据是域名</strong>。所以一般来说，<strong>当我访问baidu的时候，浏览器只会把baidu颁发的Cookie带过去，而不会带上google的Cookie。</strong></p>
<h3 id="Cookie的有效期"><a href="#Cookie的有效期" class="headerlink" title="Cookie的有效期"></a>Cookie的有效期</h3><p><strong>Cookie的有效期是通过setMaxAge()来设置的</strong>。</p>
<ul>
<li>如果MaxAge为<strong>正数</strong>，<strong>浏览器会把Cookie写到硬盘中，只要还在MaxAge秒之前，登陆网站时该Cookie就有效</strong>【不论关闭了浏览器还是电脑】</li>
<li>如果MaxAge为<strong>负数</strong>，<strong>Cookie是临时性的，仅在本浏览器内有效</strong>，关闭浏览器Cookie就失效了，Cookie不会写到硬盘中。Cookie默认值就是-1。这也就为什么在我第一个例子中，如果我没设置Cookie的有效期，在硬盘中就找不到对应的文件。</li>
<li>如果MaxAge为<strong>0</strong>，则表示<strong>删除该Cookie</strong>。Cookie机制没有提供删除Cookie对应的方法，把MaxAge设置为0等同于删除Cookie</li>
</ul>
<h3 id="Cookie的修改和删除"><a href="#Cookie的修改和删除" class="headerlink" title="Cookie的修改和删除"></a>Cookie的修改和删除</h3><ul>
<li>上面我们已经知道了Cookie机制没有提供删除Cookie的方法。其实细心点我们可以发现，Cookie机制也没有提供修改Cookie的方法。那么我们<strong>怎么修改Cookie的值呢</strong>？</li>
<li>Cookie存储的方式<strong>类似于Map集合</strong></li>
<li><strong>Cookie的名称相同，通过response添加到浏览器中，会覆盖原来的Cookie</strong>。</li>
<li>注意：删除，修改Cookie时，<strong>新建的Cookie除了value、maxAge之外的所有属性都要与原Cookie相同</strong>。否则浏览器将<strong>视为不同的Cookie，不予覆盖，导致删除修改失败</strong>！</li>
</ul>
<p>删除Cookie示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CookieDemo02</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//创建一个名字为lastAccessTime的cookie</span></span><br><span class="line">        <span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;lastAccessTime&quot;</span>, System.currentTimeMillis()+<span class="string">&quot;&quot;</span>);</span><br><span class="line">        <span class="comment">//将cookie的有效期设置为0，命令浏览器删除该cookie</span></span><br><span class="line">        cookie.setMaxAge(<span class="number">0</span>);</span><br><span class="line">        response.addCookie(cookie);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Cookie的域名"><a href="#Cookie的域名" class="headerlink" title="Cookie的域名"></a>Cookie的域名</h3><p>Cookie的<strong>domain属性决定运行访问Cookie的域名。domain的值规定为“.域名”</strong></p>
<ul>
<li>Cookie的隐私安全机制决定Cookie是不可跨域名的。也就是说<a href="http://www.baidu.com和www.google.com之间的Cookie是互不交接的。**即使是同一级域名，不同二级域名也不能交接**，也就是说：www.goole.com和www.image.goole.com的Cookie也不能访问">www.baidu.com和www.google.com之间的Cookie是互不交接的。**即使是同一级域名，不同二级域名也不能交接**，也就是说：www.goole.com和www.image.goole.com的Cookie也不能访问</a></li>
</ul>
<h3 id="Cookie的安全属性"><a href="#Cookie的安全属性" class="headerlink" title="Cookie的安全属性"></a>Cookie的安全属性</h3><ul>
<li>HTTP协议不仅仅是无状态的，而且是不安全的！如果不希望Cookie在非安全协议中传输，可以<strong>设置Cookie的secure属性为true，浏览器只会在HTTPS和SSL等安全协议中传输该Cookie</strong>。</li>
<li>当然了，设置secure属性不会将Cookie的内容加密。如果想要保证安全，最好使用md5算法加密。</li>
</ul>
<h1 id="Session"><a href="#Session" class="headerlink" title="Session"></a>Session</h1><blockquote>
<p>Session 是另一种记录浏览器状态的机制。不同的是Cookie保存在浏览器中，Session保存在服务器中。用户使用浏览器访问服务器的时候，服务器把用户的信息以某种的形式记录在服务器，这就是Session</p>
</blockquote>
<h2 id="Session和Cookie的区别"><a href="#Session和Cookie的区别" class="headerlink" title="Session和Cookie的区别"></a>Session和Cookie的区别</h2><ul>
<li>Cookie是把用户的数据写给用户的浏览器。</li>
<li>Session技术把用户的数据写到用户独占的session中。</li>
<li>Session对象由服务器创建，开发人员可以调用request对象的getSession方法得到session对象。</li>
<li><strong>Session可以存储对象，Cookie只能存储字符串。</strong></li>
</ul>
<h2 id="Session的生命周期和有效期"><a href="#Session的生命周期和有效期" class="headerlink" title="Session的生命周期和有效期"></a>Session的生命周期和有效期</h2><ul>
<li>Session在用户<strong>第一次访问服务器Servlet，jsp等动态资源就会被自动创建，Session对象保存在内存里</strong>。</li>
<li>如果访问HTML,IMAGE等静态资源Session不会被创建。</li>
<li>Session生成后，只要用户继续访问，服务器就会更新Session的最后访问时间，无论<strong>是否对Session进行读写，服务器都会认为Session活跃了一次</strong>。</li>
<li>由于会有越来越多的用户访问服务器，因此Session也会越来越多。<strong>为了防止内存溢出，服务器会把长时间没有活跃的Session从内存中删除，这个时间也就是Session的超时时间</strong>。</li>
</ul>
<h2 id="Session创建和销毁"><a href="#Session创建和销毁" class="headerlink" title="Session创建和销毁"></a>Session创建和销毁</h2><p>服务器创建session出来后，会把session的id号，以cookie的形式回写给客户机，这样，只要客户机的浏览器不关，再去访问服务器时，都会带着session的id号去，服务器发现客户机浏览器带session id过来了，就会使用内存中与之对应的session为之服务。</p>
<p>创建：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用request对象的getSession()获取session，如果session不存在则创建一个</span></span><br><span class="line"><span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession();</span><br><span class="line"><span class="comment">//获取session的Id</span></span><br><span class="line"><span class="type">String</span> <span class="variable">sessionId</span> <span class="operator">=</span> session.getId();</span><br><span class="line"><span class="comment">//判断session是不是新创建的</span></span><br><span class="line"><span class="keyword">if</span> (session.isNew()) &#123;</span><br><span class="line">    response.getWriter().print(<span class="string">&quot;session创建成功，session的id是：&quot;</span>+sessionId);</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">    response.getWriter().print(<span class="string">&quot;服务器已经存在session，session的id是：&quot;</span>+sessionId);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>销毁：</p>
<p>　session对象默认30分钟没有使用，则服务器会自动销毁session，在web.xml文件中可以手工配置session的失效时间</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">version</span>=<span class="string">&quot;2.5&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns</span>=<span class="string">&quot;http://java.sun.com/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://java.sun.com/xml/ns/javaee</span></span></span><br><span class="line"><span class="string"><span class="tag">    http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span><span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.jsp<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 设置Session的有效时间:以分钟为单位--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">session-config</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">session-timeout</span>&gt;</span>15<span class="tag">&lt;/<span class="name">session-timeout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">session-config</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>在tomcat&#x2F;conf&#x2F;web.xml文件中设置，时间值为20分钟，<strong>所有的WEB应用都有效</strong></li>
<li>在单个的web.xml文件中设置，对单个web应用有效，<strong>如果有冲突，以自己的web应用为准</strong>。</li>
</ul>
<p>当需要在程序中手动设置Session失效时，可以手工调用<strong>session.invalidate</strong>方法，摧毁session。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession();</span><br><span class="line"><span class="comment">//手工调用session.invalidate方法，摧毁session</span></span><br><span class="line">session.invalidate();</span><br></pre></td></tr></table></figure>

<h2 id="Session应用"><a href="#Session应用" class="headerlink" title="Session应用"></a>Session应用</h2><h3 id="1、表单重复提交"><a href="#1、表单重复提交" class="headerlink" title="1、表单重复提交"></a>1、表单重复提交</h3><ul>
<li>网络延迟</li>
<li>表单提交后，用户多次刷新</li>
<li>表单提交后，点击浏览器“后退”按钮回退到表单页面后再次提交</li>
</ul>
<p>方法一：只能解决在网络延迟的情况下防止用户多次提交</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DoFormServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//客户端是以UTF-8编码传输数据到服务器端的，所以需要设置服务器端以UTF-8的编码进行接收，否则对于中文数据就会产生乱码</span></span><br><span class="line">        request.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">userName</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//让当前的线程睡眠3秒钟，模拟网络延迟而导致表单重复提交的现象</span></span><br><span class="line">            Thread.sleep(<span class="number">3</span>*<span class="number">1000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;向数据库中插入数据：&quot;</span>+userName);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>方法二：利用Session</p>
<p>具体的做法：<strong>在服务器端生成一个唯一的随机标识号，专业术语称为Token(令牌)，同时在当前用户的Session域中保存这个Token。然后将Token发送到客户端的Form表单中，在Form表单中使用隐藏域来存储这个Token，表单提交的时候连同这个Token一起提交到服务器端，然后在服务器端判断客户端提交上来的Token与服务器端生成的Token是否一致，如果不一致，那就是重复提交了，此时服务器端就可以不处理重复提交的表单。如果相同则处理表单提交，处理完后清除当前用户的Session域中存储的标识号。</strong></p>
<p>在下列情况下，服务器程序将拒绝处理用户提交的表单请求：</p>
<ol>
<li>存储Session域中的Token(令牌)与表单提交的Token(令牌)不同。</li>
<li>当前用户的Session中不存在Token(令牌)。</li>
<li>用户提交的表单数据中没有Token(令牌)。</li>
</ol>
<p>创建Token：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FormServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> -<span class="number">884689940866074733L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> TokenProccessor.getInstance().makeToken();<span class="comment">//创建令牌</span></span><br><span class="line">        System.out.println(<span class="string">&quot;在FormServlet中生成的token：&quot;</span>+token);</span><br><span class="line">        request.getSession().setAttribute(<span class="string">&quot;token&quot;</span>, token);  <span class="comment">//在服务器使用session保存token(令牌)</span></span><br><span class="line">        request.getRequestDispatcher(<span class="string">&quot;/form.jsp&quot;</span>).forward(request, response);<span class="comment">//跳转到form.jsp页面</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在jsp文件中使用隐藏域来存储Token：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> <span class="keyword">import</span>=<span class="string">&quot;java.util.*&quot;</span> pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE HTML PUBLIC <span class="string">&quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;</span>&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;title&gt;form表单&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;form action=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/servlet/DoFormServlet&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">        &lt;%--使用隐藏域存储生成的token--%&gt;</span><br><span class="line">        &lt;%--</span><br><span class="line">            &lt;input type=<span class="string">&quot;hidden&quot;</span> name=<span class="string">&quot;token&quot;</span> value=<span class="string">&quot;&lt;%=session.getAttribute(&quot;</span>token<span class="string">&quot;) %&gt;&quot;</span>&gt;</span><br><span class="line">        --%&gt;</span><br><span class="line">        &lt;%--使用EL表达式取出存储在session中的token--%&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;hidden&quot;</span> name=<span class="string">&quot;token&quot;</span> value=<span class="string">&quot;$&#123;token&#125;&quot;</span>/&gt;</span><br><span class="line">        用户名：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span>&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;提交&quot;</span>&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>处理表单请求:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DoFormServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">                <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">            <span class="type">boolean</span> <span class="variable">b</span> <span class="operator">=</span> isRepeatSubmit(request);<span class="comment">//判断用户是否是重复提交</span></span><br><span class="line">            <span class="keyword">if</span>(b==<span class="literal">true</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;请不要重复提交&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            request.getSession().removeAttribute(<span class="string">&quot;token&quot;</span>);<span class="comment">//移除session中的token</span></span><br><span class="line">            System.out.println(<span class="string">&quot;处理用户提交请求！！&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 判断客户端提交上来的令牌和服务器端生成的令牌是否一致</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">         *         true 用户重复提交了表单</span></span><br><span class="line"><span class="comment">         *         false 用户没有重复提交表单</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">isRepeatSubmit</span><span class="params">(HttpServletRequest request)</span> &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">client_token</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;token&quot;</span>);</span><br><span class="line">            <span class="comment">//1、如果用户提交的表单数据中没有token，则用户是重复提交了表单</span></span><br><span class="line">            <span class="keyword">if</span>(client_token==<span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//取出存储在Session中的token</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">server_token</span> <span class="operator">=</span> (String) request.getSession().getAttribute(<span class="string">&quot;token&quot;</span>);</span><br><span class="line">            <span class="comment">//2、如果当前用户的Session中不存在Token(令牌)，则用户是重复提交了表单</span></span><br><span class="line">            <span class="keyword">if</span>(server_token==<span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//3、存储在Session中的Token(令牌)与表单提交的Token(令牌)不同，则用户是重复提交了表单</span></span><br><span class="line">            <span class="keyword">if</span>(!client_token.equals(server_token))&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://rshawshank.github.io/2021/09/18/JavaWeb%E5%AD%A6%E4%B9%A0%EF%BC%88%E5%9B%9B%EF%BC%89%E2%80%94%E2%80%94Servlet%EF%BC%88%E4%BA%8C%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="rhb">
      <meta itemprop="description" content="纵浪大化中，不喜亦不惧">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="rhb_blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/09/18/JavaWeb%E5%AD%A6%E4%B9%A0%EF%BC%88%E5%9B%9B%EF%BC%89%E2%80%94%E2%80%94Servlet%EF%BC%88%E4%BA%8C%EF%BC%89/" class="post-title-link" itemprop="url">JavaWeb学习（四）——Servlet（二）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-09-18 10:03:05 / 修改时间：06:20:56" itemprop="dateCreated datePublished" datetime="2021-09-18T10:03:05Z">2021-09-18</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">学习笔记</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/javaweb/" itemprop="url" rel="index"><span itemprop="name">javaweb</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="HttpServlet抽象类"><a href="#HttpServlet抽象类" class="headerlink" title="HttpServlet抽象类"></a>HttpServlet抽象类</h1><p>HttpServlet抽象类是继承于GenericServlet抽象类而来的。使用HttpServlet抽象类时，还需要借助分别代表Servlet请求和Servlet响应的HttpServletRequest和HttpServletResponse对象。</p>
<ul>
<li><p>HttpServletRequest接口扩展于javax.servlet.ServletRequest接口</p>
</li>
<li><p>HttpServletResponse接口扩展于javax.servlet.servletResponse接口。</p>
</li>
</ul>
<blockquote>
<p>request和response对象</p>
<blockquote>
<p>Tomcat收到客户端的http请求，会针对每一次请求，分别创建一个<strong>代表请求的request对象</strong>、和<strong>代表响应的response对象</strong></p>
</blockquote>
<p>request对象代表http请求：<strong>获取浏览器提交过来的数据，找request对象</strong>。</p>
<p>response对象代表http响应：<strong>向浏览器输出数据，找response对象</strong>。</p>
</blockquote>
<h1 id="HttpServletResponse对象"><a href="#HttpServletResponse对象" class="headerlink" title="HttpServletResponse对象"></a>HttpServletResponse对象</h1><p>HttpServletResponse对象代表服务器的响应。这个对象中封装了向客户端发送数据、发送响应头，发送响应状态码的方法。</p>
<h2 id="常见应用"><a href="#常见应用" class="headerlink" title="常见应用"></a>常见应用</h2><h3 id="1、使用OutputStream流向客户端浏览器输出中文数据"><a href="#1、使用OutputStream流向客户端浏览器输出中文数据" class="headerlink" title="1、使用OutputStream流向客户端浏览器输出中文数据"></a>1、使用OutputStream流向客户端浏览器输出中文数据</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResponseDemo01</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">4312868947607181532L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        outputChineseByOutputStream(response);<span class="comment">//使用OutputStream流输出中文</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 使用OutputStream流输出中文</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">outputChineseByOutputStream</span><span class="params">(HttpServletResponse response)</span> <span class="keyword">throws</span> IOException&#123;</span><br><span class="line">        <span class="comment">/**使用OutputStream输出中文注意问题：</span></span><br><span class="line"><span class="comment">         * 在服务器端，数据是以哪个码表输出的，那么就要控制客户端浏览器以相应的码表打开，</span></span><br><span class="line"><span class="comment">         * 比如：outputStream.write(&quot;中国&quot;.getBytes(&quot;UTF-8&quot;));//使用OutputStream流向客户端浏览器输出中文，以UTF-8的编码进行输出</span></span><br><span class="line"><span class="comment">         * 此时就要控制客户端浏览器以UTF-8的编码打开，否则显示的时候就会出现中文乱码，那么在服务器端如何控制客户端浏览器以以UTF-8的编码显示数据呢？</span></span><br><span class="line"><span class="comment">         * 可以通过设置响应头控制浏览器的行为，例如：</span></span><br><span class="line"><span class="comment">         * response.setHeader(&quot;content-type&quot;, &quot;text/html;charset=UTF-8&quot;);//通过设置响应头控制浏览器以UTF-8的编码显示数据</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">data</span> <span class="operator">=</span> <span class="string">&quot;中国&quot;</span>;</span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">outputStream</span> <span class="operator">=</span> response.getOutputStream();<span class="comment">//获取OutputStream输出流</span></span><br><span class="line">        response.setHeader(<span class="string">&quot;content-type&quot;</span>, <span class="string">&quot;text/html;charset=UTF-8&quot;</span>);<span class="comment">//通过设置响应头控制浏览器以UTF-8的编码显示数据，如果不加这句话，那么浏览器显示的将是乱码</span></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * data.getBytes()是一个将字符转换成字节数组的过程，这个过程中一定会去查码表，</span></span><br><span class="line"><span class="comment">         * 如果是中文的操作系统环境，默认就是查找查GB2312的码表，</span></span><br><span class="line"><span class="comment">         * 将字符转换成字节数组的过程就是将中文字符转换成GB2312的码表上对应的数字</span></span><br><span class="line"><span class="comment">         * 比如： &quot;中&quot;在GB2312的码表上对应的数字是98</span></span><br><span class="line"><span class="comment">         *         &quot;国&quot;在GB2312的码表上对应的数字是99</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * getBytes()方法如果不带参数，那么就会根据操作系统的语言环境来选择转换码表，如果是中文操作系统，那么就使用GB2312的码表</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">byte</span>[] dataByteArr = data.getBytes(<span class="string">&quot;UTF-8&quot;</span>);<span class="comment">//将字符转换成字节数组，指定以UTF-8编码进行转换</span></span><br><span class="line">        outputStream.write(dataByteArr);<span class="comment">//使用OutputStream流向客户端输出字节数组</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2、使用PrintWriter流向客户端浏览器输出中文数据"><a href="#2、使用PrintWriter流向客户端浏览器输出中文数据" class="headerlink" title="2、使用PrintWriter流向客户端浏览器输出中文数据"></a>2、使用PrintWriter流向客户端浏览器输出中文数据</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResponseDemo01</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">4312868947607181532L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        outputChineseByPrintWriter(response);<span class="comment">//使用PrintWriter流输出中文</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 使用PrintWriter流输出中文</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">outputChineseByPrintWriter</span><span class="params">(HttpServletResponse response)</span> <span class="keyword">throws</span> IOException&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">data</span> <span class="operator">=</span> <span class="string">&quot;中国&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//通过设置响应头控制浏览器以UTF-8的编码显示数据，如果不加这句话，那么浏览器显示的将是乱码</span></span><br><span class="line">        <span class="comment">//response.setHeader(&quot;content-type&quot;, &quot;text/html;charset=UTF-8&quot;);</span></span><br><span class="line"></span><br><span class="line">        response.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);<span class="comment">//设置将字符以&quot;UTF-8&quot;编码输出到客户端浏览器</span></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * PrintWriter out = response.getWriter();这句代码必须放在response.setCharacterEncoding(&quot;UTF-8&quot;);之后</span></span><br><span class="line"><span class="comment">         * 否则response.setCharacterEncoding(&quot;UTF-8&quot;)这行代码的设置将无效，浏览器显示的时候还是乱码</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> response.getWriter();<span class="comment">//获取PrintWriter输出流</span></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 多学一招：使用HTML语言里面的&lt;meta&gt;标签来控制浏览器行为，模拟通过设置响应头控制浏览器行为</span></span><br><span class="line"><span class="comment">         * out.write(&quot;&lt;meta http-equiv=&#x27;content-type&#x27; content=&#x27;text/html;charset=UTF-8&#x27;/&gt;&quot;);</span></span><br><span class="line"><span class="comment">         * 等同于response.setHeader(&quot;content-type&quot;, &quot;text/html;charset=UTF-8&quot;);</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        out.write(<span class="string">&quot;&lt;meta http-equiv=&#x27;content-type&#x27; content=&#x27;text/html;charset=UTF-8&#x27;/&gt;&quot;</span>);</span><br><span class="line">        out.write(data);<span class="comment">//使用PrintWriter流向客户端输出字符</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3、使用OutputStream或者PrintWriter向客户端浏览器输出数字"><a href="#3、使用OutputStream或者PrintWriter向客户端浏览器输出数字" class="headerlink" title="3、使用OutputStream或者PrintWriter向客户端浏览器输出数字"></a>3、使用OutputStream或者PrintWriter向客户端浏览器输出数字</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResponseDemo01</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">4312868947607181532L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        outputOneByOutputStream(response);<span class="comment">//使用OutputStream输出1到客户端浏览器</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 使用OutputStream流输出数字1</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">outputOneByOutputStream</span><span class="params">(HttpServletResponse response)</span> <span class="keyword">throws</span> IOException&#123;</span><br><span class="line">        response.setHeader(<span class="string">&quot;content-type&quot;</span>, <span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">outputStream</span> <span class="operator">=</span> response.getOutputStream();</span><br><span class="line">        outputStream.write(<span class="string">&quot;使用OutputStream流输出数字1：&quot;</span>.getBytes(<span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">        <span class="comment">//1+&quot;&quot;：数字1就变成了字符串1</span></span><br><span class="line">       outputStream.write((<span class="number">1</span>+<span class="string">&quot;&quot;</span>).getBytes());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4、文件下载"><a href="#4、文件下载" class="headerlink" title="4、文件下载"></a>4、文件下载</h3><p>文件下载功能的实现思路：</p>
<p>　　1.获取要下载的文件的绝对路径</p>
<p>　　2.获取要下载的文件名</p>
<p>　　3.设置content-disposition响应头控制浏览器以下载的形式打开文件</p>
<p>　　4.获取要下载的文件输入流</p>
<p>　　5.创建数据缓冲区</p>
<p>　　6.通过response对象获取OutputStream流</p>
<p>　　7.将FileInputStream流写入到buffer缓冲区</p>
<p>　　8.使用OutputStream将缓冲区的数据输出到客户端浏览器</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> gacl</span></span><br><span class="line"><span class="comment"> * 文件下载</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResponseDemo02</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        downloadFileByOutputStream(response);<span class="comment">//下载文件，通过OutputStream流</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 下载文件，通过OutputStream流</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> FileNotFoundException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">downloadFileByOutputStream</span><span class="params">(HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> FileNotFoundException, IOException &#123;</span><br><span class="line">        <span class="comment">//1.获取要下载的文件的绝对路径</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">realPath</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletContext().getRealPath(<span class="string">&quot;/download/1.JPG&quot;</span>);</span><br><span class="line">        <span class="comment">//2.获取要下载的文件名</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> realPath.substring(realPath.lastIndexOf(<span class="string">&quot;\\&quot;</span>)+<span class="number">1</span>);</span><br><span class="line">        <span class="comment">//3.设置content-disposition响应头控制浏览器以下载的形式打开文件</span></span><br><span class="line">        response.setHeader(<span class="string">&quot;content-disposition&quot;</span>, <span class="string">&quot;attachment;filename=&quot;</span>+fileName);</span><br><span class="line">        <span class="comment">//4.获取要下载的文件输入流</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(realPath);</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//5.创建数据缓冲区</span></span><br><span class="line">        <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="comment">//6.通过response对象获取OutputStream流</span></span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">out</span> <span class="operator">=</span> response.getOutputStream();</span><br><span class="line">        <span class="comment">//7.将FileInputStream流写入到buffer缓冲区</span></span><br><span class="line">        <span class="keyword">while</span> ((len = in.read(buffer)) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">//8.使用OutputStream将缓冲区的数据输出到客户端浏览器</span></span><br><span class="line">            out.write(buffer,<span class="number">0</span>,len);</span><br><span class="line">        &#125;</span><br><span class="line">        in.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当下载中文文件时，文件名需要经过URL编码，否则会出现文件名乱码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> gacl</span></span><br><span class="line"><span class="comment"> * 文件下载</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResponseDemo02</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        downloadChineseFileByOutputStream(response);<span class="comment">//下载中文文件</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 下载中文文件,中文文件下载时，文件名要经过URL编码，否则会出现文件名乱码</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> FileNotFoundException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">downloadChineseFileByOutputStream</span><span class="params">(HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> FileNotFoundException, IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">realPath</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletContext().getRealPath(<span class="string">&quot;/download/张家界国家森林公园.JPG&quot;</span>);<span class="comment">//获取要下载的文件的绝对路径</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> realPath.substring(realPath.lastIndexOf(<span class="string">&quot;\\&quot;</span>)+<span class="number">1</span>);<span class="comment">//获取要下载的文件名</span></span><br><span class="line">        <span class="comment">//设置content-disposition响应头控制浏览器以下载的形式打开文件，中文文件名要使用URLEncoder.encode方法进行编码，否则会出现文件名乱码</span></span><br><span class="line">        response.setHeader(<span class="string">&quot;content-disposition&quot;</span>, <span class="string">&quot;attachment;filename=&quot;</span>+URLEncoder.encode(fileName, <span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(realPath);<span class="comment">//获取文件输入流</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">out</span> <span class="operator">=</span> response.getOutputStream();</span><br><span class="line">        <span class="keyword">while</span> ((len = in.read(buffer)) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            out.write(buffer,<span class="number">0</span>,len);<span class="comment">//将缓冲区的数据输出到客户端浏览器</span></span><br><span class="line">        &#125;</span><br><span class="line">        in.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>文件下载注意事项：<strong>编写文件下载功能时推荐使用OutputStream流，避免使用PrintWriter流，因为OutputStream流是字节流，可以处理任意类型的数据，而PrintWriter流是字符流，只能处理字符数据，如果用字符流处理字节数据，会导致数据丢失。</strong></p>
<h3 id="5、生成验证码"><a href="#5、生成验证码" class="headerlink" title="5、生成验证码"></a>5、生成验证码</h3><p>生成图片需要使用到bufferedImage类</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/xdp-gacl/p/3798190.html">javaweb学习总结(九)—— 通过Servlet生成验证码图片 - 孤傲苍狼 - 博客园 (cnblogs.com)</a></p>
<p>示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResponseDemo03</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        response.setHeader(<span class="string">&quot;refresh&quot;</span>, <span class="string">&quot;5&quot;</span>);<span class="comment">//设置refresh响应头控制浏览器每隔5秒钟刷新一次</span></span><br><span class="line">        <span class="comment">//1.在内存中创建一张图片</span></span><br><span class="line">        <span class="type">BufferedImage</span> <span class="variable">image</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedImage</span>(<span class="number">80</span>, <span class="number">20</span>, BufferedImage.TYPE_INT_RGB);</span><br><span class="line">        <span class="comment">//2.得到图片</span></span><br><span class="line">        <span class="comment">//Graphics g = image.getGraphics();</span></span><br><span class="line">        <span class="type">Graphics2D</span> <span class="variable">g</span> <span class="operator">=</span> (Graphics2D)image.getGraphics();</span><br><span class="line">        g.setColor(Color.WHITE);<span class="comment">//设置图片的背景色</span></span><br><span class="line">        g.fillRect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">80</span>, <span class="number">20</span>);<span class="comment">//填充背景色</span></span><br><span class="line">        <span class="comment">//3.向图片上写数据</span></span><br><span class="line">        g.setColor(Color.BLUE);<span class="comment">//设置图片上字体的颜色</span></span><br><span class="line">        g.setFont(<span class="keyword">new</span> <span class="title class_">Font</span>(<span class="literal">null</span>, Font.BOLD, <span class="number">20</span>));</span><br><span class="line">        g.drawString(makeNum(), <span class="number">0</span>, <span class="number">20</span>);</span><br><span class="line">        <span class="comment">//4.设置响应头控制浏览器浏览器以图片的方式打开</span></span><br><span class="line">        response.setContentType(<span class="string">&quot;image/jpeg&quot;</span>);<span class="comment">//等同于response.setHeader(&quot;Content-Type&quot;, &quot;image/jpeg&quot;);</span></span><br><span class="line">        <span class="comment">//5.设置响应头控制浏览器不缓存图片数据</span></span><br><span class="line">        response.setDateHeader(<span class="string">&quot;expries&quot;</span>, -<span class="number">1</span>);</span><br><span class="line">        response.setHeader(<span class="string">&quot;Cache-Control&quot;</span>, <span class="string">&quot;no-cache&quot;</span>);</span><br><span class="line">        response.setHeader(<span class="string">&quot;Pragma&quot;</span>, <span class="string">&quot;no-cache&quot;</span>);</span><br><span class="line">        <span class="comment">//6.将图片写给浏览器</span></span><br><span class="line">        ImageIO.write(image, <span class="string">&quot;jpg&quot;</span>, response.getOutputStream());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 生成随机数字</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String <span class="title function_">makeNum</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Random</span> <span class="variable">random</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">        <span class="type">String</span> <span class="variable">num</span> <span class="operator">=</span> random.nextInt(<span class="number">9999999</span>)+<span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="type">StringBuffer</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">7</span>-num.length(); i++) &#123;</span><br><span class="line">            sb.append(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        num = sb.toString()+num;</span><br><span class="line">        <span class="keyword">return</span> num;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6、设置响应头控制浏览器行为"><a href="#6、设置响应头控制浏览器行为" class="headerlink" title="6、设置响应头控制浏览器行为"></a>6、设置响应头控制浏览器行为</h3><ul>
<li>设置http响应头控制浏览器禁止缓存当前文档内容</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">response.setDateHeader(<span class="string">&quot;expries&quot;</span>, -<span class="number">1</span>);</span><br><span class="line">response.setHeader(<span class="string">&quot;Cache-Control&quot;</span>, <span class="string">&quot;no-cache&quot;</span>);</span><br><span class="line">response.setHeader(<span class="string">&quot;Pragma&quot;</span>, <span class="string">&quot;no-cache&quot;</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li><p>设置http响应头控制浏览器定时刷新网页(refresh)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response.setHeader(<span class="string">&quot;refresh&quot;</span>, <span class="string">&quot;5&quot;</span>);<span class="comment">//设置refresh响应头控制浏览器每隔5秒钟刷新一次</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="7、通过response实现请求重定向"><a href="#7、通过response实现请求重定向" class="headerlink" title="7、通过response实现请求重定向"></a>7、通过response实现请求重定向</h3><p>请求重定向指：<strong>一个web资源收到客户端请求后，通知客户端去访问另外一个web资源，这称之为请求重定向。</strong></p>
<ul>
<li><p>应用场景：用户登陆，用户首先访问登录页面，登录成功后，就会跳转到某个页面，这个过程就是一个请求重定向的过程</p>
</li>
<li><p>实现方式：response.sendRedirect(String location)，即调用response对象的sendRedirect方法实现请求重定向　　</p>
</li>
<li><p>sendRedirect内部的实现原理：使用response设置302状态码和设置location响应头实现重定向</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResponseDemo04</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 1.调用sendRedirect方法实现请求重定向,</span></span><br><span class="line"><span class="comment">         * sendRedirect方法内部调用了</span></span><br><span class="line"><span class="comment">         * response.setHeader(&quot;Location&quot;, &quot;/JavaWeb_HttpServletResponse_Study_20140615/index.jsp&quot;);</span></span><br><span class="line"><span class="comment">         * response.setStatus(HttpServletResponse.SC_FOUND);//设置302状态码，等同于response.setStatus(302);</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        response.sendRedirect(<span class="string">&quot;/JavaWeb_HttpServletResponse_Study_20140615/index.jsp&quot;</span>);</span><br><span class="line"><span class="comment">/*其实sendRedirect()方法就是对setStatus()和setHeader()进行封装，原理就是setStatus()和setHeader()*/</span></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="comment">//2.使用response设置302状态码和设置location响应头实现重定向实现请求重定向</span></span><br><span class="line">        <span class="comment">//response.setHeader(&quot;Location&quot;, &quot;/JavaWeb_HttpServletResponse_Study_20140615/index.jsp&quot;);</span></span><br><span class="line">        <span class="comment">//response.setStatus(HttpServletResponse.SC_FOUND);//设置302状态码，等同于response.setStatus(302);</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="8、数据压缩"><a href="#8、数据压缩" class="headerlink" title="8、数据压缩"></a>8、数据压缩</h3><p>GZIP压缩类可对数据进行压缩：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">		<span class="comment">//GZIP的构造方法需要一个OutputStream子类对象，究竟哪个对象适合，我们看下write()方法</span></span><br><span class="line">        <span class="type">GZIPOutputStream</span> <span class="variable">gzipOutputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GZIPOutputStream</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//查看了下API，write()接收的是byte[]类型的。</span></span><br><span class="line">        gzipOutputStream.write();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//既然是byte[]类型，那么我就给他一个ByteArrayOutputStream</span></span><br><span class="line">			<span class="comment">//不能以匿名内部类的方式给GZIPOutputStream，必须把ByteArrayOutputStream定义出来</span></span><br><span class="line">				<span class="comment">//因为GZIPOutputStream写数据的时候，是把数据写到ByteArrayOutputStream上的，等会还要把数据取出来，再写给浏览器</span></span><br><span class="line">        <span class="type">GZIPOutputStream</span> <span class="variable">gzipOutputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GZIPOutputStream</span>(<span class="keyword">new</span> <span class="title class_">ByteArrayOutputStream</span>());</span><br><span class="line">	</span><br><span class="line">        <span class="comment">//创建GZIPOutputStream对象，给予它ByteArrayOutputStream</span></span><br><span class="line">        <span class="type">ByteArrayOutputStream</span> <span class="variable">byteArrayOutputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ByteArrayOutputStream</span>();</span><br><span class="line">        <span class="type">GZIPOutputStream</span> <span class="variable">gzipOutputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GZIPOutputStream</span>(byteArrayOutputStream);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//GZIP对数据压缩，GZIP写入的数据是保存在byteArrayOutputStream上的</span></span><br><span class="line">        gzipOutputStream.write(ss.getBytes());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//gzipOutputStream有缓冲，把缓冲清了，并顺便关闭流</span></span><br><span class="line">        gzipOutputStream.close();</span><br><span class="line"></span><br><span class="line">          <span class="comment">//将压缩的数据取出来</span></span><br><span class="line">        <span class="type">byte</span>[] bytes = byteArrayOutputStream.toByteArray();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//将压缩的数据写给浏览器</span></span><br><span class="line">        response.getOutputStream().write(bytes);</span><br><span class="line"></span><br><span class="line"><span class="comment">//压缩后的数据如果不告诉浏览器是压缩数据会乱码</span></span><br><span class="line">        <span class="comment">//告诉浏览器这是gzip压缩的数据</span></span><br><span class="line">        response.setHeader(<span class="string">&quot;Content-Encoding&quot;</span>,<span class="string">&quot;gzip&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//再将压缩的数据写给浏览器</span></span><br><span class="line">        response.getOutputStream().write(bytes);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="输出流——getWriter-和getOutputStream"><a href="#输出流——getWriter-和getOutputStream" class="headerlink" title="输出流——getWriter()和getOutputStream()"></a>输出流——getWriter()和getOutputStream()</h3><ol>
<li><strong>getWriter()和getOutputStream()两个方法不能同时调用</strong>。</li>
<li>Servlet程序向ServletOutputStream或PrintWriter对象中<strong>写入的数据将被Servlet引擎从response里面获取，Servlet引擎将这些数据当作响应消息的正文，然后再与响应状态行和各响应头组合后输出到客户端</strong>。</li>
<li>Servlet的<strong>serice()方法结束后【也就是doPost()或者doGet()结束后】</strong>，Servlet引擎将检查getWriter或getOutputStream方法返回的输出流对象是否已经调用过close方法，<strong>如果没有，Servlet引擎将调用close方法关闭该输出流对象.</strong></li>
</ol>
<h1 id="HttpServletRequest对象"><a href="#HttpServletRequest对象" class="headerlink" title="HttpServletRequest对象"></a>HttpServletRequest对象</h1><blockquote>
<p>HttpServletRequest对象代表客户端的请求，当客户端通过HTTP协议访问服务器时，HTTP请求头中的所有信息都封装在这个对象中，开发人员通过这个对象的方法，可以获得客户这些信息。</p>
</blockquote>
<p>简单来说，<strong>要得到浏览器信息，就找HttpServletRequest对象</strong></p>
<p>request对象作为一个域对象(Map容器)使用时，主要是通过以下的四个方法来操作</p>
<ul>
<li>setAttribute(String name,Object o)方法，将数据作为request对象的一个属性存放到request对象中，例如：request.setAttribute(“data”, data);</li>
<li>getAttribute(String name)方法，获取request对象的name属性的属性值，例如：request.getAttribute(“data”)</li>
<li>removeAttribute(String name)方法，移除request对象的name属性，例如：request.removeAttribute(“data”)</li>
<li>getAttributeNames方法，获取request对象的所有属性名，返回的是一个，例如：Enumeration<String> attrNames &#x3D; request.getAttributeNames();</li>
</ul>
<h2 id="常见api"><a href="#常见api" class="headerlink" title="常见api"></a>常见api</h2><h3 id="获得客户机【浏览器】信息"><a href="#获得客户机【浏览器】信息" class="headerlink" title="获得客户机【浏览器】信息"></a>获得客户机【浏览器】信息</h3><ul>
<li><strong>getRequestURL方法返回客户端发出请求时的完整URL。</strong></li>
<li>getRequestURI方法返回请求行中的资源名部分。</li>
<li><strong>getQueryString 方法返回请求行中的参数部分。</strong></li>
<li>getPathInfo方法返回请求URL中的额外路径信息。额外路径信息是请求URL中的位于Servlet的路径之后和查询参数之前的内容，它以“&#x2F;”开头。</li>
<li><strong>getRemoteAddr方法返回发出请求的客户机的IP地址</strong></li>
<li>getRemoteHost方法返回发出请求的客户机的完整主机名</li>
<li>getRemotePort方法返回客户机所使用的网络端口号</li>
<li><strong>getLocalAddr方法返回WEB服务器的IP地址。</strong></li>
<li>getLocalName方法返回WEB服务器的主机名</li>
</ul>
<h3 id="获得客户机请求头"><a href="#获得客户机请求头" class="headerlink" title="获得客户机请求头"></a>获得客户机请求头</h3><ul>
<li><strong>getHeader(string name)方法:String</strong>　　</li>
<li>getHeaders(String name)方法:Enumeration</li>
<li>getHeaderNames()方法</li>
</ul>
<h3 id="获得客户机请求参数-客户端提交的数据"><a href="#获得客户机请求参数-客户端提交的数据" class="headerlink" title="获得客户机请求参数(客户端提交的数据)"></a>获得客户机请求参数(客户端提交的数据)</h3><ul>
<li>getParameter(String)方法**(常用)**</li>
<li>getParameterValues(String name)方法**(常用)**</li>
<li>getParameterNames()方法(<strong>不常用</strong>)</li>
<li>getParameterMap()方法**(编写框架时常用)**</li>
</ul>
<p>具体用法：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/xdp-gacl/p/3798347.html">javaweb学习总结(十)——HttpServletRequest对象(一) - 孤傲苍狼 - 博客园 (cnblogs.com)</a></p>
<h2 id="常见应用-1"><a href="#常见应用-1" class="headerlink" title="常见应用"></a>常见应用</h2><h3 id="1、中文参数乱码问题"><a href="#1、中文参数乱码问题" class="headerlink" title="1、中文参数乱码问题"></a>1、中文参数乱码问题</h3><p>产生乱码，就是因为服务器和客户端沟通的编码不一致造成的，因此解决的办法是：在客户端和服务器之间设置一个统一的编码，之后就按照此编码进行数据的传输和接收。</p>
<p>由于客户端是以UTF-8字符编码将表单数据传输到服务器端的，因此服务器也需要设置以UTF-8字符编码进行接收，要想完成此操作，服务器可以直接使用从ServletRequest接口继承而来的”setCharacterEncoding(charset)”方法进行统一的编码设置。修改后的代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 客户端是以UTF-8编码传输数据到服务器端的，所以需要设置服务器端以UTF-8的编码进行接收，否则对于中文数据就会产生乱码</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        request.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">userName</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;userName&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;userName：&quot;</span>+userName);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="以get方式提交表单中文参数乱码问题"><a href="#以get方式提交表单中文参数乱码问题" class="headerlink" title="以get方式提交表单中文参数乱码问题"></a>以get方式提交表单中文参数乱码问题</h4><p>单纯使用 request.setCharacterEncoding(“UTF-8”); 无法解决问题。</p>
<p>解决办法：<strong>在接收到数据后，先获取request对象以ISO8859-1字符编码接收到的原始数据的字节数组，然后通过字节数组以指定的编码构建字符串，解决乱码问题。</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         * 对于以get方式传输的数据，request即使设置了以指定的编码接收数据也是无效的，默认的还是使用ISO8859-1这个字符编码来接收数据</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;name&quot;</span>);<span class="comment">//接收数据</span></span><br><span class="line">        name =<span class="keyword">new</span> <span class="title class_">String</span>(name.getBytes(<span class="string">&quot;ISO8859-1&quot;</span>), <span class="string">&quot;UTF-8&quot;</span>) ;<span class="comment">//获取request对象以ISO8859-1字符编码接收到的原始数据的字节数组，然后通过字节数组以指定的编码构建字符串，解决乱码问题</span></span><br><span class="line">        System.out.println(<span class="string">&quot;name：&quot;</span>+name);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2、防盗链"><a href="#2、防盗链" class="headerlink" title="2、防盗链"></a>2、防盗链</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取到网页是从哪里来的</span></span><br><span class="line"><span class="type">String</span> <span class="variable">referer</span> <span class="operator">=</span> request.getHeader(<span class="string">&quot;Referer&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//如果不是从我的首页来或者从地址栏直接访问的，</span></span><br><span class="line"><span class="keyword">if</span> ( referer == <span class="literal">null</span> || !referer.contains(<span class="string">&quot;localhost:8080/zhongfucheng/index.jsp&quot;</span>) ) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//回到首页去</span></span><br><span class="line">    response.sendRedirect(<span class="string">&quot;/zhongfucheng/index.jsp&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//能执行下面的语句，说明是从我的首页点击进来的，那没问题，照常显示</span></span><br><span class="line">response.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">response.getWriter().write(<span class="string">&quot;路飞做了XXXXxxxxxxxxxxxxxxxx&quot;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3、实现转发"><a href="#3、实现转发" class="headerlink" title="3、实现转发"></a>3、实现转发</h3><p><strong>请求转发：指一个web资源收到客户端请求后，通知服务器去调用另外一个web资源进行处理。</strong><br>　　请求转发的应用场景：MVC设计模式</p>
<blockquote>
<p>endRedirect()可以<strong>实现重定向，做到的功能是页面跳转</strong>，使用request的getRequestDispatcher.forward(request,response)<strong>实现转发，做到的功能也是页面跳转</strong>。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取到requestDispatcher对象，跳转到index.jsp</span></span><br><span class="line"><span class="type">RequestDispatcher</span> <span class="variable">requestDispatcher</span> <span class="operator">=</span> request.getRequestDispatcher(<span class="string">&quot;/index.jsp&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//调用requestDispatcher对象的forward()实现转发,传入request和response方法</span></span><br><span class="line">requestDispatcher.forward(request, response);</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>ServletContext也能称之为域对象</strong>。而<strong>request也可以称之为域对象</strong>，只不过<strong>ServletContext的域是整个web应用，而request的域仅仅代表一次http请求</strong></li>
<li>一般的原则：<strong>可以使用request就尽可能使用request</strong>。因为ServletContext代表着整个web应用，使用ServletContext会消耗大量的资源，而<strong>request对象会随着请求的结束而结束，资源会被回收</strong>。<strong>使用request域进行Servlet之间的通讯在开发中是非常频繁的</strong></li>
</ul>
<p><img src="https://i.loli.net/2021/09/18/aEbon3clWSzh27A.png"></p>
<p>示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestDemo06</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        String data=<span class="string">&quot;大家好&quot;</span>;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 将数据存放到request对象中,此时把request对象当作一个Map容器来使用</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        request.setAttribute(<span class="string">&quot;data&quot;</span>, data);</span><br><span class="line">        <span class="comment">//客户端访问RequestDemo06这个Servlet后，RequestDemo06通知服务器将请求转发(forward)到test.jsp页面进行处理</span></span><br><span class="line">        request.getRequestDispatcher(<span class="string">&quot;/test.jsp&quot;</span>).forward(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>test.jsp页面：</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> <span class="keyword">import</span>=<span class="string">&quot;java.util.*&quot;</span> pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE HTML PUBLIC <span class="string">&quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;</span>&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;Request对象实现请求转发&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line"></span><br><span class="line">  &lt;body&gt;</span><br><span class="line">      使用普通方式取出存储在request对象中的数据：</span><br><span class="line">      &lt;h3 style=<span class="string">&quot;color:red;&quot;</span>&gt;&lt;%=(String)request.getAttribute(<span class="string">&quot;data&quot;</span>)%&gt;&lt;/h3&gt;</span><br><span class="line">     使用EL表达式取出存储在request对象中的数据：</span><br><span class="line">     &lt;h3 style=<span class="string">&quot;color:red;&quot;</span>&gt;$&#123;data&#125;&lt;/h3&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="转发和重定向的区别"><a href="#转发和重定向的区别" class="headerlink" title="转发和重定向的区别"></a>转发和重定向的区别</h3><h4 id="实际发生位置不同，地址栏不同"><a href="#实际发生位置不同，地址栏不同" class="headerlink" title="实际发生位置不同，地址栏不同"></a>实际发生位置不同，地址栏不同</h4><ul>
<li>转发是发生在服务器的<ul>
<li><strong>转发是由服务器进行跳转的</strong>，细心的朋友会发现，在转发的时候，<strong>浏览器的地址栏是没有发生变化的</strong>。也就是说<strong>浏览器是不知道该跳转的动作，转发是对浏览器透明的</strong>。通过上面的转发时序图我们也可以发现，<strong>实现转发只是一次的http请求</strong>，<strong>一次转发中request和response对象都是同一个</strong>。这也解释了，为什么可以使用<strong>request作为域对象进行Servlet之间的通讯。</strong></li>
</ul>
</li>
<li>重定向是发生在浏览器的<ul>
<li><strong>重定向是由浏览器进行跳转的</strong>，进行重定向跳转的时候，<strong>浏览器的地址会发生变化的</strong>。曾经介绍过：实现重定向的原理是由response的状态码和Location头组合而实现的。<strong>这是由浏览器进行的页面跳转</strong>实现重定向<strong>会发出两个http请求</strong>，<strong>request域对象是无效的，因为它不是同一个request对象</strong></li>
</ul>
</li>
</ul>
<h4 id="用法不同"><a href="#用法不同" class="headerlink" title="用法不同"></a>用法不同</h4><p>很多人都搞不清楚转发和重定向的时候，<strong>资源地址究竟怎么写</strong>。有的时候要把应用名写上，有的时候不用把应用名写上。很容易把人搞晕。记住一个原则：<strong>给服务器用的直接从资源名开始写，给浏览器用的要把应用名写上</strong></p>
<ul>
<li>request.getRequestDispatcher(“&#x2F;资源名 URI”).forward(request,response)<ul>
<li><strong>转发时”&#x2F;“代表的是本应用程序的根目录</strong></li>
</ul>
</li>
<li>response.send(“&#x2F;web应用&#x2F;资源名 URI”);<ul>
<li><strong>重定向时”&#x2F;“代表的是webapps目录</strong></li>
</ul>
</li>
</ul>
<h4 id="能够去往的URL的范围不一样"><a href="#能够去往的URL的范围不一样" class="headerlink" title="能够去往的URL的范围不一样"></a>能够去往的URL的范围不一样</h4><ul>
<li><strong>转发是服务器跳转只能去往当前web应用的资源</strong></li>
<li><strong>重定向是浏览器跳转，可以去往任何的资源</strong></li>
</ul>
<h4 id="传递数据的类型不同"><a href="#传递数据的类型不同" class="headerlink" title="传递数据的类型不同"></a>传递数据的类型不同</h4><ul>
<li><strong>转发的request对象可以传递各种类型的数据，包括对象</strong></li>
<li><strong>重定向只能传递字符串</strong></li>
</ul>
<h4 id="跳转的时间不同"><a href="#跳转的时间不同" class="headerlink" title="跳转的时间不同"></a>跳转的时间不同</h4><ul>
<li><strong>转发时：执行到跳转语句时就会立刻跳转</strong></li>
<li><strong>重定向：整个页面执行完之后才执行跳转</strong></li>
</ul>
<h4 id="转发和重定向使用哪一个？"><a href="#转发和重定向使用哪一个？" class="headerlink" title="转发和重定向使用哪一个？"></a>转发和重定向使用哪一个？</h4><p>根据上面说明了转发和重定向的区别也可以很容易概括出来<strong>。转发是带着转发前的请求的参数的。重定向是新的请求</strong>。</p>
<p>典型的应用场景：</p>
<ol>
<li>转发: 访问 Servlet 处理业务逻辑，然后 forward 到 jsp 显示处理结果，浏览器里 URL 不变</li>
<li>重定向: 提交表单，处理成功后 redirect 到另一个 jsp，防止表单重复提交，浏览器里 URL 变了</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://rshawshank.github.io/2021/09/17/JavaWeb%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%89%EF%BC%89%E2%80%94%E2%80%94Servlet%EF%BC%88%E4%B8%80%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="rhb">
      <meta itemprop="description" content="纵浪大化中，不喜亦不惧">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="rhb_blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/09/17/JavaWeb%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%89%EF%BC%89%E2%80%94%E2%80%94Servlet%EF%BC%88%E4%B8%80%EF%BC%89/" class="post-title-link" itemprop="url">JavaWeb学习（三）——Servlet（一）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-09-17 15:55:44" itemprop="dateCreated datePublished" datetime="2021-09-17T15:55:44Z">2021-09-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-09-18 02:48:12" itemprop="dateModified" datetime="2021-09-18T02:48:12Z">2021-09-18</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">学习笔记</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/javaweb/" itemprop="url" rel="index"><span itemprop="name">javaweb</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Servlet"><a href="#Servlet" class="headerlink" title="Servlet"></a>Servlet</h1><p>是用Java编写的服务器端程序。其主要功能在于<strong>交互式地浏览和修改数据</strong>，生成动态Web内容。</p>
<p>狭义的Servlet是指Java语言实现的一个接口，广义的Servlet是指任何实现了这个Servlet接口的类。</p>
<p>Servlet运行于支持Java的应用服务器中。从实现上讲，Servlet可以响应任何类型的请求，但绝大多数情况下Servlet只用来扩展基于HTTP协议的Web服务器。</p>
<p>Servlet带给我们最大的作用就是能够<strong>处理浏览器带来HTTP请求，并返回一个响应给浏览器，从而实现浏览器和服务器的交互</strong>。</p>
<h2 id="Servlet的工作模式"><a href="#Servlet的工作模式" class="headerlink" title="Servlet的工作模式"></a>Servlet的工作模式</h2><ul>
<li>客户端发送请求至web服务器</li>
<li>web服务器收到客户端的Servlet访问请求后：<ol>
<li>web服务器检查是否已经装载并创建了该Servlet的实例对象。如果是，则直接执行第④步，否则，执行第②步。</li>
<li>装载并创建该Servlet的一个实例对象。</li>
<li>调用Servlet实例对象的init()方法。</li>
<li>创建一个用于封装HTTP请求消息的HttpServletRequest对象和一个代表HTTP响应消息的HttpServletResponse对象，然后调用Servlet的service()方法并将请求和响应对象作为参数传递进去。</li>
<li>WEB应用程序被停止或重新启动之前，Servlet引擎将卸载Servlet，并在卸载之前调用Servlet的destroy()方法。</li>
</ol>
</li>
<li>服务器将响应返回客户端</li>
</ul>
<h2 id="Servlet的生命周期"><a href="#Servlet的生命周期" class="headerlink" title="Servlet的生命周期"></a>Servlet的生命周期</h2><ol>
<li><strong>加载Servlet</strong>。当Tomcat第一次访问Servlet的时候，<strong>Tomcat会负责创建Servlet的实例</strong></li>
<li><strong>初始化</strong>。当Servlet被实例化后，Tomcat会<strong>调用init()方法初始化这个对象</strong></li>
<li><strong>处理服务</strong>。当浏览器<strong>访问Servlet</strong>的时候，Servlet <strong>会调用service()方法处理请求</strong></li>
<li><strong>销毁</strong>。当Tomcat关闭时或者检测到Servlet要从Tomcat删除的时候会自动调用destroy()方法，<strong>让该实例释放掉所占的资源</strong>。一个Servlet如果长时间不被使用的话，也会被Tomcat自动销毁</li>
<li><strong>卸载</strong>。当Servlet调用完destroy()方法后，等待垃圾回收。如果<strong>有需要再次使用这个Servlet，会重新调用init()方法进行初始化操作</strong>。</li>
</ol>
<ul>
<li>简单总结：<strong>只要访问Servlet，service()就会被调用。init()只有第一次访问Servlet的时候才会被调用。destroy()只有在Tomcat关闭的时候才会被调用。</strong></li>
</ul>
<h2 id="Servlet的特点"><a href="#Servlet的特点" class="headerlink" title="Servlet的特点"></a>Servlet的特点</h2><h3 id="映射关系"><a href="#映射关系" class="headerlink" title="映射关系"></a>映射关系</h3><ul>
<li><p><strong>一个已经注册的Servlet可以被多次映射同一个Servlet可以被映射到多个URL上。</strong></p>
<blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">	当浏览器访问http://localhost:8080/Demo1时：</span></span><br><span class="line"><span class="comment">		1、发现Tomcat中的web.xml有配置这个映射路径  &lt;url-pattern&gt;/Demo1&lt;/url-pattern&gt;</span></span><br><span class="line"><span class="comment">		2、查看映射路径的名字 &lt;servlet-name&gt;Demo1&lt;/servlet-name&gt;</span></span><br><span class="line"><span class="comment">		3、通过映射路径的名字找到配置servlet的名字 &lt;servlet-name&gt;Demo1&lt;/servlet-name&gt;</span></span><br><span class="line"><span class="comment">		4、通过servlet名找到servlet编译后class文件存放的位置</span></span><br><span class="line"><span class="comment">		5、执行MyServlet &lt;servlet-class&gt;</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--为Demo1配一个名字，一般都会和类名一致--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>Demo1<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--类的存放位置在哪里【有包名的话需要添加上包名】--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>zhongfucheng.web.Demo1<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--为Demo1配置映射路径--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>Demo1<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--外界访问Demo1的路径--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/Demo1<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>Demo1<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/ouzicheng<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">无论我访问的是http://localhost:8080/Demo1还是http://localhost:8080/ouzicheng。我访问的都是Demo1。</span><br></pre></td></tr></table></figure>
</blockquote>
</li>
<li><p><strong>Servlet映射的URL可以使用通配符</strong></p>
</li>
<li><p>在servlet3.0以后，web.xml中对Servlet配置，同样可以在@WebServlet注解中配置.<br>下面是@WebServlet的属性列表:</p>
<table>
<thead>
<tr>
<th align="center"><strong>属性名</strong></th>
<th align="center"><strong>类型</strong></th>
<th align="center"><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="center">name</td>
<td align="center">String</td>
<td align="center">指定Servlet 的 name 属性，等价于 <code>&lt;servlet-name&gt;</code>。如果没有显式指定，则该 Servlet 的取值即为类的全限定名。</td>
</tr>
<tr>
<td align="center">value</td>
<td align="center">String[]</td>
<td align="center">该属性等价于 urlPatterns 属性。两个属性不能同时使用。</td>
</tr>
<tr>
<td align="center">urlPatterns</td>
<td align="center">String[]</td>
<td align="center">指定一组 Servlet 的 URL 匹配模式。等价于<code>&lt;url-pattern&gt;</code>标签。</td>
</tr>
<tr>
<td align="center">loadOnStartup</td>
<td align="center">int</td>
<td align="center">指定 Servlet 的加载顺序，等价于 <code>&lt;load-on-startup&gt;</code>标签。</td>
</tr>
<tr>
<td align="center">initParams</td>
<td align="center">WebInitParam[]</td>
<td align="center">指定一组 Servlet <strong>初始化参数</strong>，等价于<code>&lt;init-param&gt;</code>标签。</td>
</tr>
<tr>
<td align="center">asyncSupported</td>
<td align="center">boolean</td>
<td align="center">声明 Servlet 是否支持异步操作模式，等价于<code>&lt;async-supported&gt;</code> 标签。</td>
</tr>
<tr>
<td align="center">description</td>
<td align="center">String</td>
<td align="center">该 Servlet 的描述信息，等价于 <code>&lt;description&gt;</code>标签。</td>
</tr>
<tr>
<td align="center">displayName</td>
<td align="center">String</td>
<td align="center">该 Servlet 的显示名，通常配合工具使用，等价于 <code>&lt;display-name&gt;</code>标签。</td>
</tr>
</tbody></table>
</li>
</ul>
<h3 id="Servlet————单例模式"><a href="#Servlet————单例模式" class="headerlink" title="Servlet————单例模式"></a>Servlet————单例模式</h3><ul>
<li><strong>浏览器多次对Servlet的请求</strong>，一般情况下，<strong>服务器只创建一个Servlet对象</strong>，也就是说，Servlet对象<strong>一旦创建了</strong>，就会<strong>驻留在内存中，为后续的请求做服务，直到服务器关闭</strong>。</li>
<li>在Servlet的整个生命周期内，Servlet的init方法只被调用一次。而对一个Servlet的每次访问请求都导致Servlet引擎调用一次servlet的service方法。</li>
<li>对于<strong>每次访问请求</strong>，Servlet引擎都会<strong>创建一个新的HttpServletRequest请求对象和一个新的HttpServletResponse响应对象</strong>，然后将这两<strong>个对象作为参数传递给它调用的Servlet的service()方法</strong>，<strong>service方法再根据请求方式分别调用doXXX方法</strong>。</li>
</ul>
<h3 id="通配符"><a href="#通配符" class="headerlink" title="通配符"></a>通配符</h3><ul>
<li><p>通配符有两种格式：</p>
<ol>
<li>*.扩展名</li>
<li>正斜杠（&#x2F;）开头并以“&#x2F;*”结尾。</li>
<li><code>*.</code>扩展名的优先级最低</li>
</ol>
</li>
</ul>
<h3 id="线程安全问题"><a href="#线程安全问题" class="headerlink" title="线程安全问题"></a>线程安全问题</h3><p>当多个用户访问Servlet的时候，<strong>服务器会为每个用户创建一个线程</strong>。<strong>当多个用户并发访问Servlet共享资源的时候就会出现线程安全问题</strong>。</p>
<p>原则：</p>
<ol>
<li>如果一个<strong>变量需要多个用户共享</strong>，则应当在访问该变量的时候，<strong>加同步机制synchronized (对象){}</strong></li>
<li>如果一个变量<strong>不需要共享</strong>，则<strong>直接在 doGet() 或者 doPost()定义</strong>.这样不会存在线程安全问题</li>
</ol>
<h3 id="web资源的访问都需要访问Servlet"><a href="#web资源的访问都需要访问Servlet" class="headerlink" title="web资源的访问都需要访问Servlet"></a>web资源的访问都需要访问Servlet</h3><p>缺省Servlet用于处理所有其他Servlet都不处理的访问请求。</p>
<h3 id="web站点信息配置"><a href="#web站点信息配置" class="headerlink" title="web站点信息配置"></a>web站点信息配置</h3><ul>
<li>web.xml文件支持<strong>对整个站点进行配置参数信息</strong>【<strong>所有Servlet都可以取到该参数信息</strong>】</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>name<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>XXX<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="web工程中URL地址的写法"><a href="#web工程中URL地址的写法" class="headerlink" title="web工程中URL地址的写法"></a>web工程中URL地址的写法</h3><p><strong>如果”&#x2F;“是给服务器用的，则代表当前的web工程，如果”&#x2F;“是给浏览器用的，则代表webapps目录。</strong></p>
<h1 id="ServletConfig对象"><a href="#ServletConfig对象" class="headerlink" title="ServletConfig对象"></a>ServletConfig对象</h1><p>此对象可以读取web.xml中配置的初始化参数。</p>
<p>————当servlet配置了初始化参数后，web容器在创建servlet实例对象时，会自动将这些初始化参数封装到ServletConfig对象中，并在调用servlet的init方法时，将ServletConfig对象传递给servlet。</p>
<p>参数信息放置在web.xml中可以方便修改。</p>
<h1 id="ServletContext对象"><a href="#ServletContext对象" class="headerlink" title="ServletContext对象"></a>ServletContext对象</h1><p>当Tomcat启动的时候，就会创建一个ServletContext对象。它<strong>代表着当前web站点</strong></p>
<ul>
<li><strong>所有Servlet都共享着一个ServletContext对象</strong>，所以<strong>Servlet之间可以通过ServletContext实现通讯</strong>。</li>
<li>ServletConfig获取的是配置的是单个Servlet的参数信息，<strong>ServletContext可以获取的是配置整个web站点的参数信息</strong></li>
<li><strong>利用ServletContext读取web站点的资源文件</strong></li>
<li>实现Servlet的转发【用ServletContext转发不多，主要用request转发】</li>
</ul>
<h2 id="应用"><a href="#应用" class="headerlink" title="应用"></a>应用</h2><h3 id="多个Servlet通过ServletContext对象实现数据共享"><a href="#多个Servlet通过ServletContext对象实现数据共享" class="headerlink" title="多个Servlet通过ServletContext对象实现数据共享"></a>多个Servlet通过ServletContext对象实现数据共享</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ServletContextDemo1：</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletContextDemo1</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">data</span> <span class="operator">=</span> <span class="string">&quot;xdp_gacl&quot;</span>;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * ServletConfig对象中维护了ServletContext对象的引用，开发人员在编写servlet时，</span></span><br><span class="line"><span class="comment">         * 可以通过ServletConfig.getServletContext方法获得ServletContext对象。</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletConfig().getServletContext();<span class="comment">//获得ServletContext对象</span></span><br><span class="line">        context.setAttribute(<span class="string">&quot;data&quot;</span>, data);  <span class="comment">//将data存储到ServletContext对象中</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ServletContextDemo2：</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletContextDemo2</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletContext();</span><br><span class="line">        <span class="type">String</span> <span class="variable">data</span> <span class="operator">=</span> (String) context.getAttribute(<span class="string">&quot;data&quot;</span>);<span class="comment">//从ServletContext对象中取出数据</span></span><br><span class="line">        response.getWriter().print(<span class="string">&quot;data=&quot;</span>+data);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//实现的功能：先运行ServletContextDemo1，将数据data存储到ServletContext对象中，然后运行ServletContextDemo2就可以从ServletContext对象中取出数据了，这样就实现了数据共享</span></span><br></pre></td></tr></table></figure>

<h3 id="获取WEB应用的初始化参数"><a href="#获取WEB应用的初始化参数" class="headerlink" title="获取WEB应用的初始化参数"></a>获取WEB应用的初始化参数</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">version</span>=<span class="string">&quot;3.0&quot;</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://java.sun.com/xml/ns/javaee&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://java.sun.com/xml/ns/javaee</span></span></span><br><span class="line"><span class="string"><span class="tag">    http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">display-name</span>&gt;</span><span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 配置WEB应用的初始化参数 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>url<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>jdbc:mysql://localhost:3306/test<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.jsp<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletContextDemo3</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletContext();</span><br><span class="line">        <span class="comment">//获取整个web站点的初始化参数</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">contextInitParam</span> <span class="operator">=</span> context.getInitParameter(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">        response.getWriter().print(contextInitParam);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="用servletContext实现请求转发"><a href="#用servletContext实现请求转发" class="headerlink" title="用servletContext实现请求转发"></a>用servletContext实现请求转发</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ServletContextDemo4：</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletContextDemo4</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">data</span> <span class="operator">=</span> <span class="string">&quot;&lt;h1&gt;&lt;font color=&#x27;red&#x27;&gt;abcdefghjkl&lt;/font&gt;&lt;/h1&gt;&quot;</span>;</span><br><span class="line">        response.getOutputStream().write(data.getBytes());</span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletContext();<span class="comment">//获取ServletContext对象</span></span><br><span class="line">        <span class="type">RequestDispatcher</span> <span class="variable">rd</span> <span class="operator">=</span> context.getRequestDispatcher(<span class="string">&quot;/servlet/ServletContextDemo5&quot;</span>);<span class="comment">//获取请求转发对象(RequestDispatcher)</span></span><br><span class="line">        rd.forward(request, response);<span class="comment">//调用forward方法实现请求转发</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ServletContextDemo5：</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletContextDemo5</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        response.getOutputStream().write(<span class="string">&quot;servletDemo5&quot;</span>.getBytes());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//浏览器访问ServletContextDemo4，浏览显示的却是ServletContextDemo5的内容</span></span><br></pre></td></tr></table></figure>

<h3 id="利用ServletContext对象读取资源文件"><a href="#利用ServletContext对象读取资源文件" class="headerlink" title="利用ServletContext对象读取资源文件"></a>利用ServletContext对象读取资源文件</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 使用servletContext读取资源文件</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> gacl</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletContextDemo6</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * response.setContentType(&quot;text/html;charset=UTF-8&quot;);目的是控制浏览器用UTF-8进行解码；</span></span><br><span class="line"><span class="comment">         * 这样就不会出现中文乱码了</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        response.setHeader(<span class="string">&quot;content-type&quot;</span>,<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">        readSrcDirPropCfgFile(response);<span class="comment">//读取src目录下的properties配置文件</span></span><br><span class="line">        response.getWriter().println(<span class="string">&quot;&lt;hr/&gt;&quot;</span>);</span><br><span class="line">        readWebRootDirPropCfgFile(response);<span class="comment">//读取WebRoot目录下的properties配置文件</span></span><br><span class="line">        response.getWriter().println(<span class="string">&quot;&lt;hr/&gt;&quot;</span>);</span><br><span class="line">        readPropCfgFile(response);<span class="comment">//读取src目录下的db.config包中的db3.properties配置文件</span></span><br><span class="line">        response.getWriter().println(<span class="string">&quot;&lt;hr/&gt;&quot;</span>);</span><br><span class="line">        readPropCfgFile2(response);<span class="comment">//读取src目录下的gacl.servlet.study包中的db4.properties配置文件</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 读取src目录下的gacl.servlet.study包中的db4.properties配置文件</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">readPropCfgFile2</span><span class="params">(HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">in</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletContext().getResourceAsStream(<span class="string">&quot;/WEB-INF/classes/gacl/servlet/study/db4.properties&quot;</span>);</span><br><span class="line">        <span class="type">Properties</span> <span class="variable">prop</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">        prop.load(in);</span><br><span class="line">        <span class="type">String</span> <span class="variable">driver</span> <span class="operator">=</span> prop.getProperty(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> prop.getProperty(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> prop.getProperty(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> prop.getProperty(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        response.getWriter().println(<span class="string">&quot;读取src目录下的gacl.servlet.study包中的db4.properties配置文件：&quot;</span>);</span><br><span class="line">        response.getWriter().println(</span><br><span class="line">                MessageFormat.format(</span><br><span class="line">                        <span class="string">&quot;driver=&#123;0&#125;,url=&#123;1&#125;,username=&#123;2&#125;,password=&#123;3&#125;&quot;</span>,</span><br><span class="line">                        driver,url, username, password));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 读取src目录下的db.config包中的db3.properties配置文件</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> FileNotFoundException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">readPropCfgFile</span><span class="params">(HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> FileNotFoundException, IOException &#123;</span><br><span class="line">        <span class="comment">//通过ServletContext获取web资源的绝对路径</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">path</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletContext().getRealPath(<span class="string">&quot;/WEB-INF/classes/db/config/db3.properties&quot;</span>);</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(path);</span><br><span class="line">        <span class="type">Properties</span> <span class="variable">prop</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">        prop.load(in);</span><br><span class="line">        <span class="type">String</span> <span class="variable">driver</span> <span class="operator">=</span> prop.getProperty(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> prop.getProperty(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> prop.getProperty(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> prop.getProperty(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        response.getWriter().println(<span class="string">&quot;读取src目录下的db.config包中的db3.properties配置文件：&quot;</span>);</span><br><span class="line">        response.getWriter().println(</span><br><span class="line">                MessageFormat.format(</span><br><span class="line">                        <span class="string">&quot;driver=&#123;0&#125;,url=&#123;1&#125;,username=&#123;2&#125;,password=&#123;3&#125;&quot;</span>,</span><br><span class="line">                        driver,url, username, password));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 通过ServletContext对象读取WebRoot目录下的properties配置文件</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">readWebRootDirPropCfgFile</span><span class="params">(HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 通过ServletContext对象读取WebRoot目录下的properties配置文件</span></span><br><span class="line"><span class="comment">         * “/”代表的是项目根目录</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">in</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletContext().getResourceAsStream(<span class="string">&quot;/db2.properties&quot;</span>);</span><br><span class="line">        <span class="type">Properties</span> <span class="variable">prop</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">        prop.load(in);</span><br><span class="line">        <span class="type">String</span> <span class="variable">driver</span> <span class="operator">=</span> prop.getProperty(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> prop.getProperty(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> prop.getProperty(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> prop.getProperty(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        response.getWriter().println(<span class="string">&quot;读取WebRoot目录下的db2.properties配置文件：&quot;</span>);</span><br><span class="line">        response.getWriter().print(</span><br><span class="line">                MessageFormat.format(</span><br><span class="line">                        <span class="string">&quot;driver=&#123;0&#125;,url=&#123;1&#125;,username=&#123;2&#125;,password=&#123;3&#125;&quot;</span>,</span><br><span class="line">                        driver,url, username, password));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 通过ServletContext对象读取src目录下的properties配置文件</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">readSrcDirPropCfgFile</span><span class="params">(HttpServletResponse response)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 通过ServletContext对象读取src目录下的db1.properties配置文件</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">in</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletContext().getResourceAsStream(<span class="string">&quot;/WEB-INF/classes/db1.properties&quot;</span>);</span><br><span class="line">        <span class="type">Properties</span> <span class="variable">prop</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">        prop.load(in);</span><br><span class="line">        <span class="type">String</span> <span class="variable">driver</span> <span class="operator">=</span> prop.getProperty(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> prop.getProperty(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> prop.getProperty(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> prop.getProperty(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        response.getWriter().println(<span class="string">&quot;读取src目录下的db1.properties配置文件：&quot;</span>);</span><br><span class="line">        response.getWriter().println(</span><br><span class="line">                MessageFormat.format(</span><br><span class="line">                        <span class="string">&quot;driver=&#123;0&#125;,url=&#123;1&#125;,username=&#123;2&#125;,password=&#123;3&#125;&quot;</span>,</span><br><span class="line">                        driver,url, username, password));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="在客户端缓存Servlet的输出"><a href="#在客户端缓存Servlet的输出" class="headerlink" title="在客户端缓存Servlet的输出"></a>在客户端缓存Servlet的输出</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletDemo5</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">data</span> <span class="operator">=</span> <span class="string">&quot;abcddfwerwesfasfsadf&quot;</span>;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 设置数据合理的缓存时间值，以避免浏览器频繁向服务器发送请求，提升服务器的性能</span></span><br><span class="line"><span class="comment">         * 这里是将数据的缓存时间设置为1天</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        response.setDateHeader(<span class="string">&quot;expires&quot;</span>,System.currentTimeMillis() + <span class="number">24</span> * <span class="number">3600</span> * <span class="number">1000</span>);</span><br><span class="line">        response.getOutputStream().write(data.getBytes());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">this</span>.doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://rshawshank.github.io/2021/09/17/JavaWeb%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89%E2%80%94%E2%80%94http/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="rhb">
      <meta itemprop="description" content="纵浪大化中，不喜亦不惧">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="rhb_blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/09/17/JavaWeb%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89%E2%80%94%E2%80%94http/" class="post-title-link" itemprop="url">JavaWeb学习（二）——http</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-09-17 15:25:45 / 修改时间：07:50:44" itemprop="dateCreated datePublished" datetime="2021-09-17T15:25:45Z">2021-09-17</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">学习笔记</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/javaweb/" itemprop="url" rel="index"><span itemprop="name">javaweb</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h1><h2 id="常用响应头"><a href="#常用响应头" class="headerlink" title="常用响应头"></a>常用响应头</h2><blockquote>
<p>　　HTTP响应中的常用响应头(消息头)<br>　　Location: 服务器通过这个头，来告诉浏览器跳到哪里<br>　　Server：服务器通过这个头，告诉浏览器服务器的型号<br>　　Content-Encoding：服务器通过这个头，告诉浏览器，数据的压缩格式<br>　　Content-Length: 服务器通过这个头，告诉浏览器回送数据的长度<br>　　Content-Language: 服务器通过这个头，告诉浏览器语言环境<br>　　Content-Type：服务器通过这个头，告诉浏览器回送数据的类型<br>　　Refresh：服务器通过这个头，告诉浏览器定时刷新<br>　　Content-Disposition: 服务器通过这个头，告诉浏览器以下载方式打数据<br>　　Transfer-Encoding：服务器通过这个头，告诉浏览器数据是以分块方式回送的<br>　　Expires: -1  控制浏览器不要缓存<br>　　Cache-Control: no-cache<br>　　Pragma: no-cache</p>
</blockquote>
<h2 id="常用的状态码简述"><a href="#常用的状态码简述" class="headerlink" title="常用的状态码简述"></a>常用的状态码简述</h2><ul>
<li>2XX</li>
</ul>
<blockquote>
<p>一般是请求成功</p>
<p>200 正常处理</p>
<p>204 成功处理，但服务器没有新数据返回，显示页面不更新</p>
<p>206 对服务器进行范围请求，只返回一部分数据</p>
</blockquote>
<ul>
<li>3XX</li>
</ul>
<blockquote>
<p>一般表示重定向</p>
<p>301 请求的资源已分配了新的URI中，URL地址改变了。【永久重定向】</p>
<p>302 请求的资源临时分配了新的URI中，URL地址没变【临时重定向】</p>
<p>303 与302相同的功能，但明确客户端应该采用GET方式来获取资源</p>
<p>304 发送了附带请求，但不符合条件【返回未过期的缓存数据】</p>
<p>307 与302相同，但不会把POST请求变成GET</p>
</blockquote>
<ul>
<li>4XX</li>
</ul>
<blockquote>
<p>表示客户端出错了。</p>
<p>400 请求报文语法错误了</p>
<p>401 需要认证身份</p>
<p>403 没有权限访问</p>
<p>404 服务器没有这个资源</p>
</blockquote>
<ul>
<li>5XX</li>
</ul>
<blockquote>
<p>服务器出错了</p>
<p>500 内部资源出错了</p>
<p>503 服务器正忙</p>
</blockquote>
<h2 id="HTTP版本区别"><a href="#HTTP版本区别" class="headerlink" title="HTTP版本区别"></a>HTTP版本区别</h2><p>HTTP1.0和HTTP1.1最主要的区别就是：</p>
<ul>
<li>HTTP1.1默认是<strong>持久化连接</strong>！</li>
</ul>
<p>相对于持久化连接还有另外比较重要的改动：</p>
<ul>
<li>HTTP 1.1增加host字段</li>
<li>HTTP 1.1中引入了<code>Chunked transfer-coding</code>，范围请求，实现断点续传(实际上就是利用HTTP消息头使用分块传输编码，将实体主体分块传输)</li>
<li>HTTP 1.1管线化(pipelining)理论，客户端可以同时发出多个HTTP请求，而不用一个个等待响应之后再请求<ul>
<li>注意：这个pipelining仅仅是<strong>限于理论场景下</strong>，大部分桌面浏览器仍然会<strong>选择默认关闭</strong>HTTP pipelining！</li>
<li>所以现在使用HTTP1.1协议的应用，都是有<strong>可能会开多个TCP连接</strong>的！</li>
</ul>
</li>
</ul>
<p>参考资料：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://link.segmentfault.com/?url=https://www.cnblogs.com/gofighting/p/5421890.html">https://www.cnblogs.com/gofighting/p/5421890.html</a></li>
</ul>
<h2 id="HTTP2基础"><a href="#HTTP2基础" class="headerlink" title="HTTP2基础"></a>HTTP2基础</h2><p>直观比较一下HTTP2和HTTP1.1的区别：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://link.segmentfault.com/?url=https://http2.akamai.com/demo">https://http2.akamai.com/demo</a></li>
</ul>
<p><img src="https://i.loli.net/2021/09/14/UXknmSPOwJeyB2A.gif"></p>
<p>HTTP 1.1提出了管线化(pipelining)理论，但是仅仅是限于理论的阶段上，这个功能默认还是关闭了的。</p>
<p>管线化(pipelining)和非管线化的<strong>区别</strong>：</p>
<p><img src="https://i.loli.net/2021/09/14/ouql5HgXjWaQxtF.jpg"></p>
<blockquote>
<p>HTTP Pipelining其实是把多个HTTP请求放到一个TCP连接中一一发送，而在发送过程中不需要等待服务器对前一个请求的响应；只不过，<strong>客户端还是要按照发送请求的顺序来接收响应！</strong></p>
</blockquote>
<p>HTTP1.1新改动：</p>
<ul>
<li><strong>持久连接</strong></li>
<li>请求管道化</li>
<li>增加缓存处理（新的字段如cache-control）</li>
<li>增加Host字段、支持断点传输等</li>
</ul>
<p>HTTP2新改动：</p>
<ul>
<li>二进制分帧</li>
<li><strong>多路复用</strong></li>
<li>头部压缩</li>
<li>服务器推送</li>
</ul>
<p>参考资料：</p>
<ul>
<li>HTTP2 GitBook电子书(中文版)：<a target="_blank" rel="noopener" href="https://link.segmentfault.com/?url=https://legacy.gitbook.com/book/ye11ow/http2-explained/details">https://legacy.gitbook.com/book/ye11ow/http2-explained/details</a></li>
<li>HTTP&#x2F;2.0 相比1.0有哪些重大改进？<a target="_blank" rel="noopener" href="https://link.segmentfault.com/?url=https://www.zhihu.com/question/34074946">https://www.zhihu.com/question/34074946</a></li>
<li>HTTP&#x2F;2 新特性浅析：<a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000002765886">https://segmentfault.com/a/1190000002765886</a></li>
<li>HTTP2学习资料：<a target="_blank" rel="noopener" href="https://link.segmentfault.com/?url=https://imququ.com/post/http2-resource.html">https://imququ.com/post/http2-resource.html</a></li>
<li>HTTP2简介和基于HTTP2的Web优化：<a target="_blank" rel="noopener" href="https://link.segmentfault.com/?url=http://caibaojian.com/toutiao/6641">http://caibaojian.com/toutiao/6641</a></li>
<li>http2原理入门：<a target="_blank" rel="noopener" href="https://link.segmentfault.com/?url=https://blog.qingf.me/?p=600">https://blog.qingf.me/?p=600</a></li>
<li>HTTP&#x2F;2 对现在的网页访问，有什么大的优化呢？体现在什么地方？<a target="_blank" rel="noopener" href="https://link.segmentfault.com/?url=https://www.zhihu.com/question/24774343/answer/96586977">https://www.zhihu.com/question/24774343/answer/96586977</a></li>
<li>HTTP&#x2F;2笔记之流和多路复用：<a target="_blank" rel="noopener" href="https://link.segmentfault.com/?url=http://www.blogjava.net/yongboy/archive/2015/03/19/423611.aspx">http://www.blogjava.net/yongboy/archive/2015/03/19/423611.aspx</a></li>
</ul>
<h2 id="HTTPS"><a href="#HTTPS" class="headerlink" title="HTTPS"></a>HTTPS</h2><p>使用了SSL建立安全的通信线路。</p>
<p>HTTPS使用的是共享密钥和公开私有密钥混合来进行加密的。由于公开私有密钥需要太多的资源，不可能一直以公开私有密钥进行通信。因此，<strong>HTTP在建立通信线路的时候使用公开私有密钥，当建立完连接后，随后就使用共享密钥进行加密和解密了</strong></p>
<blockquote>
<ul>
<li>对称加密：<ul>
<li>加密和解密都是用同一个密钥</li>
</ul>
</li>
<li>非对称加密：<ul>
<li>加密用公开的密钥，解密用私钥</li>
<li>(私钥只有自己知道，公开的密钥大家都知道)</li>
</ul>
</li>
<li>数字签名：<ul>
<li>验证传输的内容<strong>是对方发送的数据</strong></li>
<li>发送的数据<strong>没有被篡改过</strong></li>
</ul>
</li>
<li>数字证书 (Certificate)<ul>
<li>认证机构证明是<strong>真实的服务器发送的数据</strong>。</li>
</ul>
</li>
</ul>
</blockquote>
<h1 id="面试题"><a href="#面试题" class="headerlink" title="面试题"></a>面试题</h1><p><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000013271378">HTTP面试题都在这里 - SegmentFault 思否</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://rshawshank.github.io/2021/09/17/JavaWeb%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E7%AE%80%E4%BB%8B+Tomcat/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="rhb">
      <meta itemprop="description" content="纵浪大化中，不喜亦不惧">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="rhb_blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/09/17/JavaWeb%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E7%AE%80%E4%BB%8B+Tomcat/" class="post-title-link" itemprop="url">JavaWeb学习（一）——简介—+Tomcat</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-09-17 15:20:56 / 修改时间：07:24:04" itemprop="dateCreated datePublished" datetime="2021-09-17T15:20:56Z">2021-09-17</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">学习笔记</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/javaweb/" itemprop="url" rel="index"><span itemprop="name">javaweb</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="javaWeb简介"><a href="#javaWeb简介" class="headerlink" title="javaWeb简介"></a>javaWeb简介</h1><p>Java web，是用java技术来解决相关web互联网领域的技术的总称。web包括：web服务器和web客户端两部分。</p>
<p>web资源分类：</p>
<p>所谓web资源即放在Internet网上供外界访问的文件或程序，又根据它们呈现的效果及原理不同，将它们划分为静态资源和动态资源。</p>
<ul>
<li><p>静态web资源：固定不变数据文件（静态网页 HTML、CSS文件、文本、音频、视频）</p>
</li>
<li><p>静态web技术：HTML+CSS+JavaScript</p>
</li>
<li><p>动态web资源：一段服务程序，运行后，生成的数据文件</p>
</li>
<li><p>动态web技术：servlet，jsp，php， .net ,ruby、python等等</p>
</li>
</ul>
<p>常见的web服务器：</p>
<blockquote>
<p>Tomcat：由Apache组织提供的一种Web服务器，提供对jsp和Servlet的支持。它是一种轻量级的javaWeb容器（服务器），也是当前应用最广的JavaWeb服务器（免费）。<br>Jboss：是一个遵从JavaEE规范的、开放源代码的、纯Java的EJB服务器，它支持所有的JavaEE规范（免费）。<br>GlassFish： 由Oracle公司开发的一款JavaWeb服务器，是一款强健的商业服务器，达到产品级质量（应用很少，收费）。<br>Resin：是CAUCHO公司的产品，是一个非常流行的应用服务器，对servlet和JSP提供了良好的支持，性能也比较优良，resin自身采用JAVA语言开发（收费，应用比较多）。<br>WebLogic：是Oracle公司的产品，是目前应用最广泛的Web服务器，支持JavaEE规范，而且不断的完善以适应新的开发要求，适合大型项目（收费，用的不多，适合大公司）。</p>
</blockquote>
<h2 id="JAVAWEB目录结构"><a href="#JAVAWEB目录结构" class="headerlink" title="JAVAWEB目录结构"></a>JAVAWEB目录结构</h2><p><img src="https://i.loli.net/2021/08/31/n1K9YAmo6TdqF3M.png"></p>
<p>以上图说明：</p>
<ul>
<li>bbs目录代表一个web应用</li>
<li>bbs目录下的html,jsp文件可以直接被浏览器访问</li>
<li><strong>WEB-INF目录下的资源是不能直接被浏览器访问的</strong></li>
<li>web.xml文件是web程序的主要配置文件</li>
<li>所有的classes文件都放在classes目录下</li>
<li>jar文件放在lib目录下</li>
</ul>
<h1 id="Tomcat"><a href="#Tomcat" class="headerlink" title="Tomcat"></a>Tomcat</h1><p>是一个运行java的网络<strong>服务器</strong>，在中小型系统和并发量小的场合下被普遍使用，是开发和调试Servlet、JSP 程序的首选。</p>
<p><img src="https://i.loli.net/2021/08/26/yMknVOF26t7J8K4.png" alt="img"></p>
<h2 id="tomcat体系结构"><a href="#tomcat体系结构" class="headerlink" title="tomcat体系结构"></a>tomcat体系结构</h2><p><img src="https://i.loli.net/2021/08/30/YBJksmbM7TN2pCV.png"></p>
<p>Tomcat中最顶层的容器是Server，代表着整个服务器，从上图中可以看出，一个Server可以包含至少一个Service，即可以包含多个Service，用于具体提供服务。</p>
<p>Service主要包含两个部分：Connector和Container。从上图中可以看出 Tomcat 的心脏就是这两个组件，他们的作用如下：</p>
<ul>
<li>Connector用于处理连接相关的事情，并提供Socket与Request请求和Response响应相关的转化;</li>
<li>Container用于封装和管理Servlet，以及具体处理Request请求；</li>
</ul>
<p>一个Tomcat中只有一个Server，一个Server可以包含多个Service，一个Service只有一个Container，但是可以有多个Connectors，这是因为一个服务可以有多个连接，如同时提供Http和Https链接，也可以提供向相同协议不同端口的连接</p>
<p>多个 Connector 和一个 Container 就形成了一个 Service，有了 Service 就可以对外提供服务了，但是 Service 还要一个生存的环境，必须要有人能够给她生命、掌握其生死大权，那就非 Server 莫属了！所以整个 Tomcat 的生命周期由 Server 控制。</p>
<h2 id="Tomcat-有哪几种Connector-运行模式-优化-？"><a href="#Tomcat-有哪几种Connector-运行模式-优化-？" class="headerlink" title="Tomcat 有哪几种Connector 运行模式(优化)？"></a>Tomcat 有哪几种Connector 运行模式(优化)？</h2><h3 id="BIO：同步并阻塞"><a href="#BIO：同步并阻塞" class="headerlink" title="BIO：同步并阻塞"></a>BIO：同步并阻塞</h3><p>一个线程处理一个请求。缺点：并发量高时，线程数较多，浪费资源。Tomcat7或以下，在Linux系统中默认使用这种方式。</p>
<h3 id="NIO：同步非阻塞IO"><a href="#NIO：同步非阻塞IO" class="headerlink" title="NIO：同步非阻塞IO"></a>NIO：同步非阻塞IO</h3><p>利用Java的异步IO处理，可以通过少量的线程处理大量的请求，可以复用同一个线程处理多个connection(多路复用)。Tomcat8在Linux系统中默认使用这种方式。</p>
<h3 id="APR：即Apache-Portable-Runtime"><a href="#APR：即Apache-Portable-Runtime" class="headerlink" title="APR：即Apache Portable Runtime"></a>APR：即Apache Portable Runtime</h3><p>从操作系统层面解决io阻塞问题。</p>
<p>Tomcat有几种部署方式？<br>Tomcat容器是如何创建servlet类实例？用到了什么原理？</p>
<ol>
<li>当容器启动时，会读取在webapps目录下所有的web应用中的web.xml文件，然后对 xml文件进行解析，并读取servlet注册信息。然后，将每个应用中注册的servlet类都进行加载，并通过 反射的方式实例化。（有时候也是在第一次请求时实例化）</li>
<li>在servlet注册时加上1如果为正数，则在一开始就实例化，如果不写或为负数，则第一次请求实例化。</li>
</ol>
<p>浏览器访问web资源的流程图</p>
<p><img src="https://i.loli.net/2021/08/30/mbWCsLRuD1UEPvB.png"></p>
<p>有关配置虚拟目录、临时域名、虚拟主机见：<a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000013122831">参考文献</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/xdp-gacl/p/3744053.html">JavaWeb学习总结(三)——Tomcat服务器学习和使用(二) - 孤傲苍狼 - 博客园 (cnblogs.com)</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://rshawshank.github.io/2021/09/14/JavaWeb%E5%AD%A6%E4%B9%A0%EF%BC%88%E5%8D%81%E4%B8%89%EF%BC%89%E2%80%94%E2%80%94XML%E5%92%8CJSON/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="rhb">
      <meta itemprop="description" content="纵浪大化中，不喜亦不惧">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="rhb_blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/09/14/JavaWeb%E5%AD%A6%E4%B9%A0%EF%BC%88%E5%8D%81%E4%B8%89%EF%BC%89%E2%80%94%E2%80%94XML%E5%92%8CJSON/" class="post-title-link" itemprop="url">JavaWeb学习（十三）——XML和JSON</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-09-13 17:03:17" itemprop="dateCreated datePublished" datetime="2021-09-13T17:03:17Z">2021-09-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-10-11 06:01:58" itemprop="dateModified" datetime="2021-10-11T06:01:58Z">2021-10-11</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">学习笔记</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/javaweb/" itemprop="url" rel="index"><span itemprop="name">javaweb</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="XML"><a href="#XML" class="headerlink" title="XML"></a>XML</h1><p>xml数据或者xml文档只用于组织、存储数据。</p>
<ul>
<li>为xml定规则：使用DTD或Schema技术</li>
<li>解析xml数据：使用DOM或SAX技术</li>
<li>提供样式：XSLT可扩展样是转换语言</li>
</ul>
<h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><h3 id="文档声明"><a href="#文档声明" class="headerlink" title="文档声明"></a>文档声明</h3><ul>
<li>XML声明放在XML的第一行</li>
<li>version—-版本</li>
<li>encoding–编码</li>
<li>standalone–独立使用–默认是no。standalone表示该xml是不是独立的，如果是yes，则表示这个XML文档时独立的，不能引用外部的DTD规范文件；如果是no，则该XML文档不是独立的，表示可以引用外部的DTD规范文档。</li>
<li>正确的文档声明格式，属性的位置不能改变！</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span> standalone=<span class="string">&quot;no&quot;</span>?&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="元素"><a href="#元素" class="headerlink" title="元素"></a>元素</h3><p>首先在这里说明一个概念：<strong>在XML中元素和标签指的是同一个东西！不要被不同的名称所迷惑了！</strong></p>
<p>元素中需要值得注意的地方：</p>
<ul>
<li>XML元素中的出现的空格和换行都会被当做元素内容进行处理</li>
<li>每个XML文档必须有且只有一个根元素</li>
<li>元素必须闭合</li>
<li>大小写敏感</li>
<li>不能交叉嵌套</li>
<li>不能以数字开头</li>
</ul>
<p>看起来好像有很多需要值得注意的地方，其实只需要记住：<strong>XML的语法是规范的！不要随意乱写！</strong></p>
<h3 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h3><p>属性是作为XML元素中的一部分的，命名规范也是和XML元素一样的！</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--属性名是name，属性值是china--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">中国</span> <span class="attr">name</span>=<span class="string">&quot;china&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">中国</span>&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h3><p><strong>注释和HTML的注释是一样的</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!----&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="CDATA"><a href="#CDATA" class="headerlink" title="CDATA"></a>CDATA</h3><p>在编写XML文件时，有些内容可能不想让解析引擎解析执行，而是当作原始内容处理。遇到此种情况，可以把这些内容放在CDATA区里，对于CDATA区域内的内容，XML解析程序不会处理，而是直接原封不动的输出</p>
<p>语法：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;![CDATA[</span><br><span class="line">    ...内容</span><br><span class="line">]]&gt;</span><br></pre></td></tr></table></figure>

<h3 id="处理指令"><a href="#处理指令" class="headerlink" title="处理指令"></a>处理指令</h3><p>处理指令，简称PI （processing instruction）。处理指令用来指挥解析引擎如何解析XML文档内容。</p>
<p>例如：</p>
<p>在XML文档中可以使用xml-stylesheet指令，通知XML解析引擎，应用css文件显示xml文档内容。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml-stylesheet type=<span class="string">&quot;text/css&quot;</span> href=<span class="string">&quot;1.css&quot;</span>?&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>XML代码：</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml-stylesheet type=<span class="string">&quot;text/css&quot;</span> href=<span class="string">&quot;1.css&quot;</span>?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">china</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">guangzhou</span>&gt;</span></span><br><span class="line">        广州</span><br><span class="line">    <span class="tag">&lt;/<span class="name">guangzhou</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">shenzhen</span>&gt;</span></span><br><span class="line">        深圳</span><br><span class="line">    <span class="tag">&lt;/<span class="name">shenzhen</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">china</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>CSS代码：</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">guangzhou&#123;</span><br><span class="line">    font-size: 40px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>效果：</li>
</ul>
<p><img src="https://i.loli.net/2021/09/14/9SIbOmX3aJur2vo.png" alt="img"></p>
<h1 id="JDK中的XML-API"><a href="#JDK中的XML-API" class="headerlink" title="JDK中的XML API"></a>JDK中的XML API</h1><p>①：JAXP（The Java API For XML Processing)：主要负责解析XML</p>
<p>②：JAXB（Java Architecture for XML Binding)：主要负责将XML映射为Java对象</p>
<h2 id="XML解析"><a href="#XML解析" class="headerlink" title="XML解析"></a>XML解析</h2><p>XML解析就是读取XML的数据！</p>
<h3 id="解析方式"><a href="#解析方式" class="headerlink" title="解析方式"></a>解析方式</h3><p>XML解析方式分为两种：</p>
<p>①：dom(Document Object Model)文档对象模型，是W3C组织推荐解析XML的一种方式</p>
<p>②：sax(Simple API For XML)，它是XML社区的标准，几乎所有XML解析器都支持它！</p>
<p><img src="https://i.loli.net/2021/09/14/aPnvBl8ZEtDdw6u.png"></p>
<p>常用的解析器和解析开发包的关系如下所示：</p>
<p><img src="https://i.loli.net/2021/09/14/LGhW3AzUJvqfHSy.png"></p>
<ul>
<li>jaxp是jdk自带的，无需导入开发包</li>
<li>jdom需要导入开发包</li>
<li>dom4j是用的最多的，需要导入开发包</li>
</ul>
<h2 id="jaxp"><a href="#jaxp" class="headerlink" title="jaxp"></a>jaxp</h2><h3 id="DOM解析操作"><a href="#DOM解析操作" class="headerlink" title="DOM解析操作"></a>DOM解析操作</h3><blockquote>
<p>DOM解析是一个基于对象的API，它把XML的内容加载到内存中，生成与XML文档内容对应的模型！当解析完成，内存中会生成与XML文档的结构与之对应的DOM对象树，这样就能够根据树的结构，以节点的形式对文档进行操作！</p>
</blockquote>
<p><img src="https://i.loli.net/2021/09/14/K8txMdaeUW59su7.png"></p>
<p><strong>在DOM解析中有几个核心的操作接口：</strong></p>
<ul>
<li><strong>Document【代表整个XML文档，通过Document节点可以访问XML文件中所有的元素内容！】</strong></li>
<li><strong>Node【Node节点几乎在XML操作接口中几乎相当于普通Java类的Object，很多核心接口都实现了它！】</strong></li>
<li><strong>NodeList【代表着一个节点的集合，通常是一个节点中子节点的集合！】</strong></li>
<li>NameNodeMap【表示一组节点和其唯一名称对应的一一对应关系，主要用于属性节点的表示】</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000013252686">XML就是这么简单 - SegmentFault 思否</a></p>
<h1 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h1><p>JSON：<strong>JavaScript Object Notation</strong> 【JavaScript 对象表示法】</p>
<p>JSON 是存储和交换文本信息的语法。类似 XML。</p>
<p>JSON采用完全独立于任何程序语言的文本格式，使JSON成为理想的数据交换语言。</p>
<p><strong>JSON 比 XML 更小、更快，更易解析</strong>。</p>
<ul>
<li>javaScript原生支持JSON，解析速度会很快</li>
<li>XML解析成DOM对象的时候，浏览器【IE和fireFox】会有差异</li>
<li>使用JSON会更简单</li>
</ul>
<h2 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h2><p>JSON所表示的数据要么就是对象，要么就是数据</p>
<p>JSON语法是javaScript语法的子集，<strong>javaScript用[]中括号来表示数组，用{}大括号来表示对象，JSON亦是如此。</strong></p>
<h3 id="JSON数组"><a href="#JSON数组" class="headerlink" title="JSON数组"></a>JSON数组</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> employees = [</span><br><span class="line">&#123; <span class="string">&quot;firstName&quot;</span>:<span class="string">&quot;Bill&quot;</span> , <span class="string">&quot;lastName&quot;</span>:<span class="string">&quot;Gates&quot;</span> &#125;,</span><br><span class="line">&#123; <span class="string">&quot;firstName&quot;</span>:<span class="string">&quot;George&quot;</span> , <span class="string">&quot;lastName&quot;</span>:<span class="string">&quot;Bush&quot;</span> &#125;,</span><br><span class="line">&#123; <span class="string">&quot;firstName&quot;</span>:<span class="string">&quot;Thomas&quot;</span> , <span class="string">&quot;lastName&quot;</span>: <span class="string">&quot;Carter&quot;</span> &#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<h3 id="JSON对象"><a href="#JSON对象" class="headerlink" title="JSON对象"></a>JSON对象</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line"></span><br><span class="line">    <span class="attr">age</span>: <span class="number">20</span>,</span><br><span class="line">    <span class="attr">str</span>: <span class="string">&quot;zhongfucheng&quot;</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="title function_">alert</span>(<span class="string">&quot;我爱学习&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><strong>当然啦，数组可以包含对象，在对象中也可以包含数组</strong></p>
<h3 id="解析JSON"><a href="#解析JSON" class="headerlink" title="解析JSON"></a>解析JSON</h3><p><strong>使用eval()函数来解析JSON，把JSON文本数据转换成一个JavaScript对象。</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>) &#123;</span><br><span class="line">           <span class="comment">//在写JOSN的时候，记得把带上逗号</span></span><br><span class="line">           <span class="keyword">var</span> txt = <span class="string">&quot;&#123;a:123,&quot;</span> +</span><br><span class="line">                   <span class="string">&quot;b:&#x27;zhongfucheng&#x27;&#125;&quot;</span>;</span><br><span class="line"></span><br><span class="line">           <span class="comment">//使用eval解析JSON字符串，需要增添()</span></span><br><span class="line">           <span class="keyword">var</span> aa = <span class="built_in">eval</span>(<span class="string">&quot;(&quot;</span> + txt + <span class="string">&quot;)&quot;</span>);</span><br><span class="line">           <span class="title function_">alert</span>(aa);</span><br><span class="line"></span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://rshawshank.github.io/2021/09/14/JavaWeb%E5%AD%A6%E4%B9%A0%EF%BC%88%E5%8D%81%E4%BA%8C%EF%BC%89%E2%80%94%E2%80%94AJAX/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="rhb">
      <meta itemprop="description" content="纵浪大化中，不喜亦不惧">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="rhb_blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/09/14/JavaWeb%E5%AD%A6%E4%B9%A0%EF%BC%88%E5%8D%81%E4%BA%8C%EF%BC%89%E2%80%94%E2%80%94AJAX/" class="post-title-link" itemprop="url">JavaWeb学习（十二）——AJAX</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-09-13 17:03:04" itemprop="dateCreated datePublished" datetime="2021-09-13T17:03:04Z">2021-09-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-10-11 06:01:44" itemprop="dateModified" datetime="2021-10-11T06:01:44Z">2021-10-11</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">学习笔记</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/javaweb/" itemprop="url" rel="index"><span itemprop="name">javaweb</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="AJAX"><a href="#AJAX" class="headerlink" title="AJAX"></a>AJAX</h1><p>AJAX即“Asynchronous Javascript And XML”，是指一种创建交互式网页应用的网页开发技术。AJAX 是一种用于创建快速动态网页的技术。它可以令开发者只向服务器获取数据（而不是图片，HTML文档等资源），互联网资源的传输变得前所未有的轻量级和纯粹。</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/12/24/167e05bddfd8dce9~tplv-t2oaga2asx-watermark.awebp" alt="img"></p>
<p>Ajax实际上是下面这几种技术的融合：</p>
<ol>
<li>XHTML和CSS的基于标准的表示技术</li>
<li>DOM进行动态显示和交互</li>
<li>XML和XSLT进行数据交换和处理</li>
<li>XMLHttpRequest进行异步数据检索</li>
<li>Javascript将以上技术融合在一起</li>
</ol>
<p><strong>客户端与服务器，可以在【不必刷新整个浏览器】的情况下，与服务器进行异步通讯的技术</strong></p>
<p>————<strong>可以进行局部刷新</strong></p>
<h2 id="XMLHttpRequest"><a href="#XMLHttpRequest" class="headerlink" title="XMLHttpRequest"></a>XMLHttpRequest</h2><p>浏览器是先把请求发送到XMLHttpRequest异步对象之中，异步对象对请求进行封装，然后再发送给服务器。<strong>服务器并不是以转发的方式响应，而是以流的方式把数据返回给浏览器</strong></p>
<p>XMLHttpRequest异步对象会不停监听服务器状态的变化，得到服务器返回的数据，就写到浏览器上【因为不是转发的方式，所以是无刷新就能够获取服务器端的数据】</p>
<h3 id="api"><a href="#api" class="headerlink" title="api"></a>api</h3><ul>
<li><strong>open()</strong>(<strong>String method,String url,boolean asynch</strong>,String username,String password)</li>
<li><strong>send(content)</strong></li>
<li><strong>setRequestHeader(String header,String value)</strong></li>
<li>getAllResponseHeaders()</li>
<li>getResponseHeader(String header)</li>
<li>abort()</li>
</ul>
<p><strong>常用的方法就是黑色粗体的前三个</strong></p>
<ul>
<li><strong>open()：该方法创建http请求</strong><ul>
<li><strong>第一个参数是指定提交方式(post、get)</strong></li>
<li><strong>第二个参数是指定要提交的地址是哪</strong></li>
<li><strong>第三个参数是指定是异步还是同步(true表示异步，false表示同步)</strong></li>
<li>第四和第五参数在http认证的时候会用到。是可选的</li>
</ul>
</li>
<li><strong>setRequestHeader(String header,String value)：设置消息头（使用post方式才会使用到，get方法并不需要调用该方法）</strong><ul>
<li><strong>xmlhttp.setRequestHeader(“Content-type”,”application&#x2F;x-www-form-urlencoded”);</strong></li>
</ul>
</li>
<li><strong>send(content)：发送请求给服务器</strong><ul>
<li><strong>如果是get方式，并不需要填写参数，或填写null</strong></li>
<li><strong>如果是post方式，把要提交的参数写上去</strong></li>
</ul>
</li>
</ul>
<h3 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h3><ul>
<li><p><strong>onreadystatechange：请求状态改变的事件触发器（readyState变化时会调用此方法），一般用于指定回调函数</strong></p>
</li>
<li><p><strong>readyState：请求状态readyState一改变，回调函数被调用，它有5个状态</strong></p>
<ul>
<li>0：未初始化</li>
<li>1：open方法成功调用以后</li>
<li>2：服务器已经应答客户端的请求</li>
<li>3：交互中。Http头信息已经接收，响应数据尚未接收。</li>
<li><strong>4：完成。数据接收完成</strong></li>
</ul>
</li>
<li><p><strong>responseText：服务器返回的文本内容</strong></p>
</li>
<li><p><strong>responseXML：服务器返回的兼容DOM的XML内容</strong></p>
</li>
<li><p><strong>status：服务器返回的状态码</strong></p>
</li>
<li><p>statusText：服务器返回状态码的文本信息</p>
</li>
</ul>
<h2 id="ajax的使用"><a href="#ajax的使用" class="headerlink" title="ajax的使用"></a>ajax的使用</h2><h3 id="创建XMLHttpRequest对象"><a href="#创建XMLHttpRequest对象" class="headerlink" title="创建XMLHttpRequest对象"></a>创建XMLHttpRequest对象</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> httpRequest;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(<span class="variable language_">window</span>.<span class="property">XMLHttpRequest</span>) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//在IE6以上的版本以及其他内核的浏览器(Mozilla)等</span></span><br><span class="line">        httpRequest = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="variable language_">window</span>.<span class="property">ActiveXObject</span>) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//在IE6以下的版本</span></span><br><span class="line">        httpRequest = <span class="keyword">new</span> <span class="title class_">ActiveXObject</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="向服务器发送请求"><a href="#向服务器发送请求" class="headerlink" title="向服务器发送请求"></a>向服务器发送请求</h3><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">    <span class="number">1</span>. xhr.open(<span class="keyword">method</span>,<span class="title function_">url</span>,<span class="title function_">async</span>);  </span><br><span class="line">    <span class="number">2</span>. send(string)<span class="punctuation">;</span><span class="comment">//post请求时才使用字符串参数，否则不用带参数。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">method</span>：请求的类型；<span class="title function_">GET</span> 或 <span class="title function_">POST</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">url</span>：文件在服务器上的位置</span><br><span class="line"></span><br><span class="line"><span class="title function_">async</span>：<span class="title function_">true</span>（异步）或 <span class="title function_">false</span>（同步） 注意：<span class="title function_">post</span>请求一定要设置请求头的格式内容</span><br></pre></td></tr></table></figure>



<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">xhr.<span class="built_in">open</span>(<span class="string">&quot;POST&quot;</span>,<span class="string">&quot;test.html&quot;</span>,<span class="literal">true</span>);  </span><br><span class="line">xhr.setRequestHeader(<span class="string">&quot;Content-type&quot;</span>,<span class="string">&quot;application/x-www-form-urlencoded&quot;</span>);  </span><br><span class="line">xhr.<span class="built_in">send</span>(<span class="string">&quot;fname=Henry&amp;lname=Ford&quot;</span>); <span class="comment"> //post请求参数放在send里面，即请求体</span></span><br></pre></td></tr></table></figure>

<h3 id="服务器响应处理"><a href="#服务器响应处理" class="headerlink" title="服务器响应处理"></a>服务器响应处理</h3><p>responseText    获得字符串形式的响应数据。</p>
<p>responseXML   获得XML 形式的响应数据。</p>
<h4 id="①同步处理"><a href="#①同步处理" class="headerlink" title="①同步处理"></a>①同步处理</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">xhr.<span class="title function_">open</span>(<span class="string">&quot;GET&quot;</span>,<span class="string">&quot;info.txt&quot;</span>,<span class="literal">false</span>);  </span><br><span class="line">xhr.<span class="title function_">send</span>();  </span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;myDiv&quot;</span>).<span class="property">innerHTML</span>=xhr.<span class="property">responseText</span>; <span class="comment">//获取数据直接显示在页面上</span></span><br></pre></td></tr></table></figure>

<h4 id="②异步处理"><a href="#②异步处理" class="headerlink" title="②异步处理"></a>②异步处理</h4><p>相对来说比较复杂，要在请求状态改变事件中处理。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">xhr.<span class="property">onreadystatechange</span>=<span class="keyword">function</span>(<span class="params"></span>)  &#123; </span><br><span class="line">	  <span class="keyword">if</span> (xhr.<span class="property">readyState</span>==<span class="number">4</span> &amp;&amp;xhr.<span class="property">status</span>==<span class="number">200</span>)  &#123; </span><br><span class="line">	       <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;myDiv&quot;</span>).<span class="property">innerHTML</span>=xhr.<span class="property">responseText</span>;  </span><br><span class="line">	     &#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<h2 id="跨域"><a href="#跨域" class="headerlink" title="跨域"></a>跨域</h2><p><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000013473001">AJAX跨域完全讲解 - SegmentFault 思否</a></p>
<h1 id="面试题"><a href="#面试题" class="headerlink" title="面试题"></a>面试题</h1><p><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000013291898">AJAX面试题都在这里 - SegmentFault 思否</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/">13</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">rhb</p>
  <div class="site-description" itemprop="description">纵浪大化中，不喜亦不惧</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">126</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">22</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">55</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/RShawshank" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;RShawshank" rel="noopener" target="_blank"><i class="github fa-fw"></i>GitHub</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">rhb</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div><script color="0,0,255" opacity="0.5" zIndex="-1" count="99" src="https://lib.baomitu.com/canvas-nest.js/1.0.1/canvas-nest.js"></script>


        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>

<script src="/js/bookmark.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

  

</body>
</html>
